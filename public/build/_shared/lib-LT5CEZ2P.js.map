{
  "version": 3,
  "sources": ["../../../node_modules/.pnpm/requires-port@1.0.0/node_modules/requires-port/index.js", "../../../node_modules/.pnpm/querystringify@2.2.0/node_modules/querystringify/index.js", "../../../node_modules/.pnpm/url-parse@1.5.10/node_modules/url-parse/index.js", "../../../node_modules/.pnpm/@uppy+core@3.3.0/node_modules/@uppy/core/lib/UploaderPlugin.js", "../../../node_modules/.pnpm/js-base64@3.7.5/node_modules/js-base64/base64.mjs", "../../../node_modules/.pnpm/tus-js-client@3.1.0/node_modules/tus-js-client/lib.esm/upload.js", "../../../node_modules/.pnpm/tus-js-client@3.1.0/node_modules/tus-js-client/lib.esm/error.js", "../../../node_modules/.pnpm/tus-js-client@3.1.0/node_modules/tus-js-client/lib.esm/logger.js", "../../../node_modules/.pnpm/tus-js-client@3.1.0/node_modules/tus-js-client/lib.esm/uuid.js", "../../../node_modules/.pnpm/tus-js-client@3.1.0/node_modules/tus-js-client/lib.esm/noopUrlStorage.js", "../../../node_modules/.pnpm/tus-js-client@3.1.0/node_modules/tus-js-client/lib.esm/browser/urlStorage.js", "../../../node_modules/.pnpm/tus-js-client@3.1.0/node_modules/tus-js-client/lib.esm/browser/httpStack.js", "../../../node_modules/.pnpm/tus-js-client@3.1.0/node_modules/tus-js-client/lib.esm/browser/isReactNative.js", "../../../node_modules/.pnpm/tus-js-client@3.1.0/node_modules/tus-js-client/lib.esm/browser/uriToBlob.js", "../../../node_modules/.pnpm/tus-js-client@3.1.0/node_modules/tus-js-client/lib.esm/browser/sources/isCordova.js", "../../../node_modules/.pnpm/tus-js-client@3.1.0/node_modules/tus-js-client/lib.esm/browser/sources/readAsByteArray.js", "../../../node_modules/.pnpm/tus-js-client@3.1.0/node_modules/tus-js-client/lib.esm/browser/sources/FileSource.js", "../../../node_modules/.pnpm/tus-js-client@3.1.0/node_modules/tus-js-client/lib.esm/browser/sources/StreamSource.js", "../../../node_modules/.pnpm/tus-js-client@3.1.0/node_modules/tus-js-client/lib.esm/browser/fileReader.js", "../../../node_modules/.pnpm/tus-js-client@3.1.0/node_modules/tus-js-client/lib.esm/browser/fileSignature.js", "../../../node_modules/.pnpm/tus-js-client@3.1.0/node_modules/tus-js-client/lib.esm/browser/index.js", "../../../node_modules/.pnpm/@uppy+utils@5.4.0/node_modules/@uppy/utils/lib/NetworkError.js", "../../../node_modules/.pnpm/@uppy+utils@5.4.0/node_modules/@uppy/utils/lib/fetchWithNetworkError.js", "../../../node_modules/.pnpm/@uppy+utils@5.4.0/node_modules/@uppy/utils/lib/ErrorWithCause.js", "../../../node_modules/.pnpm/@uppy+companion-client@3.2.0/node_modules/@uppy/companion-client/lib/AuthError.js", "../../../node_modules/.pnpm/@uppy+companion-client@3.2.0/node_modules/@uppy/companion-client/lib/RequestClient.js", "../../../node_modules/.pnpm/@uppy+companion-client@3.2.0/node_modules/@uppy/companion-client/lib/tokenStorage.js", "../../../node_modules/.pnpm/@uppy+companion-client@3.2.0/node_modules/@uppy/companion-client/lib/Provider.js", "../../../node_modules/.pnpm/@uppy+companion-client@3.2.0/node_modules/@uppy/companion-client/lib/Socket.js", "../../../node_modules/.pnpm/@uppy+utils@5.4.0/node_modules/@uppy/utils/lib/emitSocketProgress.js", "../../../node_modules/.pnpm/@uppy+utils@5.4.0/node_modules/@uppy/utils/lib/getSocketHost.js", "../../../node_modules/.pnpm/@uppy+utils@5.4.0/node_modules/@uppy/utils/lib/EventManager.js", "../../../node_modules/.pnpm/@uppy+utils@5.4.0/node_modules/@uppy/utils/lib/isNetworkError.js", "../../../node_modules/.pnpm/@uppy+utils@5.4.0/node_modules/@uppy/utils/lib/RateLimitedQueue.js", "../../../node_modules/.pnpm/@uppy+utils@5.4.0/node_modules/@uppy/utils/lib/fileFilters.js", "../../../node_modules/.pnpm/@uppy+tus@3.1.2_@uppy+core@3.3.0/node_modules/@uppy/tus/lib/getFingerprint.js", "../../../node_modules/.pnpm/@uppy+tus@3.1.2_@uppy+core@3.3.0/node_modules/@uppy/tus/lib/index.js"],
  "sourcesContent": ["'use strict';\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n", "'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n", "'use strict';\n\nvar required = require('requires-port')\n  , qs = require('querystringify')\n  , controlOrWhitespace = /^[\\x00-\\x20\\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]+/\n  , CRHTLF = /[\\n\\r\\t]/g\n  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//\n  , port = /:\\d+$/\n  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\\\/]+)?([\\S\\s]*)/i\n  , windowsDriveLetter = /^[a-zA-Z]:/;\n\n/**\n * Remove control characters and whitespace from the beginning of a string.\n *\n * @param {Object|String} str String to trim.\n * @returns {String} A new string representing `str` stripped of control\n *     characters and whitespace from its beginning.\n * @public\n */\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(controlOrWhitespace, '');\n}\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address, url) {     // Sanitize what is left of the address\n    return isSpecial(url.protocol) ? address.replace(/\\\\/g, '/') : address;\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d*)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var globalVar;\n\n  if (typeof window !== 'undefined') globalVar = window;\n  else if (typeof global !== 'undefined') globalVar = global;\n  else if (typeof self !== 'undefined') globalVar = self;\n  else globalVar = {};\n\n  var location = globalVar.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * Check whether a protocol scheme is special.\n *\n * @param {String} The protocol scheme of the URL\n * @return {Boolean} `true` if the protocol scheme is special, else `false`\n * @private\n */\nfunction isSpecial(scheme) {\n  return (\n    scheme === 'file:' ||\n    scheme === 'ftp:' ||\n    scheme === 'http:' ||\n    scheme === 'https:' ||\n    scheme === 'ws:' ||\n    scheme === 'wss:'\n  );\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @param {Object} location\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address, location) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n  location = location || {};\n\n  var match = protocolre.exec(address);\n  var protocol = match[1] ? match[1].toLowerCase() : '';\n  var forwardSlashes = !!match[2];\n  var otherSlashes = !!match[3];\n  var slashesCount = 0;\n  var rest;\n\n  if (forwardSlashes) {\n    if (otherSlashes) {\n      rest = match[2] + match[3] + match[4];\n      slashesCount = match[2].length + match[3].length;\n    } else {\n      rest = match[2] + match[4];\n      slashesCount = match[2].length;\n    }\n  } else {\n    if (otherSlashes) {\n      rest = match[3] + match[4];\n      slashesCount = match[3].length;\n    } else {\n      rest = match[4]\n    }\n  }\n\n  if (protocol === 'file:') {\n    if (slashesCount >= 2) {\n      rest = rest.slice(2);\n    }\n  } else if (isSpecial(protocol)) {\n    rest = match[4];\n  } else if (protocol) {\n    if (forwardSlashes) {\n      rest = rest.slice(2);\n    }\n  } else if (slashesCount >= 2 && isSpecial(location.protocol)) {\n    rest = match[4];\n  }\n\n  return {\n    protocol: protocol,\n    slashes: forwardSlashes || isSpecial(protocol),\n    slashesCount: slashesCount,\n    rest: rest\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '', location);\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (\n    extracted.protocol === 'file:' && (\n      extracted.slashesCount !== 2 || windowsDriveLetter.test(address)) ||\n    (!extracted.slashes &&\n      (extracted.protocol ||\n        extracted.slashesCount < 2 ||\n        !isSpecial(url.protocol)))\n  ) {\n    instructions[3] = [/(.*)/, 'pathname'];\n  }\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address, url);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      index = parse === '@'\n        ? address.lastIndexOf(parse)\n        : address.indexOf(parse);\n\n      if (~index) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // Default to a / for pathname if none exists. This normalizes the URL\n  // to always have a /\n  //\n  if (url.pathname.charAt(0) !== '/' && isSpecial(url.protocol)) {\n    url.pathname = '/' + url.pathname;\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n\n  if (url.auth) {\n    index = url.auth.indexOf(':');\n\n    if (~index) {\n      url.username = url.auth.slice(0, index);\n      url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n      url.password = url.auth.slice(index + 1);\n      url.password = encodeURIComponent(decodeURIComponent(url.password))\n    } else {\n      url.username = encodeURIComponent(decodeURIComponent(url.auth));\n    }\n\n    url.auth = url.password ? url.username +':'+ url.password : url.username;\n  }\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) value += ':'+ url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (port.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    case 'username':\n    case 'password':\n      url[part] = encodeURIComponent(value);\n      break;\n\n    case 'auth':\n      var index = value.indexOf(':');\n\n      if (~index) {\n        url.username = value.slice(0, index);\n        url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n        url.password = value.slice(index + 1);\n        url.password = encodeURIComponent(decodeURIComponent(url.password));\n      } else {\n        url.username = encodeURIComponent(decodeURIComponent(value));\n      }\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.auth = url.password ? url.username +':'+ url.password : url.username;\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , host = url.host\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result =\n    protocol +\n    ((url.protocol && url.slashes) || isSpecial(url.protocol) ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  } else if (url.password) {\n    result += ':'+ url.password;\n    result += '@';\n  } else if (\n    url.protocol !== 'file:' &&\n    isSpecial(url.protocol) &&\n    !host &&\n    url.pathname !== '/'\n  ) {\n    //\n    // Add back the empty userinfo, otherwise the original invalid URL\n    // might be transformed into a valid one with `url.pathname` as host.\n    //\n    result += '@';\n  }\n\n  //\n  // Trailing colon is removed from `url.host` when it is parsed. If it still\n  // ends with a colon, then add back the trailing colon that was removed. This\n  // prevents an invalid URL from being transformed into a valid one.\n  //\n  if (host[host.length - 1] === ':' || (port.test(url.hostname) && !url.port)) {\n    host += ':';\n  }\n\n  result += host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\n\nmodule.exports = Url;\n", "function _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\nvar id = 0;\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\nimport BasePlugin from './BasePlugin.js';\nvar _queueRequestSocketToken = /*#__PURE__*/_classPrivateFieldLooseKey(\"queueRequestSocketToken\");\nexport default class UploaderPlugin extends BasePlugin {\n  constructor() {\n    super(...arguments);\n    Object.defineProperty(this, _queueRequestSocketToken, {\n      writable: true,\n      value: void 0\n    });\n  }\n  /** @protected */\n  setQueueRequestSocketToken(fn) {\n    _classPrivateFieldLooseBase(this, _queueRequestSocketToken)[_queueRequestSocketToken] = fn;\n  }\n  async uploadRemoteFile(file, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    // TODO: we could rewrite this to use server-sent events instead of creating WebSockets.\n    try {\n      if (file.serverToken) {\n        return await this.connectToServerSocket(file);\n      }\n      const serverToken = await _classPrivateFieldLooseBase(this, _queueRequestSocketToken)[_queueRequestSocketToken](file).abortOn(options.signal);\n      if (!this.uppy.getState().files[file.id]) return undefined;\n      this.uppy.setFileState(file.id, {\n        serverToken\n      });\n      return await this.connectToServerSocket(this.uppy.getFile(file.id));\n    } catch (err) {\n      var _err$cause;\n      if ((err == null ? void 0 : (_err$cause = err.cause) == null ? void 0 : _err$cause.name) === 'AbortError') {\n        // The file upload was aborted, it\u2019s not an error\n        return undefined;\n      }\n      this.uppy.setFileState(file.id, {\n        serverToken: undefined\n      });\n      this.uppy.emit('upload-error', file, err);\n      throw err;\n    }\n  }\n}", "/**\n *  base64.ts\n *\n *  Licensed under the BSD 3-Clause License.\n *    http://opensource.org/licenses/BSD-3-Clause\n *\n *  References:\n *    http://en.wikipedia.org/wiki/Base64\n *\n * @author Dan Kogai (https://github.com/dankogai)\n */\nconst version = '3.7.5';\n/**\n * @deprecated use lowercase `version`.\n */\nconst VERSION = version;\nconst _hasatob = typeof atob === 'function';\nconst _hasbtoa = typeof btoa === 'function';\nconst _hasBuffer = typeof Buffer === 'function';\nconst _TD = typeof TextDecoder === 'function' ? new TextDecoder() : undefined;\nconst _TE = typeof TextEncoder === 'function' ? new TextEncoder() : undefined;\nconst b64ch = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nconst b64chs = Array.prototype.slice.call(b64ch);\nconst b64tab = ((a) => {\n    let tab = {};\n    a.forEach((c, i) => tab[c] = i);\n    return tab;\n})(b64chs);\nconst b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\nconst _fromCC = String.fromCharCode.bind(String);\nconst _U8Afrom = typeof Uint8Array.from === 'function'\n    ? Uint8Array.from.bind(Uint8Array)\n    : (it) => new Uint8Array(Array.prototype.slice.call(it, 0));\nconst _mkUriSafe = (src) => src\n    .replace(/=/g, '').replace(/[+\\/]/g, (m0) => m0 == '+' ? '-' : '_');\nconst _tidyB64 = (s) => s.replace(/[^A-Za-z0-9\\+\\/]/g, '');\n/**\n * polyfill version of `btoa`\n */\nconst btoaPolyfill = (bin) => {\n    // console.log('polyfilled');\n    let u32, c0, c1, c2, asc = '';\n    const pad = bin.length % 3;\n    for (let i = 0; i < bin.length;) {\n        if ((c0 = bin.charCodeAt(i++)) > 255 ||\n            (c1 = bin.charCodeAt(i++)) > 255 ||\n            (c2 = bin.charCodeAt(i++)) > 255)\n            throw new TypeError('invalid character found');\n        u32 = (c0 << 16) | (c1 << 8) | c2;\n        asc += b64chs[u32 >> 18 & 63]\n            + b64chs[u32 >> 12 & 63]\n            + b64chs[u32 >> 6 & 63]\n            + b64chs[u32 & 63];\n    }\n    return pad ? asc.slice(0, pad - 3) + \"===\".substring(pad) : asc;\n};\n/**\n * does what `window.btoa` of web browsers do.\n * @param {String} bin binary string\n * @returns {string} Base64-encoded string\n */\nconst _btoa = _hasbtoa ? (bin) => btoa(bin)\n    : _hasBuffer ? (bin) => Buffer.from(bin, 'binary').toString('base64')\n        : btoaPolyfill;\nconst _fromUint8Array = _hasBuffer\n    ? (u8a) => Buffer.from(u8a).toString('base64')\n    : (u8a) => {\n        // cf. https://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string/12713326#12713326\n        const maxargs = 0x1000;\n        let strs = [];\n        for (let i = 0, l = u8a.length; i < l; i += maxargs) {\n            strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));\n        }\n        return _btoa(strs.join(''));\n    };\n/**\n * converts a Uint8Array to a Base64 string.\n * @param {boolean} [urlsafe] URL-and-filename-safe a la RFC4648 \u00A75\n * @returns {string} Base64 string\n */\nconst fromUint8Array = (u8a, urlsafe = false) => urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const utob = (src: string) => unescape(encodeURIComponent(src));\n// reverting good old fationed regexp\nconst cb_utob = (c) => {\n    if (c.length < 2) {\n        var cc = c.charCodeAt(0);\n        return cc < 0x80 ? c\n            : cc < 0x800 ? (_fromCC(0xc0 | (cc >>> 6))\n                + _fromCC(0x80 | (cc & 0x3f)))\n                : (_fromCC(0xe0 | ((cc >>> 12) & 0x0f))\n                    + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n                    + _fromCC(0x80 | (cc & 0x3f)));\n    }\n    else {\n        var cc = 0x10000\n            + (c.charCodeAt(0) - 0xD800) * 0x400\n            + (c.charCodeAt(1) - 0xDC00);\n        return (_fromCC(0xf0 | ((cc >>> 18) & 0x07))\n            + _fromCC(0x80 | ((cc >>> 12) & 0x3f))\n            + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n            + _fromCC(0x80 | (cc & 0x3f)));\n    }\n};\nconst re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-8 string\n * @returns {string} UTF-16 string\n */\nconst utob = (u) => u.replace(re_utob, cb_utob);\n//\nconst _encode = _hasBuffer\n    ? (s) => Buffer.from(s, 'utf8').toString('base64')\n    : _TE\n        ? (s) => _fromUint8Array(_TE.encode(s))\n        : (s) => _btoa(utob(s));\n/**\n * converts a UTF-8-encoded string to a Base64 string.\n * @param {boolean} [urlsafe] if `true` make the result URL-safe\n * @returns {string} Base64 string\n */\nconst encode = (src, urlsafe = false) => urlsafe\n    ? _mkUriSafe(_encode(src))\n    : _encode(src);\n/**\n * converts a UTF-8-encoded string to URL-safe Base64 RFC4648 \u00A75.\n * @returns {string} Base64 string\n */\nconst encodeURI = (src) => encode(src, true);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const btou = (src: string) => decodeURIComponent(escape(src));\n// reverting good old fationed regexp\nconst re_btou = /[\\xC0-\\xDF][\\x80-\\xBF]|[\\xE0-\\xEF][\\x80-\\xBF]{2}|[\\xF0-\\xF7][\\x80-\\xBF]{3}/g;\nconst cb_btou = (cccc) => {\n    switch (cccc.length) {\n        case 4:\n            var cp = ((0x07 & cccc.charCodeAt(0)) << 18)\n                | ((0x3f & cccc.charCodeAt(1)) << 12)\n                | ((0x3f & cccc.charCodeAt(2)) << 6)\n                | (0x3f & cccc.charCodeAt(3)), offset = cp - 0x10000;\n            return (_fromCC((offset >>> 10) + 0xD800)\n                + _fromCC((offset & 0x3FF) + 0xDC00));\n        case 3:\n            return _fromCC(((0x0f & cccc.charCodeAt(0)) << 12)\n                | ((0x3f & cccc.charCodeAt(1)) << 6)\n                | (0x3f & cccc.charCodeAt(2)));\n        default:\n            return _fromCC(((0x1f & cccc.charCodeAt(0)) << 6)\n                | (0x3f & cccc.charCodeAt(1)));\n    }\n};\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-16 string\n * @returns {string} UTF-8 string\n */\nconst btou = (b) => b.replace(re_btou, cb_btou);\n/**\n * polyfill version of `atob`\n */\nconst atobPolyfill = (asc) => {\n    // console.log('polyfilled');\n    asc = asc.replace(/\\s+/g, '');\n    if (!b64re.test(asc))\n        throw new TypeError('malformed base64.');\n    asc += '=='.slice(2 - (asc.length & 3));\n    let u24, bin = '', r1, r2;\n    for (let i = 0; i < asc.length;) {\n        u24 = b64tab[asc.charAt(i++)] << 18\n            | b64tab[asc.charAt(i++)] << 12\n            | (r1 = b64tab[asc.charAt(i++)]) << 6\n            | (r2 = b64tab[asc.charAt(i++)]);\n        bin += r1 === 64 ? _fromCC(u24 >> 16 & 255)\n            : r2 === 64 ? _fromCC(u24 >> 16 & 255, u24 >> 8 & 255)\n                : _fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255);\n    }\n    return bin;\n};\n/**\n * does what `window.atob` of web browsers do.\n * @param {String} asc Base64-encoded string\n * @returns {string} binary string\n */\nconst _atob = _hasatob ? (asc) => atob(_tidyB64(asc))\n    : _hasBuffer ? (asc) => Buffer.from(asc, 'base64').toString('binary')\n        : atobPolyfill;\n//\nconst _toUint8Array = _hasBuffer\n    ? (a) => _U8Afrom(Buffer.from(a, 'base64'))\n    : (a) => _U8Afrom(_atob(a).split('').map(c => c.charCodeAt(0)));\n/**\n * converts a Base64 string to a Uint8Array.\n */\nconst toUint8Array = (a) => _toUint8Array(_unURI(a));\n//\nconst _decode = _hasBuffer\n    ? (a) => Buffer.from(a, 'base64').toString('utf8')\n    : _TD\n        ? (a) => _TD.decode(_toUint8Array(a))\n        : (a) => btou(_atob(a));\nconst _unURI = (a) => _tidyB64(a.replace(/[-_]/g, (m0) => m0 == '-' ? '+' : '/'));\n/**\n * converts a Base64 string to a UTF-8 string.\n * @param {String} src Base64 string.  Both normal and URL-safe are supported\n * @returns {string} UTF-8 string\n */\nconst decode = (src) => _decode(_unURI(src));\n/**\n * check if a value is a valid Base64 string\n * @param {String} src a value to check\n  */\nconst isValid = (src) => {\n    if (typeof src !== 'string')\n        return false;\n    const s = src.replace(/\\s+/g, '').replace(/={0,2}$/, '');\n    return !/[^\\s0-9a-zA-Z\\+/]/.test(s) || !/[^\\s0-9a-zA-Z\\-_]/.test(s);\n};\n//\nconst _noEnum = (v) => {\n    return {\n        value: v, enumerable: false, writable: true, configurable: true\n    };\n};\n/**\n * extend String.prototype with relevant methods\n */\nconst extendString = function () {\n    const _add = (name, body) => Object.defineProperty(String.prototype, name, _noEnum(body));\n    _add('fromBase64', function () { return decode(this); });\n    _add('toBase64', function (urlsafe) { return encode(this, urlsafe); });\n    _add('toBase64URI', function () { return encode(this, true); });\n    _add('toBase64URL', function () { return encode(this, true); });\n    _add('toUint8Array', function () { return toUint8Array(this); });\n};\n/**\n * extend Uint8Array.prototype with relevant methods\n */\nconst extendUint8Array = function () {\n    const _add = (name, body) => Object.defineProperty(Uint8Array.prototype, name, _noEnum(body));\n    _add('toBase64', function (urlsafe) { return fromUint8Array(this, urlsafe); });\n    _add('toBase64URI', function () { return fromUint8Array(this, true); });\n    _add('toBase64URL', function () { return fromUint8Array(this, true); });\n};\n/**\n * extend Builtin prototypes with relevant methods\n */\nconst extendBuiltins = () => {\n    extendString();\n    extendUint8Array();\n};\nconst gBase64 = {\n    version: version,\n    VERSION: VERSION,\n    atob: _atob,\n    atobPolyfill: atobPolyfill,\n    btoa: _btoa,\n    btoaPolyfill: btoaPolyfill,\n    fromBase64: decode,\n    toBase64: encode,\n    encode: encode,\n    encodeURI: encodeURI,\n    encodeURL: encodeURI,\n    utob: utob,\n    btou: btou,\n    decode: decode,\n    isValid: isValid,\n    fromUint8Array: fromUint8Array,\n    toUint8Array: toUint8Array,\n    extendString: extendString,\n    extendUint8Array: extendUint8Array,\n    extendBuiltins: extendBuiltins,\n};\n// makecjs:CUT //\nexport { version };\nexport { VERSION };\nexport { _atob as atob };\nexport { atobPolyfill };\nexport { _btoa as btoa };\nexport { btoaPolyfill };\nexport { decode as fromBase64 };\nexport { encode as toBase64 };\nexport { utob };\nexport { encode };\nexport { encodeURI };\nexport { encodeURI as encodeURL };\nexport { btou };\nexport { decode };\nexport { isValid };\nexport { fromUint8Array };\nexport { toUint8Array };\nexport { extendString };\nexport { extendUint8Array };\nexport { extendBuiltins };\n// and finally,\nexport { gBase64 as Base64 };\n", "function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport { Base64 } from 'js-base64';\nimport URL from 'url-parse';\nimport DetailedError from './error.js';\nimport { log } from './logger.js';\nimport uuid from './uuid.js';\nvar defaultOptions = {\n  endpoint: null,\n  uploadUrl: null,\n  metadata: {},\n  fingerprint: null,\n  uploadSize: null,\n  onProgress: null,\n  onChunkComplete: null,\n  onSuccess: null,\n  onError: null,\n  onUploadUrlAvailable: null,\n  overridePatchMethod: false,\n  headers: {},\n  addRequestId: false,\n  onBeforeRequest: null,\n  onAfterResponse: null,\n  onShouldRetry: null,\n  chunkSize: Infinity,\n  retryDelays: [0, 1000, 3000, 5000],\n  parallelUploads: 1,\n  parallelUploadBoundaries: null,\n  storeFingerprintForResuming: true,\n  removeFingerprintOnSuccess: false,\n  uploadLengthDeferred: false,\n  uploadDataDuringCreation: false,\n  urlStorage: null,\n  fileReader: null,\n  httpStack: null\n};\n\nvar BaseUpload = /*#__PURE__*/function () {\n  function BaseUpload(file, options) {\n    _classCallCheck(this, BaseUpload);\n\n    // Warn about removed options from previous versions\n    if ('resume' in options) {\n      console.log('tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead.'); // eslint-disable-line no-console\n    } // The default options will already be added from the wrapper classes.\n\n\n    this.options = options; // Cast chunkSize to integer\n\n    this.options.chunkSize = Number(this.options.chunkSize); // The storage module used to store URLs\n\n    this._urlStorage = this.options.urlStorage; // The underlying File/Blob object\n\n    this.file = file; // The URL against which the file will be uploaded\n\n    this.url = null; // The underlying request object for the current PATCH request\n\n    this._req = null; // The fingerpinrt for the current file (set after start())\n\n    this._fingerprint = null; // The key that the URL storage returned when saving an URL with a fingerprint,\n\n    this._urlStorageKey = null; // The offset used in the current PATCH request\n\n    this._offset = null; // True if the current PATCH request has been aborted\n\n    this._aborted = false; // The file's size in bytes\n\n    this._size = null; // The Source object which will wrap around the given file and provides us\n    // with a unified interface for getting its size and slice chunks from its\n    // content allowing us to easily handle Files, Blobs, Buffers and Streams.\n\n    this._source = null; // The current count of attempts which have been made. Zero indicates none.\n\n    this._retryAttempt = 0; // The timeout's ID which is used to delay the next retry\n\n    this._retryTimeout = null; // The offset of the remote upload before the latest attempt was started.\n\n    this._offsetBeforeRetry = 0; // An array of BaseUpload instances which are used for uploading the different\n    // parts, if the parallelUploads option is used.\n\n    this._parallelUploads = null; // An array of upload URLs which are used for uploading the different\n    // parts, if the parallelUploads option is used.\n\n    this._parallelUploadUrls = null;\n  }\n  /**\n   * Use the Termination extension to delete an upload from the server by sending a DELETE\n   * request to the specified upload URL. This is only possible if the server supports the\n   * Termination extension. If the `options.retryDelays` property is set, the method will\n   * also retry if an error ocurrs.\n   *\n   * @param {String} url The upload's URL which will be terminated.\n   * @param {object} options Optional options for influencing HTTP requests.\n   * @return {Promise} The Promise will be resolved/rejected when the requests finish.\n   */\n\n\n  _createClass(BaseUpload, [{\n    key: \"findPreviousUploads\",\n    value: function findPreviousUploads() {\n      var _this = this;\n\n      return this.options.fingerprint(this.file, this.options).then(function (fingerprint) {\n        return _this._urlStorage.findUploadsByFingerprint(fingerprint);\n      });\n    }\n  }, {\n    key: \"resumeFromPreviousUpload\",\n    value: function resumeFromPreviousUpload(previousUpload) {\n      this.url = previousUpload.uploadUrl || null;\n      this._parallelUploadUrls = previousUpload.parallelUploadUrls || null;\n      this._urlStorageKey = previousUpload.urlStorageKey;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this2 = this;\n\n      var file = this.file;\n\n      if (!file) {\n        this._emitError(new Error('tus: no file or stream to upload provided'));\n\n        return;\n      }\n\n      if (!this.options.endpoint && !this.options.uploadUrl && !this.url) {\n        this._emitError(new Error('tus: neither an endpoint or an upload URL is provided'));\n\n        return;\n      }\n\n      var retryDelays = this.options.retryDelays;\n\n      if (retryDelays != null && Object.prototype.toString.call(retryDelays) !== '[object Array]') {\n        this._emitError(new Error('tus: the `retryDelays` option must either be an array or null'));\n\n        return;\n      }\n\n      if (this.options.parallelUploads > 1) {\n        // Test which options are incompatible with parallel uploads.\n        for (var _i = 0, _arr = ['uploadUrl', 'uploadSize', 'uploadLengthDeferred']; _i < _arr.length; _i++) {\n          var optionName = _arr[_i];\n\n          if (this.options[optionName]) {\n            this._emitError(new Error(\"tus: cannot use the \".concat(optionName, \" option when parallelUploads is enabled\")));\n\n            return;\n          }\n        }\n      }\n\n      if (this.options.parallelUploadBoundaries) {\n        if (this.options.parallelUploads <= 1) {\n          this._emitError(new Error('tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled'));\n\n          return;\n        }\n\n        if (this.options.parallelUploads !== this.options.parallelUploadBoundaries.length) {\n          this._emitError(new Error('tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`'));\n\n          return;\n        }\n      }\n\n      this.options.fingerprint(file, this.options).then(function (fingerprint) {\n        if (fingerprint == null) {\n          log('No fingerprint was calculated meaning that the upload cannot be stored in the URL storage.');\n        } else {\n          log(\"Calculated fingerprint: \".concat(fingerprint));\n        }\n\n        _this2._fingerprint = fingerprint;\n\n        if (_this2._source) {\n          return _this2._source;\n        }\n\n        return _this2.options.fileReader.openFile(file, _this2.options.chunkSize);\n      }).then(function (source) {\n        _this2._source = source; // First, we look at the uploadLengthDeferred option.\n        // Next, we check if the caller has supplied a manual upload size.\n        // Finally, we try to use the calculated size from the source object.\n\n        if (_this2.options.uploadLengthDeferred) {\n          _this2._size = null;\n        } else if (_this2.options.uploadSize != null) {\n          _this2._size = Number(_this2.options.uploadSize);\n\n          if (Number.isNaN(_this2._size)) {\n            _this2._emitError(new Error('tus: cannot convert `uploadSize` option into a number'));\n\n            return;\n          }\n        } else {\n          _this2._size = _this2._source.size;\n\n          if (_this2._size == null) {\n            _this2._emitError(new Error(\"tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option\"));\n\n            return;\n          }\n        } // If the upload was configured to use multiple requests or if we resume from\n        // an upload which used multiple requests, we start a parallel upload.\n\n\n        if (_this2.options.parallelUploads > 1 || _this2._parallelUploadUrls != null) {\n          _this2._startParallelUpload();\n        } else {\n          _this2._startSingleUpload();\n        }\n      })[\"catch\"](function (err) {\n        _this2._emitError(err);\n      });\n    }\n    /**\n     * Initiate the uploading procedure for a parallelized upload, where one file is split into\n     * multiple request which are run in parallel.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_startParallelUpload\",\n    value: function _startParallelUpload() {\n      var _this$options$paralle,\n          _this3 = this;\n\n      var totalSize = this._size;\n      var totalProgress = 0;\n      this._parallelUploads = [];\n      var partCount = this._parallelUploadUrls != null ? this._parallelUploadUrls.length : this.options.parallelUploads; // The input file will be split into multiple slices which are uploaded in separate\n      // requests. Here we get the start and end position for the slices.\n\n      var parts = (_this$options$paralle = this.options.parallelUploadBoundaries) !== null && _this$options$paralle !== void 0 ? _this$options$paralle : splitSizeIntoParts(this._source.size, partCount); // Attach URLs from previous uploads, if available.\n\n      if (this._parallelUploadUrls) {\n        parts.forEach(function (part, index) {\n          part.uploadUrl = _this3._parallelUploadUrls[index] || null;\n        });\n      } // Create an empty list for storing the upload URLs\n\n\n      this._parallelUploadUrls = new Array(parts.length); // Generate a promise for each slice that will be resolve if the respective\n      // upload is completed.\n\n      var uploads = parts.map(function (part, index) {\n        var lastPartProgress = 0;\n        return _this3._source.slice(part.start, part.end).then(function (_ref) {\n          var value = _ref.value;\n          return new Promise(function (resolve, reject) {\n            // Merge with the user supplied options but overwrite some values.\n            var options = _objectSpread(_objectSpread({}, _this3.options), {}, {\n              // If available, the partial upload should be resumed from a previous URL.\n              uploadUrl: part.uploadUrl || null,\n              // We take manually care of resuming for partial uploads, so they should\n              // not be stored in the URL storage.\n              storeFingerprintForResuming: false,\n              removeFingerprintOnSuccess: false,\n              // Reset the parallelUploads option to not cause recursion.\n              parallelUploads: 1,\n              // Reset this option as we are not doing a parallel upload.\n              parallelUploadBoundaries: null,\n              metadata: {},\n              // Add the header to indicate the this is a partial upload.\n              headers: _objectSpread(_objectSpread({}, _this3.options.headers), {}, {\n                'Upload-Concat': 'partial'\n              }),\n              // Reject or resolve the promise if the upload errors or completes.\n              onSuccess: resolve,\n              onError: reject,\n              // Based in the progress for this partial upload, calculate the progress\n              // for the entire final upload.\n              onProgress: function onProgress(newPartProgress) {\n                totalProgress = totalProgress - lastPartProgress + newPartProgress;\n                lastPartProgress = newPartProgress;\n\n                _this3._emitProgress(totalProgress, totalSize);\n              },\n              // Wait until every partial upload has an upload URL, so we can add\n              // them to the URL storage.\n              onUploadUrlAvailable: function onUploadUrlAvailable() {\n                _this3._parallelUploadUrls[index] = upload.url; // Test if all uploads have received an URL\n\n                if (_this3._parallelUploadUrls.filter(function (u) {\n                  return Boolean(u);\n                }).length === parts.length) {\n                  _this3._saveUploadInUrlStorage();\n                }\n              }\n            });\n\n            var upload = new BaseUpload(value, options);\n            upload.start(); // Store the upload in an array, so we can later abort them if necessary.\n\n            _this3._parallelUploads.push(upload);\n          });\n        });\n      });\n      var req; // Wait until all partial uploads are finished and we can send the POST request for\n      // creating the final upload.\n\n      Promise.all(uploads).then(function () {\n        req = _this3._openRequest('POST', _this3.options.endpoint);\n        req.setHeader('Upload-Concat', \"final;\".concat(_this3._parallelUploadUrls.join(' '))); // Add metadata if values have been added\n\n        var metadata = encodeMetadata(_this3.options.metadata);\n\n        if (metadata !== '') {\n          req.setHeader('Upload-Metadata', metadata);\n        }\n\n        return _this3._sendRequest(req, null);\n      }).then(function (res) {\n        if (!inStatusCategory(res.getStatus(), 200)) {\n          _this3._emitHttpError(req, res, 'tus: unexpected response while creating upload');\n\n          return;\n        }\n\n        var location = res.getHeader('Location');\n\n        if (location == null) {\n          _this3._emitHttpError(req, res, 'tus: invalid or missing Location header');\n\n          return;\n        }\n\n        _this3.url = resolveUrl(_this3.options.endpoint, location);\n        log(\"Created upload at \".concat(_this3.url));\n\n        _this3._emitSuccess();\n      })[\"catch\"](function (err) {\n        _this3._emitError(err);\n      });\n    }\n    /**\n     * Initiate the uploading procedure for a non-parallel upload. Here the entire file is\n     * uploaded in a sequential matter.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_startSingleUpload\",\n    value: function _startSingleUpload() {\n      // Reset the aborted flag when the upload is started or else the\n      // _performUpload will stop before sending a request if the upload has been\n      // aborted previously.\n      this._aborted = false; // The upload had been started previously and we should reuse this URL.\n\n      if (this.url != null) {\n        log(\"Resuming upload from previous URL: \".concat(this.url));\n\n        this._resumeUpload();\n\n        return;\n      } // A URL has manually been specified, so we try to resume\n\n\n      if (this.options.uploadUrl != null) {\n        log(\"Resuming upload from provided URL: \".concat(this.options.uploadUrl));\n        this.url = this.options.uploadUrl;\n\n        this._resumeUpload();\n\n        return;\n      } // An upload has not started for the file yet, so we start a new one\n\n\n      log('Creating a new upload');\n\n      this._createUpload();\n    }\n    /**\n     * Abort any running request and stop the current upload. After abort is called, no event\n     * handler will be invoked anymore. You can use the `start` method to resume the upload\n     * again.\n     * If `shouldTerminate` is true, the `terminate` function will be called to remove the\n     * current upload from the server.\n     *\n     * @param {boolean} shouldTerminate True if the upload should be deleted from the server.\n     * @return {Promise} The Promise will be resolved/rejected when the requests finish.\n     */\n\n  }, {\n    key: \"abort\",\n    value: function abort(shouldTerminate) {\n      var _this4 = this;\n\n      // Stop any parallel partial uploads, that have been started in _startParallelUploads.\n      if (this._parallelUploads != null) {\n        this._parallelUploads.forEach(function (upload) {\n          upload.abort(shouldTerminate);\n        });\n      } // Stop any current running request.\n\n\n      if (this._req !== null) {\n        this._req.abort(); // Note: We do not close the file source here, so the user can resume in the future.\n\n      }\n\n      this._aborted = true; // Stop any timeout used for initiating a retry.\n\n      if (this._retryTimeout != null) {\n        clearTimeout(this._retryTimeout);\n        this._retryTimeout = null;\n      }\n\n      if (!shouldTerminate || this.url == null) {\n        return Promise.resolve();\n      }\n\n      return BaseUpload.terminate(this.url, this.options) // Remove entry from the URL storage since the upload URL is no longer valid.\n      .then(function () {\n        return _this4._removeFromUrlStorage();\n      });\n    }\n  }, {\n    key: \"_emitHttpError\",\n    value: function _emitHttpError(req, res, message, causingErr) {\n      this._emitError(new DetailedError(message, causingErr, req, res));\n    }\n  }, {\n    key: \"_emitError\",\n    value: function _emitError(err) {\n      var _this5 = this;\n\n      // Do not emit errors, e.g. from aborted HTTP requests, if the upload has been stopped.\n      if (this._aborted) return; // Check if we should retry, when enabled, before sending the error to the user.\n\n      if (this.options.retryDelays != null) {\n        // We will reset the attempt counter if\n        // - we were already able to connect to the server (offset != null) and\n        // - we were able to upload a small chunk of data to the server\n        var shouldResetDelays = this._offset != null && this._offset > this._offsetBeforeRetry;\n\n        if (shouldResetDelays) {\n          this._retryAttempt = 0;\n        }\n\n        if (shouldRetry(err, this._retryAttempt, this.options)) {\n          var delay = this.options.retryDelays[this._retryAttempt++];\n          this._offsetBeforeRetry = this._offset;\n          this._retryTimeout = setTimeout(function () {\n            _this5.start();\n          }, delay);\n          return;\n        }\n      }\n\n      if (typeof this.options.onError === 'function') {\n        this.options.onError(err);\n      } else {\n        throw err;\n      }\n    }\n    /**\n     * Publishes notification if the upload has been successfully completed.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_emitSuccess\",\n    value: function _emitSuccess() {\n      if (this.options.removeFingerprintOnSuccess) {\n        // Remove stored fingerprint and corresponding endpoint. This causes\n        // new uploads of the same file to be treated as a different file.\n        this._removeFromUrlStorage();\n      }\n\n      if (typeof this.options.onSuccess === 'function') {\n        this.options.onSuccess();\n      }\n    }\n    /**\n     * Publishes notification when data has been sent to the server. This\n     * data may not have been accepted by the server yet.\n     *\n     * @param {number} bytesSent  Number of bytes sent to the server.\n     * @param {number} bytesTotal Total number of bytes to be sent to the server.\n     * @api private\n     */\n\n  }, {\n    key: \"_emitProgress\",\n    value: function _emitProgress(bytesSent, bytesTotal) {\n      if (typeof this.options.onProgress === 'function') {\n        this.options.onProgress(bytesSent, bytesTotal);\n      }\n    }\n    /**\n     * Publishes notification when a chunk of data has been sent to the server\n     * and accepted by the server.\n     * @param {number} chunkSize  Size of the chunk that was accepted by the server.\n     * @param {number} bytesAccepted Total number of bytes that have been\n     *                                accepted by the server.\n     * @param {number} bytesTotal Total number of bytes to be sent to the server.\n     * @api private\n     */\n\n  }, {\n    key: \"_emitChunkComplete\",\n    value: function _emitChunkComplete(chunkSize, bytesAccepted, bytesTotal) {\n      if (typeof this.options.onChunkComplete === 'function') {\n        this.options.onChunkComplete(chunkSize, bytesAccepted, bytesTotal);\n      }\n    }\n    /**\n     * Create a new upload using the creation extension by sending a POST\n     * request to the endpoint. After successful creation the file will be\n     * uploaded\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_createUpload\",\n    value: function _createUpload() {\n      var _this6 = this;\n\n      if (!this.options.endpoint) {\n        this._emitError(new Error('tus: unable to create upload because no endpoint is provided'));\n\n        return;\n      }\n\n      var req = this._openRequest('POST', this.options.endpoint);\n\n      if (this.options.uploadLengthDeferred) {\n        req.setHeader('Upload-Defer-Length', 1);\n      } else {\n        req.setHeader('Upload-Length', this._size);\n      } // Add metadata if values have been added\n\n\n      var metadata = encodeMetadata(this.options.metadata);\n\n      if (metadata !== '') {\n        req.setHeader('Upload-Metadata', metadata);\n      }\n\n      var promise;\n\n      if (this.options.uploadDataDuringCreation && !this.options.uploadLengthDeferred) {\n        this._offset = 0;\n        promise = this._addChunkToRequest(req);\n      } else {\n        promise = this._sendRequest(req, null);\n      }\n\n      promise.then(function (res) {\n        if (!inStatusCategory(res.getStatus(), 200)) {\n          _this6._emitHttpError(req, res, 'tus: unexpected response while creating upload');\n\n          return;\n        }\n\n        var location = res.getHeader('Location');\n\n        if (location == null) {\n          _this6._emitHttpError(req, res, 'tus: invalid or missing Location header');\n\n          return;\n        }\n\n        _this6.url = resolveUrl(_this6.options.endpoint, location);\n        log(\"Created upload at \".concat(_this6.url));\n\n        if (typeof _this6.options.onUploadUrlAvailable === 'function') {\n          _this6.options.onUploadUrlAvailable();\n        }\n\n        if (_this6._size === 0) {\n          // Nothing to upload and file was successfully created\n          _this6._emitSuccess();\n\n          _this6._source.close();\n\n          return;\n        }\n\n        _this6._saveUploadInUrlStorage().then(function () {\n          if (_this6.options.uploadDataDuringCreation) {\n            _this6._handleUploadResponse(req, res);\n          } else {\n            _this6._offset = 0;\n\n            _this6._performUpload();\n          }\n        });\n      })[\"catch\"](function (err) {\n        _this6._emitHttpError(req, null, 'tus: failed to create upload', err);\n      });\n    }\n    /*\n     * Try to resume an existing upload. First a HEAD request will be sent\n     * to retrieve the offset. If the request fails a new upload will be\n     * created. In the case of a successful response the file will be uploaded.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_resumeUpload\",\n    value: function _resumeUpload() {\n      var _this7 = this;\n\n      var req = this._openRequest('HEAD', this.url);\n\n      var promise = this._sendRequest(req, null);\n\n      promise.then(function (res) {\n        var status = res.getStatus();\n\n        if (!inStatusCategory(status, 200)) {\n          // If the upload is locked (indicated by the 423 Locked status code), we\n          // emit an error instead of directly starting a new upload. This way the\n          // retry logic can catch the error and will retry the upload. An upload\n          // is usually locked for a short period of time and will be available\n          // afterwards.\n          if (status === 423) {\n            _this7._emitHttpError(req, res, 'tus: upload is currently locked; retry later');\n\n            return;\n          }\n\n          if (inStatusCategory(status, 400)) {\n            // Remove stored fingerprint and corresponding endpoint,\n            // on client errors since the file can not be found\n            _this7._removeFromUrlStorage();\n          }\n\n          if (!_this7.options.endpoint) {\n            // Don't attempt to create a new upload if no endpoint is provided.\n            _this7._emitHttpError(req, res, 'tus: unable to resume upload (new upload cannot be created without an endpoint)');\n\n            return;\n          } // Try to create a new upload\n\n\n          _this7.url = null;\n\n          _this7._createUpload();\n\n          return;\n        }\n\n        var offset = parseInt(res.getHeader('Upload-Offset'), 10);\n\n        if (Number.isNaN(offset)) {\n          _this7._emitHttpError(req, res, 'tus: invalid or missing offset value');\n\n          return;\n        }\n\n        var length = parseInt(res.getHeader('Upload-Length'), 10);\n\n        if (Number.isNaN(length) && !_this7.options.uploadLengthDeferred) {\n          _this7._emitHttpError(req, res, 'tus: invalid or missing length value');\n\n          return;\n        }\n\n        if (typeof _this7.options.onUploadUrlAvailable === 'function') {\n          _this7.options.onUploadUrlAvailable();\n        }\n\n        _this7._saveUploadInUrlStorage().then(function () {\n          // Upload has already been completed and we do not need to send additional\n          // data to the server\n          if (offset === length) {\n            _this7._emitProgress(length, length);\n\n            _this7._emitSuccess();\n\n            return;\n          }\n\n          _this7._offset = offset;\n\n          _this7._performUpload();\n        });\n      })[\"catch\"](function (err) {\n        _this7._emitHttpError(req, null, 'tus: failed to resume upload', err);\n      });\n    }\n    /**\n     * Start uploading the file using PATCH requests. The file will be divided\n     * into chunks as specified in the chunkSize option. During the upload\n     * the onProgress event handler may be invoked multiple times.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_performUpload\",\n    value: function _performUpload() {\n      var _this8 = this;\n\n      // If the upload has been aborted, we will not send the next PATCH request.\n      // This is important if the abort method was called during a callback, such\n      // as onChunkComplete or onProgress.\n      if (this._aborted) {\n        return;\n      }\n\n      var req; // Some browser and servers may not support the PATCH method. For those\n      // cases, you can tell tus-js-client to use a POST request with the\n      // X-HTTP-Method-Override header for simulating a PATCH request.\n\n      if (this.options.overridePatchMethod) {\n        req = this._openRequest('POST', this.url);\n        req.setHeader('X-HTTP-Method-Override', 'PATCH');\n      } else {\n        req = this._openRequest('PATCH', this.url);\n      }\n\n      req.setHeader('Upload-Offset', this._offset);\n\n      var promise = this._addChunkToRequest(req);\n\n      promise.then(function (res) {\n        if (!inStatusCategory(res.getStatus(), 200)) {\n          _this8._emitHttpError(req, res, 'tus: unexpected response while uploading chunk');\n\n          return;\n        }\n\n        _this8._handleUploadResponse(req, res);\n      })[\"catch\"](function (err) {\n        // Don't emit an error if the upload was aborted manually\n        if (_this8._aborted) {\n          return;\n        }\n\n        _this8._emitHttpError(req, null, \"tus: failed to upload chunk at offset \".concat(_this8._offset), err);\n      });\n    }\n    /**\n     * _addChunktoRequest reads a chunk from the source and sends it using the\n     * supplied request object. It will not handle the response.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_addChunkToRequest\",\n    value: function _addChunkToRequest(req) {\n      var _this9 = this;\n\n      var start = this._offset;\n      var end = this._offset + this.options.chunkSize;\n      req.setProgressHandler(function (bytesSent) {\n        _this9._emitProgress(start + bytesSent, _this9._size);\n      });\n      req.setHeader('Content-Type', 'application/offset+octet-stream'); // The specified chunkSize may be Infinity or the calcluated end position\n      // may exceed the file's size. In both cases, we limit the end position to\n      // the input's total size for simpler calculations and correctness.\n\n      if ((end === Infinity || end > this._size) && !this.options.uploadLengthDeferred) {\n        end = this._size;\n      }\n\n      return this._source.slice(start, end).then(function (_ref2) {\n        var value = _ref2.value,\n            done = _ref2.done;\n\n        // If the upload length is deferred, the upload size was not specified during\n        // upload creation. So, if the file reader is done reading, we know the total\n        // upload size and can tell the tus server.\n        if (_this9.options.uploadLengthDeferred && done) {\n          _this9._size = _this9._offset + (value && value.size ? value.size : 0);\n          req.setHeader('Upload-Length', _this9._size);\n        }\n\n        if (value === null) {\n          return _this9._sendRequest(req);\n        }\n\n        _this9._emitProgress(_this9._offset, _this9._size);\n\n        return _this9._sendRequest(req, value);\n      });\n    }\n    /**\n     * _handleUploadResponse is used by requests that haven been sent using _addChunkToRequest\n     * and already have received a response.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_handleUploadResponse\",\n    value: function _handleUploadResponse(req, res) {\n      var offset = parseInt(res.getHeader('Upload-Offset'), 10);\n\n      if (Number.isNaN(offset)) {\n        this._emitHttpError(req, res, 'tus: invalid or missing offset value');\n\n        return;\n      }\n\n      this._emitProgress(offset, this._size);\n\n      this._emitChunkComplete(offset - this._offset, offset, this._size);\n\n      this._offset = offset;\n\n      if (offset === this._size) {\n        // Yay, finally done :)\n        this._emitSuccess();\n\n        this._source.close();\n\n        return;\n      }\n\n      this._performUpload();\n    }\n    /**\n     * Create a new HTTP request object with the given method and URL.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_openRequest\",\n    value: function _openRequest(method, url) {\n      var req = openRequest(method, url, this.options);\n      this._req = req;\n      return req;\n    }\n    /**\n     * Remove the entry in the URL storage, if it has been saved before.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_removeFromUrlStorage\",\n    value: function _removeFromUrlStorage() {\n      var _this10 = this;\n\n      if (!this._urlStorageKey) return;\n\n      this._urlStorage.removeUpload(this._urlStorageKey)[\"catch\"](function (err) {\n        _this10._emitError(err);\n      });\n\n      this._urlStorageKey = null;\n    }\n    /**\n     * Add the upload URL to the URL storage, if possible.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_saveUploadInUrlStorage\",\n    value: function _saveUploadInUrlStorage() {\n      var _this11 = this;\n\n      // We do not store the upload URL\n      // - if it was disabled in the option, or\n      // - if no fingerprint was calculated for the input (i.e. a stream), or\n      // - if the URL is already stored (i.e. key is set alread).\n      if (!this.options.storeFingerprintForResuming || !this._fingerprint || this._urlStorageKey !== null) {\n        return Promise.resolve();\n      }\n\n      var storedUpload = {\n        size: this._size,\n        metadata: this.options.metadata,\n        creationTime: new Date().toString()\n      };\n\n      if (this._parallelUploads) {\n        // Save multiple URLs if the parallelUploads option is used ...\n        storedUpload.parallelUploadUrls = this._parallelUploadUrls;\n      } else {\n        // ... otherwise we just save the one available URL.\n        storedUpload.uploadUrl = this.url;\n      }\n\n      return this._urlStorage.addUpload(this._fingerprint, storedUpload).then(function (urlStorageKey) {\n        _this11._urlStorageKey = urlStorageKey;\n      });\n    }\n    /**\n     * Send a request with the provided body.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_sendRequest\",\n    value: function _sendRequest(req) {\n      var body = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      return sendRequest(req, body, this.options);\n    }\n  }], [{\n    key: \"terminate\",\n    value: function terminate(url) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var req = openRequest('DELETE', url, options);\n      return sendRequest(req, null, options).then(function (res) {\n        // A 204 response indicates a successfull request\n        if (res.getStatus() === 204) {\n          return;\n        }\n\n        throw new DetailedError('tus: unexpected response while terminating upload', null, req, res);\n      })[\"catch\"](function (err) {\n        if (!(err instanceof DetailedError)) {\n          err = new DetailedError('tus: failed to terminate upload', err, req, null);\n        }\n\n        if (!shouldRetry(err, 0, options)) {\n          throw err;\n        } // Instead of keeping track of the retry attempts, we remove the first element from the delays\n        // array. If the array is empty, all retry attempts are used up and we will bubble up the error.\n        // We recursively call the terminate function will removing elements from the retryDelays array.\n\n\n        var delay = options.retryDelays[0];\n        var remainingDelays = options.retryDelays.slice(1);\n\n        var newOptions = _objectSpread(_objectSpread({}, options), {}, {\n          retryDelays: remainingDelays\n        });\n\n        return new Promise(function (resolve) {\n          return setTimeout(resolve, delay);\n        }).then(function () {\n          return BaseUpload.terminate(url, newOptions);\n        });\n      });\n    }\n  }]);\n\n  return BaseUpload;\n}();\n\nfunction encodeMetadata(metadata) {\n  return Object.entries(metadata).map(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        key = _ref4[0],\n        value = _ref4[1];\n\n    return \"\".concat(key, \" \").concat(Base64.encode(String(value)));\n  }).join(',');\n}\n/**\n * Checks whether a given status is in the range of the expected category.\n * For example, only a status between 200 and 299 will satisfy the category 200.\n *\n * @api private\n */\n\n\nfunction inStatusCategory(status, category) {\n  return status >= category && status < category + 100;\n}\n/**\n * Create a new HTTP request with the specified method and URL.\n * The necessary headers that are included in every request\n * will be added, including the request ID.\n *\n * @api private\n */\n\n\nfunction openRequest(method, url, options) {\n  var req = options.httpStack.createRequest(method, url);\n  req.setHeader('Tus-Resumable', '1.0.0');\n  var headers = options.headers || {};\n  Object.entries(headers).forEach(function (_ref5) {\n    var _ref6 = _slicedToArray(_ref5, 2),\n        name = _ref6[0],\n        value = _ref6[1];\n\n    req.setHeader(name, value);\n  });\n\n  if (options.addRequestId) {\n    var requestId = uuid();\n    req.setHeader('X-Request-ID', requestId);\n  }\n\n  return req;\n}\n/**\n * Send a request with the provided body while invoking the onBeforeRequest\n * and onAfterResponse callbacks.\n *\n * @api private\n */\n\n\nfunction sendRequest(req, body, options) {\n  var onBeforeRequestPromise = typeof options.onBeforeRequest === 'function' ? Promise.resolve(options.onBeforeRequest(req)) : Promise.resolve();\n  return onBeforeRequestPromise.then(function () {\n    return req.send(body).then(function (res) {\n      var onAfterResponsePromise = typeof options.onAfterResponse === 'function' ? Promise.resolve(options.onAfterResponse(req, res)) : Promise.resolve();\n      return onAfterResponsePromise.then(function () {\n        return res;\n      });\n    });\n  });\n}\n/**\n * Checks whether the browser running this code has internet access.\n * This function will always return true in the node.js environment\n *\n * @api private\n */\n\n\nfunction isOnline() {\n  var online = true;\n\n  if (typeof window !== 'undefined' && 'navigator' in window // eslint-disable-line no-undef\n  && window.navigator.onLine === false) {\n    // eslint-disable-line no-undef\n    online = false;\n  }\n\n  return online;\n}\n/**\n * Checks whether or not it is ok to retry a request.\n * @param {Error} err the error returned from the last request\n * @param {number} retryAttempt the number of times the request has already been retried\n * @param {object} options tus Upload options\n *\n * @api private\n */\n\n\nfunction shouldRetry(err, retryAttempt, options) {\n  // We only attempt a retry if\n  // - retryDelays option is set\n  // - we didn't exceed the maxium number of retries, yet, and\n  // - this error was caused by a request or it's response and\n  // - the error is server error (i.e. not a status 4xx except a 409 or 423) or\n  // a onShouldRetry is specified and returns true\n  // - the browser does not indicate that we are offline\n  if (options.retryDelays == null || retryAttempt >= options.retryDelays.length || err.originalRequest == null) {\n    return false;\n  }\n\n  if (options && typeof options.onShouldRetry === 'function') {\n    return options.onShouldRetry(err, retryAttempt, options);\n  }\n\n  var status = err.originalResponse ? err.originalResponse.getStatus() : 0;\n  return (!inStatusCategory(status, 400) || status === 409 || status === 423) && isOnline();\n}\n/**\n * Resolve a relative link given the origin as source. For example,\n * if a HTTP request to http://example.com/files/ returns a Location\n * header with the value /upload/abc, the resolved URL will be:\n * http://example.com/upload/abc\n */\n\n\nfunction resolveUrl(origin, link) {\n  return new URL(link, origin).toString();\n}\n/**\n * Calculate the start and end positions for the parts if an upload\n * is split into multiple parallel requests.\n *\n * @param {number} totalSize The byte size of the upload, which will be split.\n * @param {number} partCount The number in how many parts the upload will be split.\n * @return {object[]}\n * @api private\n */\n\n\nfunction splitSizeIntoParts(totalSize, partCount) {\n  var partSize = Math.floor(totalSize / partCount);\n  var parts = [];\n\n  for (var i = 0; i < partCount; i++) {\n    parts.push({\n      start: partSize * i,\n      end: partSize * (i + 1)\n    });\n  }\n\n  parts[partCount - 1].end = totalSize;\n  return parts;\n}\n\nBaseUpload.defaultOptions = defaultOptions;\nexport default BaseUpload;", "function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct.bind(); } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar DetailedError = /*#__PURE__*/function (_Error) {\n  _inherits(DetailedError, _Error);\n\n  var _super = _createSuper(DetailedError);\n\n  function DetailedError(message) {\n    var _this;\n\n    var causingErr = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var req = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var res = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n    _classCallCheck(this, DetailedError);\n\n    _this = _super.call(this, message);\n    _this.originalRequest = req;\n    _this.originalResponse = res;\n    _this.causingError = causingErr;\n\n    if (causingErr != null) {\n      message += \", caused by \".concat(causingErr.toString());\n    }\n\n    if (req != null) {\n      var requestId = req.getHeader('X-Request-ID') || 'n/a';\n      var method = req.getMethod();\n      var url = req.getURL();\n      var status = res ? res.getStatus() : 'n/a';\n      var body = res ? res.getBody() || '' : 'n/a';\n      message += \", originated from request (method: \".concat(method, \", url: \").concat(url, \", response code: \").concat(status, \", response text: \").concat(body, \", request id: \").concat(requestId, \")\");\n    }\n\n    _this.message = message;\n    return _this;\n  }\n\n  return _createClass(DetailedError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nexport default DetailedError;", "/* eslint no-console: \"off\" */\nvar isEnabled = false;\nexport function enableDebugLog() {\n  isEnabled = true;\n}\nexport function log(msg) {\n  if (!isEnabled) return;\n  console.log(msg);\n}", "/**\n * Generate a UUID v4 based on random numbers. We intentioanlly use the less\n * secure Math.random function here since the more secure crypto.getRandomNumbers\n * is not available on all platforms.\n * This is not a problem for us since we use the UUID only for generating a\n * request ID, so we can correlate server logs to client errors.\n *\n * This function is taken from following site:\n * https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n *\n * @return {string} The generate UUID\n */\nexport default function uuid() {\n  /* eslint-disable no-bitwise */\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0;\n    var v = c === 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}", "function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n/* eslint no-unused-vars: \"off\" */\nvar NoopUrlStorage = /*#__PURE__*/function () {\n  function NoopUrlStorage() {\n    _classCallCheck(this, NoopUrlStorage);\n  }\n\n  _createClass(NoopUrlStorage, [{\n    key: \"listAllUploads\",\n    value: function listAllUploads() {\n      return Promise.resolve([]);\n    }\n  }, {\n    key: \"findUploadsByFingerprint\",\n    value: function findUploadsByFingerprint(fingerprint) {\n      return Promise.resolve([]);\n    }\n  }, {\n    key: \"removeUpload\",\n    value: function removeUpload(urlStorageKey) {\n      return Promise.resolve();\n    }\n  }, {\n    key: \"addUpload\",\n    value: function addUpload(fingerprint, upload) {\n      return Promise.resolve(null);\n    }\n  }]);\n\n  return NoopUrlStorage;\n}();\n\nexport { NoopUrlStorage as default };", "function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nvar hasStorage = false;\n\ntry {\n  hasStorage = 'localStorage' in window; // Attempt to store and read entries from the local storage to detect Private\n  // Mode on Safari on iOS (see #49)\n  // If the key was not used before, we remove it from local storage again to\n  // not cause confusion where the entry came from.\n\n  var key = 'tusSupport';\n  var originalValue = localStorage.getItem(key);\n  localStorage.setItem(key, originalValue);\n  if (originalValue === null) localStorage.removeItem(key);\n} catch (e) {\n  // If we try to access localStorage inside a sandboxed iframe, a SecurityError\n  // is thrown. When in private mode on iOS Safari, a QuotaExceededError is\n  // thrown (see #49)\n  if (e.code === e.SECURITY_ERR || e.code === e.QUOTA_EXCEEDED_ERR) {\n    hasStorage = false;\n  } else {\n    throw e;\n  }\n}\n\nexport var canStoreURLs = hasStorage;\nexport var WebStorageUrlStorage = /*#__PURE__*/function () {\n  function WebStorageUrlStorage() {\n    _classCallCheck(this, WebStorageUrlStorage);\n  }\n\n  _createClass(WebStorageUrlStorage, [{\n    key: \"findAllUploads\",\n    value: function findAllUploads() {\n      var results = this._findEntries('tus::');\n\n      return Promise.resolve(results);\n    }\n  }, {\n    key: \"findUploadsByFingerprint\",\n    value: function findUploadsByFingerprint(fingerprint) {\n      var results = this._findEntries(\"tus::\".concat(fingerprint, \"::\"));\n\n      return Promise.resolve(results);\n    }\n  }, {\n    key: \"removeUpload\",\n    value: function removeUpload(urlStorageKey) {\n      localStorage.removeItem(urlStorageKey);\n      return Promise.resolve();\n    }\n  }, {\n    key: \"addUpload\",\n    value: function addUpload(fingerprint, upload) {\n      var id = Math.round(Math.random() * 1e12);\n      var key = \"tus::\".concat(fingerprint, \"::\").concat(id);\n      localStorage.setItem(key, JSON.stringify(upload));\n      return Promise.resolve(key);\n    }\n  }, {\n    key: \"_findEntries\",\n    value: function _findEntries(prefix) {\n      var results = [];\n\n      for (var i = 0; i < localStorage.length; i++) {\n        var _key = localStorage.key(i);\n\n        if (_key.indexOf(prefix) !== 0) continue;\n\n        try {\n          var upload = JSON.parse(localStorage.getItem(_key));\n          upload.urlStorageKey = _key;\n          results.push(upload);\n        } catch (e) {// The JSON parse error is intentionally ignored here, so a malformed\n          // entry in the storage cannot prevent an upload.\n        }\n      }\n\n      return results;\n    }\n  }]);\n\n  return WebStorageUrlStorage;\n}();", "function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n/* eslint-disable max-classes-per-file */\nvar XHRHttpStack = /*#__PURE__*/function () {\n  function XHRHttpStack() {\n    _classCallCheck(this, XHRHttpStack);\n  }\n\n  _createClass(XHRHttpStack, [{\n    key: \"createRequest\",\n    value: function createRequest(method, url) {\n      return new Request(method, url);\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      return 'XHRHttpStack';\n    }\n  }]);\n\n  return XHRHttpStack;\n}();\n\nexport { XHRHttpStack as default };\n\nvar Request = /*#__PURE__*/function () {\n  function Request(method, url) {\n    _classCallCheck(this, Request);\n\n    this._xhr = new XMLHttpRequest();\n\n    this._xhr.open(method, url, true);\n\n    this._method = method;\n    this._url = url;\n    this._headers = {};\n  }\n\n  _createClass(Request, [{\n    key: \"getMethod\",\n    value: function getMethod() {\n      return this._method;\n    }\n  }, {\n    key: \"getURL\",\n    value: function getURL() {\n      return this._url;\n    }\n  }, {\n    key: \"setHeader\",\n    value: function setHeader(header, value) {\n      this._xhr.setRequestHeader(header, value);\n\n      this._headers[header] = value;\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader(header) {\n      return this._headers[header];\n    }\n  }, {\n    key: \"setProgressHandler\",\n    value: function setProgressHandler(progressHandler) {\n      // Test support for progress events before attaching an event listener\n      if (!('upload' in this._xhr)) {\n        return;\n      }\n\n      this._xhr.upload.onprogress = function (e) {\n        if (!e.lengthComputable) {\n          return;\n        }\n\n        progressHandler(e.loaded);\n      };\n    }\n  }, {\n    key: \"send\",\n    value: function send() {\n      var _this = this;\n\n      var body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      return new Promise(function (resolve, reject) {\n        _this._xhr.onload = function () {\n          resolve(new Response(_this._xhr));\n        };\n\n        _this._xhr.onerror = function (err) {\n          reject(err);\n        };\n\n        _this._xhr.send(body);\n      });\n    }\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      this._xhr.abort();\n\n      return Promise.resolve();\n    }\n  }, {\n    key: \"getUnderlyingObject\",\n    value: function getUnderlyingObject() {\n      return this._xhr;\n    }\n  }]);\n\n  return Request;\n}();\n\nvar Response = /*#__PURE__*/function () {\n  function Response(xhr) {\n    _classCallCheck(this, Response);\n\n    this._xhr = xhr;\n  }\n\n  _createClass(Response, [{\n    key: \"getStatus\",\n    value: function getStatus() {\n      return this._xhr.status;\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader(header) {\n      return this._xhr.getResponseHeader(header);\n    }\n  }, {\n    key: \"getBody\",\n    value: function getBody() {\n      return this._xhr.responseText;\n    }\n  }, {\n    key: \"getUnderlyingObject\",\n    value: function getUnderlyingObject() {\n      return this._xhr;\n    }\n  }]);\n\n  return Response;\n}();", "var isReactNative = function isReactNative() {\n  return typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative';\n};\n\nexport default isReactNative;", "/**\n * uriToBlob resolves a URI to a Blob object. This is used for\n * React Native to retrieve a file (identified by a file://\n * URI) as a blob.\n */\nexport default function uriToBlob(uri) {\n  return new Promise(function (resolve, reject) {\n    var xhr = new XMLHttpRequest();\n    xhr.responseType = 'blob';\n\n    xhr.onload = function () {\n      var blob = xhr.response;\n      resolve(blob);\n    };\n\n    xhr.onerror = function (err) {\n      reject(err);\n    };\n\n    xhr.open('GET', uri);\n    xhr.send();\n  });\n}", "var isCordova = function isCordova() {\n  return typeof window !== 'undefined' && (typeof window.PhoneGap !== 'undefined' || typeof window.Cordova !== 'undefined' || typeof window.cordova !== 'undefined');\n};\n\nexport default isCordova;", "/**\n * readAsByteArray converts a File object to a Uint8Array.\n * This function is only used on the Apache Cordova platform.\n * See https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-file/index.html#read-a-file\n */\nexport default function readAsByteArray(chunk) {\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader();\n\n    reader.onload = function () {\n      var value = new Uint8Array(reader.result);\n      resolve({\n        value: value\n      });\n    };\n\n    reader.onerror = function (err) {\n      reject(err);\n    };\n\n    reader.readAsArrayBuffer(chunk);\n  });\n}", "function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport isCordova from './isCordova.js';\nimport readAsByteArray from './readAsByteArray.js';\n\nvar FileSource = /*#__PURE__*/function () {\n  // Make this.size a method\n  function FileSource(file) {\n    _classCallCheck(this, FileSource);\n\n    this._file = file;\n    this.size = file.size;\n  }\n\n  _createClass(FileSource, [{\n    key: \"slice\",\n    value: function slice(start, end) {\n      // In Apache Cordova applications, a File must be resolved using\n      // FileReader instances, see\n      // https://cordova.apache.org/docs/en/8.x/reference/cordova-plugin-file/index.html#read-a-file\n      if (isCordova()) {\n        return readAsByteArray(this._file.slice(start, end));\n      }\n\n      var value = this._file.slice(start, end);\n\n      return Promise.resolve({\n        value: value\n      });\n    }\n  }, {\n    key: \"close\",\n    value: function close() {// Nothing to do here since we don't need to release any resources.\n    }\n  }]);\n\n  return FileSource;\n}();\n\nexport { FileSource as default };", "function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction len(blobOrArray) {\n  if (blobOrArray === undefined) return 0;\n  if (blobOrArray.size !== undefined) return blobOrArray.size;\n  return blobOrArray.length;\n}\n/*\n  Typed arrays and blobs don't have a concat method.\n  This function helps StreamSource accumulate data to reach chunkSize.\n*/\n\n\nfunction concat(a, b) {\n  if (a.concat) {\n    // Is `a` an Array?\n    return a.concat(b);\n  }\n\n  if (a instanceof Blob) {\n    return new Blob([a, b], {\n      type: a.type\n    });\n  }\n\n  if (a.set) {\n    // Is `a` a typed array?\n    var c = new a.constructor(a.length + b.length);\n    c.set(a);\n    c.set(b, a.length);\n    return c;\n  }\n\n  throw new Error('Unknown data type');\n}\n\nvar StreamSource = /*#__PURE__*/function () {\n  function StreamSource(reader) {\n    _classCallCheck(this, StreamSource);\n\n    this._buffer = undefined;\n    this._bufferOffset = 0;\n    this._reader = reader;\n    this._done = false;\n  }\n\n  _createClass(StreamSource, [{\n    key: \"slice\",\n    value: function slice(start, end) {\n      if (start < this._bufferOffset) {\n        return Promise.reject(new Error(\"Requested data is before the reader's current offset\"));\n      }\n\n      return this._readUntilEnoughDataOrDone(start, end);\n    }\n  }, {\n    key: \"_readUntilEnoughDataOrDone\",\n    value: function _readUntilEnoughDataOrDone(start, end) {\n      var _this = this;\n\n      var hasEnoughData = end <= this._bufferOffset + len(this._buffer);\n\n      if (this._done || hasEnoughData) {\n        var value = this._getDataFromBuffer(start, end);\n\n        var done = value == null ? this._done : false;\n        return Promise.resolve({\n          value: value,\n          done: done\n        });\n      }\n\n      return this._reader.read().then(function (_ref) {\n        var value = _ref.value,\n            done = _ref.done;\n\n        if (done) {\n          _this._done = true;\n        } else if (_this._buffer === undefined) {\n          _this._buffer = value;\n        } else {\n          _this._buffer = concat(_this._buffer, value);\n        }\n\n        return _this._readUntilEnoughDataOrDone(start, end);\n      });\n    }\n  }, {\n    key: \"_getDataFromBuffer\",\n    value: function _getDataFromBuffer(start, end) {\n      // Remove data from buffer before `start`.\n      // Data might be reread from the buffer if an upload fails, so we can only\n      // safely delete data when it comes *before* what is currently being read.\n      if (start > this._bufferOffset) {\n        this._buffer = this._buffer.slice(start - this._bufferOffset);\n        this._bufferOffset = start;\n      } // If the buffer is empty after removing old data, all data has been read.\n\n\n      var hasAllDataBeenRead = len(this._buffer) === 0;\n\n      if (this._done && hasAllDataBeenRead) {\n        return null;\n      } // We already removed data before `start`, so we just return the first\n      // chunk from the buffer.\n\n\n      return this._buffer.slice(0, end - start);\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      if (this._reader.cancel) {\n        this._reader.cancel();\n      }\n    }\n  }]);\n\n  return StreamSource;\n}();\n\nexport { StreamSource as default };", "function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport isReactNative from './isReactNative.js';\nimport uriToBlob from './uriToBlob.js';\nimport FileSource from './sources/FileSource.js';\nimport StreamSource from './sources/StreamSource.js';\n\nvar FileReader = /*#__PURE__*/function () {\n  function FileReader() {\n    _classCallCheck(this, FileReader);\n  }\n\n  _createClass(FileReader, [{\n    key: \"openFile\",\n    value: function openFile(input, chunkSize) {\n      // In React Native, when user selects a file, instead of a File or Blob,\n      // you usually get a file object {} with a uri property that contains\n      // a local path to the file. We use XMLHttpRequest to fetch\n      // the file blob, before uploading with tus.\n      if (isReactNative() && input && typeof input.uri !== 'undefined') {\n        return uriToBlob(input.uri).then(function (blob) {\n          return new FileSource(blob);\n        })[\"catch\"](function (err) {\n          throw new Error(\"tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. \".concat(err));\n        });\n      } // Since we emulate the Blob type in our tests (not all target browsers\n      // support it), we cannot use `instanceof` for testing whether the input value\n      // can be handled. Instead, we simply check is the slice() function and the\n      // size property are available.\n\n\n      if (typeof input.slice === 'function' && typeof input.size !== 'undefined') {\n        return Promise.resolve(new FileSource(input));\n      }\n\n      if (typeof input.read === 'function') {\n        chunkSize = Number(chunkSize);\n\n        if (!Number.isFinite(chunkSize)) {\n          return Promise.reject(new Error('cannot create source for stream without a finite value for the `chunkSize` option'));\n        }\n\n        return Promise.resolve(new StreamSource(input, chunkSize));\n      }\n\n      return Promise.reject(new Error('source object may only be an instance of File, Blob, or Reader in this environment'));\n    }\n  }]);\n\n  return FileReader;\n}();\n\nexport { FileReader as default };", "import isReactNative from './isReactNative.js'; // TODO: Differenciate between input types\n\n/**\n * Generate a fingerprint for a file which will be used the store the endpoint\n *\n * @param {File} file\n * @param {Object} options\n * @param {Function} callback\n */\n\nexport default function fingerprint(file, options) {\n  if (isReactNative()) {\n    return Promise.resolve(reactNativeFingerprint(file, options));\n  }\n\n  return Promise.resolve(['tus-br', file.name, file.type, file.size, file.lastModified, options.endpoint].join('-'));\n}\n\nfunction reactNativeFingerprint(file, options) {\n  var exifHash = file.exif ? hashCode(JSON.stringify(file.exif)) : 'noexif';\n  return ['tus-rn', file.name || 'noname', file.size || 'nosize', exifHash, options.endpoint].join('/');\n}\n\nfunction hashCode(str) {\n  /* eslint-disable no-bitwise */\n  // from https://stackoverflow.com/a/8831937/151666\n  var hash = 0;\n\n  if (str.length === 0) {\n    return hash;\n  }\n\n  for (var i = 0; i < str.length; i++) {\n    var _char = str.charCodeAt(i);\n\n    hash = (hash << 5) - hash + _char;\n    hash &= hash; // Convert to 32bit integer\n  }\n\n  return hash;\n}", "function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport BaseUpload from '../upload.js';\nimport NoopUrlStorage from '../noopUrlStorage.js';\nimport { enableDebugLog } from '../logger.js';\nimport DetailedError from '../error.js';\nimport { canStoreURLs, WebStorageUrlStorage } from './urlStorage.js';\nimport DefaultHttpStack from './httpStack.js';\nimport FileReader from './fileReader.js';\nimport fingerprint from './fileSignature.js';\n\nvar defaultOptions = _objectSpread(_objectSpread({}, BaseUpload.defaultOptions), {}, {\n  httpStack: new DefaultHttpStack(),\n  fileReader: new FileReader(),\n  urlStorage: canStoreURLs ? new WebStorageUrlStorage() : new NoopUrlStorage(),\n  fingerprint: fingerprint\n});\n\nvar Upload = /*#__PURE__*/function (_BaseUpload) {\n  _inherits(Upload, _BaseUpload);\n\n  var _super = _createSuper(Upload);\n\n  function Upload() {\n    var file = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Upload);\n\n    options = _objectSpread(_objectSpread({}, defaultOptions), options);\n    return _super.call(this, file, options);\n  }\n\n  _createClass(Upload, null, [{\n    key: \"terminate\",\n    value: function terminate(url) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      options = _objectSpread(_objectSpread({}, defaultOptions), options);\n      return BaseUpload.terminate(url, options);\n    }\n  }]);\n\n  return Upload;\n}(BaseUpload);\n\nvar _window = window,\n    XMLHttpRequest = _window.XMLHttpRequest,\n    Blob = _window.Blob;\nvar isSupported = XMLHttpRequest && Blob && typeof Blob.prototype.slice === 'function';\nexport { Upload, canStoreURLs, defaultOptions, isSupported, enableDebugLog, DefaultHttpStack, DetailedError };", "class NetworkError extends Error {\n  constructor(error, xhr) {\n    if (xhr === void 0) {\n      xhr = null;\n    }\n    super(`This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.`);\n    this.cause = error;\n    this.isNetworkError = true;\n    this.request = xhr;\n  }\n}\nexport default NetworkError;", "import NetworkError from './NetworkError.js';\n\n/**\n * Wrapper around window.fetch that throws a NetworkError when appropriate\n */\nexport default function fetchWithNetworkError() {\n  return fetch(...arguments).catch(err => {\n    if (err.name === 'AbortError') {\n      throw err;\n    } else {\n      throw new NetworkError(err);\n    }\n  });\n}", "import hasProperty from './hasProperty.js';\nclass ErrorWithCause extends Error {\n  constructor(message, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    super(message);\n    this.cause = options.cause;\n    if (this.cause && hasProperty(this.cause, 'isNetworkError')) {\n      this.isNetworkError = this.cause.isNetworkError;\n    }\n  }\n}\nexport default ErrorWithCause;", "'use strict';\n\nclass AuthError extends Error {\n  constructor() {\n    super('Authorization required');\n    this.name = 'AuthError';\n    this.isAuthError = true;\n  }\n}\nexport default AuthError;", "'use strict';\n\nlet _Symbol$for;\nfunction _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\nvar id = 0;\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\nimport fetchWithNetworkError from '@uppy/utils/lib/fetchWithNetworkError';\nimport ErrorWithCause from '@uppy/utils/lib/ErrorWithCause';\nimport AuthError from './AuthError.js';\nconst packageJson = {\n  \"version\": \"3.2.0\"\n}; // Remove the trailing slash so we can always safely append /xyz.\nfunction stripSlash(url) {\n  return url.replace(/\\/$/, '');\n}\nasync function handleJSONResponse(res) {\n  if (res.status === 401) {\n    throw new AuthError();\n  }\n  const jsonPromise = res.json();\n  if (res.ok) {\n    return jsonPromise;\n  }\n  let errMsg = `Failed request with status: ${res.status}. ${res.statusText}`;\n  try {\n    const errData = await jsonPromise;\n    errMsg = errData.message ? `${errMsg} message: ${errData.message}` : errMsg;\n    errMsg = errData.requestId ? `${errMsg} request-Id: ${errData.requestId}` : errMsg;\n  } catch {/* if the response contains invalid JSON, let's ignore the error */}\n  throw new Error(errMsg);\n}\n\n// todo pull out into core instead?\nconst allowedHeadersCache = new Map();\nvar _companionHeaders = /*#__PURE__*/_classPrivateFieldLooseKey(\"companionHeaders\");\nvar _getUrl = /*#__PURE__*/_classPrivateFieldLooseKey(\"getUrl\");\n_Symbol$for = Symbol.for('uppy test: getCompanionHeaders');\nexport default class RequestClient {\n  constructor(uppy, opts) {\n    Object.defineProperty(this, _getUrl, {\n      value: _getUrl2\n    });\n    Object.defineProperty(this, _companionHeaders, {\n      writable: true,\n      value: void 0\n    });\n    this.uppy = uppy;\n    this.opts = opts;\n    this.onReceiveResponse = this.onReceiveResponse.bind(this);\n    _classPrivateFieldLooseBase(this, _companionHeaders)[_companionHeaders] = opts == null ? void 0 : opts.companionHeaders;\n  }\n  setCompanionHeaders(headers) {\n    _classPrivateFieldLooseBase(this, _companionHeaders)[_companionHeaders] = headers;\n  }\n  [_Symbol$for]() {\n    return _classPrivateFieldLooseBase(this, _companionHeaders)[_companionHeaders];\n  }\n  get hostname() {\n    const {\n      companion\n    } = this.uppy.getState();\n    const host = this.opts.companionUrl;\n    return stripSlash(companion && companion[host] ? companion[host] : host);\n  }\n  async headers() {\n    const defaultHeaders = {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      'Uppy-Versions': `@uppy/companion-client=${RequestClient.VERSION}`\n    };\n    return {\n      ...defaultHeaders,\n      ..._classPrivateFieldLooseBase(this, _companionHeaders)[_companionHeaders]\n    };\n  }\n  onReceiveResponse(_ref) {\n    let {\n      headers\n    } = _ref;\n    const state = this.uppy.getState();\n    const companion = state.companion || {};\n    const host = this.opts.companionUrl;\n\n    // Store the self-identified domain name for the Companion instance we just hit.\n    if (headers.has('i-am') && headers.get('i-am') !== companion[host]) {\n      this.uppy.setState({\n        companion: {\n          ...companion,\n          [host]: headers.get('i-am')\n        }\n      });\n    }\n  }\n  /*\n    Preflight was added to avoid breaking change between older Companion-client versions and\n    newer Companion versions and vice-versa. Usually the break will manifest via CORS errors because a\n    version of companion-client could be sending certain headers to a version of Companion server that\n    does not support those headers. In which case, the default preflight would lead to CORS.\n    So to avoid those errors, we do preflight ourselves, to see what headers the Companion server\n    we are communicating with allows. And based on that, companion-client knows what headers to\n    send and what headers to not send.\n     The preflight only happens once throughout the life-cycle of a certain\n    Companion-client <-> Companion-server pair (allowedHeadersCache).\n    Subsequent requests use the cached result of the preflight.\n    However if there is an error retrieving the allowed headers, we will try again next time\n  */\n  async preflight(path) {\n    const allowedHeadersCached = allowedHeadersCache.get(this.hostname);\n    if (allowedHeadersCached != null) return allowedHeadersCached;\n    const fallbackAllowedHeaders = ['accept', 'content-type', 'uppy-auth-token'];\n    const promise = (async () => {\n      try {\n        const response = await fetch(_classPrivateFieldLooseBase(this, _getUrl)[_getUrl](path), {\n          method: 'OPTIONS'\n        });\n        const header = response.headers.get('access-control-allow-headers');\n        if (header == null || header === '*') {\n          allowedHeadersCache.set(this.hostname, fallbackAllowedHeaders);\n          return fallbackAllowedHeaders;\n        }\n        this.uppy.log(`[CompanionClient] adding allowed preflight headers to companion cache: ${this.hostname} ${header}`);\n        const allowedHeaders = header.split(',').map(headerName => headerName.trim().toLowerCase());\n        allowedHeadersCache.set(this.hostname, allowedHeaders);\n        return allowedHeaders;\n      } catch (err) {\n        this.uppy.log(`[CompanionClient] unable to make preflight request ${err}`, 'warning');\n        // If the user gets a network error or similar, we should try preflight\n        // again next time, or else we might get incorrect behaviour.\n        allowedHeadersCache.delete(this.hostname); // re-fetch next time\n        return fallbackAllowedHeaders;\n      }\n    })();\n    allowedHeadersCache.set(this.hostname, promise);\n    return promise;\n  }\n  async preflightAndHeaders(path) {\n    const [allowedHeaders, headers] = await Promise.all([this.preflight(path), this.headers()]);\n    // filter to keep only allowed Headers\n    return Object.fromEntries(Object.entries(headers).filter(_ref2 => {\n      let [header] = _ref2;\n      if (!allowedHeaders.includes(header.toLowerCase())) {\n        this.uppy.log(`[CompanionClient] excluding disallowed header ${header}`);\n        return false;\n      }\n      return true;\n    }));\n  }\n\n  /** @protected */\n  async request(_ref3) {\n    let {\n      path,\n      method = 'GET',\n      data,\n      skipPostResponse,\n      signal\n    } = _ref3;\n    try {\n      const headers = await this.preflightAndHeaders(path);\n      const response = await fetchWithNetworkError(_classPrivateFieldLooseBase(this, _getUrl)[_getUrl](path), {\n        method,\n        signal,\n        headers,\n        credentials: this.opts.companionCookiesRule || 'same-origin',\n        body: data ? JSON.stringify(data) : null\n      });\n      if (!skipPostResponse) this.onReceiveResponse(response);\n      return handleJSONResponse(response);\n    } catch (err) {\n      if (err != null && err.isAuthError) throw err;\n      throw new ErrorWithCause(`Could not ${method} ${_classPrivateFieldLooseBase(this, _getUrl)[_getUrl](path)}`, {\n        cause: err\n      });\n    }\n  }\n  async get(path, options) {\n    if (options === void 0) {\n      options = undefined;\n    }\n    // TODO: remove boolean support for options that was added for backward compatibility.\n    // eslint-disable-next-line no-param-reassign\n    if (typeof options === 'boolean') options = {\n      skipPostResponse: options\n    };\n    return this.request({\n      ...options,\n      path\n    });\n  }\n  async post(path, data, options) {\n    if (options === void 0) {\n      options = undefined;\n    }\n    // TODO: remove boolean support for options that was added for backward compatibility.\n    // eslint-disable-next-line no-param-reassign\n    if (typeof options === 'boolean') options = {\n      skipPostResponse: options\n    };\n    return this.request({\n      ...options,\n      path,\n      method: 'POST',\n      data\n    });\n  }\n  async delete(path, data, options) {\n    if (data === void 0) {\n      data = undefined;\n    }\n    // TODO: remove boolean support for options that was added for backward compatibility.\n    // eslint-disable-next-line no-param-reassign\n    if (typeof options === 'boolean') options = {\n      skipPostResponse: options\n    };\n    return this.request({\n      ...options,\n      path,\n      method: 'DELETE',\n      data\n    });\n  }\n}\nfunction _getUrl2(url) {\n  if (/^(https?:|)\\/\\//.test(url)) {\n    return url;\n  }\n  return `${this.hostname}/${url}`;\n}\nRequestClient.VERSION = packageJson.version;", "'use strict';\n\n/**\n * This module serves as an Async wrapper for LocalStorage\n */\nexport function setItem(key, value) {\n  return new Promise(resolve => {\n    localStorage.setItem(key, value);\n    resolve();\n  });\n}\nexport function getItem(key) {\n  return Promise.resolve(localStorage.getItem(key));\n}\nexport function removeItem(key) {\n  return new Promise(resolve => {\n    localStorage.removeItem(key);\n    resolve();\n  });\n}", "'use strict';\n\nfunction _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\nvar id = 0;\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\nimport RequestClient from './RequestClient.js';\nimport * as tokenStorage from './tokenStorage.js';\nconst getName = id => {\n  return id.split('-').map(s => s.charAt(0).toUpperCase() + s.slice(1)).join(' ');\n};\nvar _refreshingTokenPromise = /*#__PURE__*/_classPrivateFieldLooseKey(\"refreshingTokenPromise\");\nvar _getAuthToken = /*#__PURE__*/_classPrivateFieldLooseKey(\"getAuthToken\");\nvar _removeAuthToken = /*#__PURE__*/_classPrivateFieldLooseKey(\"removeAuthToken\");\nexport default class Provider extends RequestClient {\n  constructor(uppy, opts) {\n    super(uppy, opts);\n    Object.defineProperty(this, _removeAuthToken, {\n      value: _removeAuthToken2\n    });\n    Object.defineProperty(this, _getAuthToken, {\n      value: _getAuthToken2\n    });\n    Object.defineProperty(this, _refreshingTokenPromise, {\n      writable: true,\n      value: void 0\n    });\n    this.provider = opts.provider;\n    this.id = this.provider;\n    this.name = this.opts.name || getName(this.id);\n    this.pluginId = this.opts.pluginId;\n    this.tokenKey = `companion-${this.pluginId}-auth-token`;\n    this.companionKeysParams = this.opts.companionKeysParams;\n    this.preAuthToken = null;\n  }\n  async headers() {\n    const [headers, token] = await Promise.all([super.headers(), _classPrivateFieldLooseBase(this, _getAuthToken)[_getAuthToken]()]);\n    const authHeaders = {};\n    if (token) {\n      authHeaders['uppy-auth-token'] = token;\n    }\n    if (this.companionKeysParams) {\n      authHeaders['uppy-credentials-params'] = btoa(JSON.stringify({\n        params: this.companionKeysParams\n      }));\n    }\n    return {\n      ...headers,\n      ...authHeaders\n    };\n  }\n  onReceiveResponse(response) {\n    super.onReceiveResponse(response);\n    const plugin = this.uppy.getPlugin(this.pluginId);\n    const oldAuthenticated = plugin.getPluginState().authenticated;\n    const authenticated = oldAuthenticated ? response.status !== 401 : response.status < 400;\n    plugin.setPluginState({\n      authenticated\n    });\n    return response;\n  }\n  async setAuthToken(token) {\n    return this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey, token);\n  }\n  /**\n   * Ensure we have a preauth token if necessary. Attempts to fetch one if we don't,\n   * or rejects if loading one fails.\n   */\n  async ensurePreAuth() {\n    if (this.companionKeysParams && !this.preAuthToken) {\n      await this.fetchPreAuthToken();\n      if (!this.preAuthToken) {\n        throw new Error('Could not load authentication data required for third-party login. Please try again later.');\n      }\n    }\n  }\n  authUrl(queries) {\n    if (queries === void 0) {\n      queries = {};\n    }\n    const params = new URLSearchParams(queries);\n    if (this.preAuthToken) {\n      params.set('uppyPreAuthToken', this.preAuthToken);\n    }\n    return `${this.hostname}/${this.id}/connect?${params}`;\n  }\n  refreshTokenUrl() {\n    return `${this.hostname}/${this.id}/refresh-token`;\n  }\n  fileUrl(id) {\n    return `${this.hostname}/${this.id}/get/${id}`;\n  }\n\n  /** @protected */\n  async request() {\n    await _classPrivateFieldLooseBase(this, _refreshingTokenPromise)[_refreshingTokenPromise];\n    try {\n      // throw Object.assign(new Error(), { isAuthError: true }) // testing simulate access token expired (to refresh token)\n      return await super.request(...arguments);\n    } catch (err) {\n      if (!err.isAuthError) throw err; // only handle auth errors (401 from provider)\n\n      await _classPrivateFieldLooseBase(this, _refreshingTokenPromise)[_refreshingTokenPromise];\n\n      // Many provider requests may be starting at once, however refresh token should only be called once.\n      // Once a refresh token operation has started, we need all other request to wait for this operation (atomically)\n      _classPrivateFieldLooseBase(this, _refreshingTokenPromise)[_refreshingTokenPromise] = (async () => {\n        try {\n          const response = await super.request({\n            path: this.refreshTokenUrl(),\n            method: 'POST'\n          });\n          await this.setAuthToken(response.uppyAuthToken);\n        } finally {\n          _classPrivateFieldLooseBase(this, _refreshingTokenPromise)[_refreshingTokenPromise] = undefined;\n        }\n      })();\n      await _classPrivateFieldLooseBase(this, _refreshingTokenPromise)[_refreshingTokenPromise];\n\n      // now retry the request with our new refresh token\n      return super.request(...arguments);\n    }\n  }\n  async fetchPreAuthToken() {\n    if (!this.companionKeysParams) {\n      return;\n    }\n    try {\n      const res = await this.post(`${this.id}/preauth/`, {\n        params: this.companionKeysParams\n      });\n      this.preAuthToken = res.token;\n    } catch (err) {\n      this.uppy.log(`[CompanionClient] unable to fetch preAuthToken ${err}`, 'warning');\n    }\n  }\n  list(directory) {\n    return this.get(`${this.id}/list/${directory || ''}`);\n  }\n  async logout() {\n    const response = await this.get(`${this.id}/logout`);\n    await _classPrivateFieldLooseBase(this, _removeAuthToken)[_removeAuthToken]();\n    return response;\n  }\n  static initPlugin(plugin, opts, defaultOpts) {\n    /* eslint-disable no-param-reassign */\n    plugin.type = 'acquirer';\n    plugin.files = [];\n    if (defaultOpts) {\n      plugin.opts = {\n        ...defaultOpts,\n        ...opts\n      };\n    }\n    if (opts.serverUrl || opts.serverPattern) {\n      throw new Error('`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`');\n    }\n    if (opts.companionAllowedHosts) {\n      const pattern = opts.companionAllowedHosts;\n      // validate companionAllowedHosts param\n      if (typeof pattern !== 'string' && !Array.isArray(pattern) && !(pattern instanceof RegExp)) {\n        throw new TypeError(`${plugin.id}: the option \"companionAllowedHosts\" must be one of string, Array, RegExp`);\n      }\n      plugin.opts.companionAllowedHosts = pattern;\n    } else if (/^(?!https?:\\/\\/).*$/i.test(opts.companionUrl)) {\n      // does not start with https://\n      plugin.opts.companionAllowedHosts = `https://${opts.companionUrl.replace(/^\\/\\//, '')}`;\n    } else {\n      plugin.opts.companionAllowedHosts = new URL(opts.companionUrl).origin;\n    }\n    plugin.storage = plugin.opts.storage || tokenStorage;\n    /* eslint-enable no-param-reassign */\n  }\n}\nasync function _getAuthToken2() {\n  return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey);\n}\nasync function _removeAuthToken2() {\n  return this.uppy.getPlugin(this.pluginId).storage.removeItem(this.tokenKey);\n}", "let _Symbol$for, _Symbol$for2;\nfunction _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\nvar id = 0;\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\nimport ee from 'namespace-emitter';\nvar _queued = /*#__PURE__*/_classPrivateFieldLooseKey(\"queued\");\nvar _emitter = /*#__PURE__*/_classPrivateFieldLooseKey(\"emitter\");\nvar _isOpen = /*#__PURE__*/_classPrivateFieldLooseKey(\"isOpen\");\nvar _socket = /*#__PURE__*/_classPrivateFieldLooseKey(\"socket\");\nvar _handleMessage = /*#__PURE__*/_classPrivateFieldLooseKey(\"handleMessage\");\n_Symbol$for = Symbol.for('uppy test: getSocket');\n_Symbol$for2 = Symbol.for('uppy test: getQueued');\nexport default class UppySocket {\n  constructor(opts) {\n    Object.defineProperty(this, _queued, {\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, _emitter, {\n      writable: true,\n      value: ee()\n    });\n    Object.defineProperty(this, _isOpen, {\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, _socket, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _handleMessage, {\n      writable: true,\n      value: e => {\n        try {\n          const message = JSON.parse(e.data);\n          this.emit(message.action, message.payload);\n        } catch (err) {\n          // TODO: use a more robust error handler.\n          console.log(err); // eslint-disable-line no-console\n        }\n      }\n    });\n    this.opts = opts;\n    if (!opts || opts.autoOpen !== false) {\n      this.open();\n    }\n  }\n  get isOpen() {\n    return _classPrivateFieldLooseBase(this, _isOpen)[_isOpen];\n  }\n  [_Symbol$for]() {\n    return _classPrivateFieldLooseBase(this, _socket)[_socket];\n  }\n  [_Symbol$for2]() {\n    return _classPrivateFieldLooseBase(this, _queued)[_queued];\n  }\n  open() {\n    if (_classPrivateFieldLooseBase(this, _socket)[_socket] != null) return;\n    _classPrivateFieldLooseBase(this, _socket)[_socket] = new WebSocket(this.opts.target);\n    _classPrivateFieldLooseBase(this, _socket)[_socket].onopen = () => {\n      _classPrivateFieldLooseBase(this, _isOpen)[_isOpen] = true;\n      while (_classPrivateFieldLooseBase(this, _queued)[_queued].length > 0 && _classPrivateFieldLooseBase(this, _isOpen)[_isOpen]) {\n        const first = _classPrivateFieldLooseBase(this, _queued)[_queued].shift();\n        this.send(first.action, first.payload);\n      }\n    };\n    _classPrivateFieldLooseBase(this, _socket)[_socket].onclose = () => {\n      _classPrivateFieldLooseBase(this, _isOpen)[_isOpen] = false;\n      _classPrivateFieldLooseBase(this, _socket)[_socket] = null;\n    };\n    _classPrivateFieldLooseBase(this, _socket)[_socket].onmessage = _classPrivateFieldLooseBase(this, _handleMessage)[_handleMessage];\n  }\n  close() {\n    var _classPrivateFieldLoo;\n    (_classPrivateFieldLoo = _classPrivateFieldLooseBase(this, _socket)[_socket]) == null ? void 0 : _classPrivateFieldLoo.close();\n  }\n  send(action, payload) {\n    // attach uuid\n\n    if (!_classPrivateFieldLooseBase(this, _isOpen)[_isOpen]) {\n      _classPrivateFieldLooseBase(this, _queued)[_queued].push({\n        action,\n        payload\n      });\n      return;\n    }\n    _classPrivateFieldLooseBase(this, _socket)[_socket].send(JSON.stringify({\n      action,\n      payload\n    }));\n  }\n  on(action, handler) {\n    _classPrivateFieldLooseBase(this, _emitter)[_emitter].on(action, handler);\n  }\n  emit(action, payload) {\n    _classPrivateFieldLooseBase(this, _emitter)[_emitter].emit(action, payload);\n  }\n  once(action, handler) {\n    _classPrivateFieldLooseBase(this, _emitter)[_emitter].once(action, handler);\n  }\n}", "import throttle from 'lodash/throttle.js';\nfunction emitSocketProgress(uploader, progressData, file) {\n  const {\n    progress,\n    bytesUploaded,\n    bytesTotal\n  } = progressData;\n  if (progress) {\n    uploader.uppy.log(`Upload progress: ${progress}`);\n    uploader.uppy.emit('upload-progress', file, {\n      uploader,\n      bytesUploaded,\n      bytesTotal\n    });\n  }\n}\nexport default throttle(emitSocketProgress, 300, {\n  leading: true,\n  trailing: true\n});", "export default function getSocketHost(url) {\n  // get the host domain\n  const regex = /^(?:https?:\\/\\/|\\/\\/)?(?:[^@\\n]+@)?(?:www\\.)?([^\\n]+)/i;\n  const host = regex.exec(url)[1];\n  const socketProtocol = /^http:\\/\\//i.test(url) ? 'ws' : 'wss';\n  return `${socketProtocol}://${host}`;\n}", "function _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\nvar id = 0;\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\nvar _emitter = /*#__PURE__*/_classPrivateFieldLooseKey(\"emitter\");\nvar _events = /*#__PURE__*/_classPrivateFieldLooseKey(\"events\");\n/**\n * Create a wrapper around an event emitter with a `remove` method to remove\n * all events that were added using the wrapped emitter.\n */\nexport default class EventManager {\n  constructor(emitter) {\n    Object.defineProperty(this, _emitter, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _events, {\n      writable: true,\n      value: []\n    });\n    _classPrivateFieldLooseBase(this, _emitter)[_emitter] = emitter;\n  }\n  on(event, fn) {\n    _classPrivateFieldLooseBase(this, _events)[_events].push([event, fn]);\n    return _classPrivateFieldLooseBase(this, _emitter)[_emitter].on(event, fn);\n  }\n  remove() {\n    for (const [event, fn] of _classPrivateFieldLooseBase(this, _events)[_events].splice(0)) {\n      _classPrivateFieldLooseBase(this, _emitter)[_emitter].off(event, fn);\n    }\n  }\n}", "function isNetworkError(xhr) {\n  if (!xhr) {\n    return false;\n  }\n  return xhr.readyState !== 0 && xhr.readyState !== 4 || xhr.status === 0;\n}\nexport default isNetworkError;", "function _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\nvar id = 0;\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\nfunction createCancelError(cause) {\n  return new Error('Cancelled', {\n    cause\n  });\n}\nfunction abortOn(signal) {\n  if (signal != null) {\n    var _this$then;\n    const abortPromise = () => this.abort(signal.reason);\n    signal.addEventListener('abort', abortPromise, {\n      once: true\n    });\n    const removeAbortListener = () => {\n      signal.removeEventListener('abort', abortPromise);\n    };\n    (_this$then = this.then) == null ? void 0 : _this$then.call(this, removeAbortListener, removeAbortListener);\n  }\n  return this;\n}\nvar _activeRequests = /*#__PURE__*/_classPrivateFieldLooseKey(\"activeRequests\");\nvar _queuedHandlers = /*#__PURE__*/_classPrivateFieldLooseKey(\"queuedHandlers\");\nvar _paused = /*#__PURE__*/_classPrivateFieldLooseKey(\"paused\");\nvar _pauseTimer = /*#__PURE__*/_classPrivateFieldLooseKey(\"pauseTimer\");\nvar _downLimit = /*#__PURE__*/_classPrivateFieldLooseKey(\"downLimit\");\nvar _upperLimit = /*#__PURE__*/_classPrivateFieldLooseKey(\"upperLimit\");\nvar _rateLimitingTimer = /*#__PURE__*/_classPrivateFieldLooseKey(\"rateLimitingTimer\");\nvar _call = /*#__PURE__*/_classPrivateFieldLooseKey(\"call\");\nvar _queueNext = /*#__PURE__*/_classPrivateFieldLooseKey(\"queueNext\");\nvar _next = /*#__PURE__*/_classPrivateFieldLooseKey(\"next\");\nvar _queue = /*#__PURE__*/_classPrivateFieldLooseKey(\"queue\");\nvar _dequeue = /*#__PURE__*/_classPrivateFieldLooseKey(\"dequeue\");\nvar _resume = /*#__PURE__*/_classPrivateFieldLooseKey(\"resume\");\nvar _increaseLimit = /*#__PURE__*/_classPrivateFieldLooseKey(\"increaseLimit\");\nexport class RateLimitedQueue {\n  constructor(limit) {\n    Object.defineProperty(this, _dequeue, {\n      value: _dequeue2\n    });\n    Object.defineProperty(this, _queue, {\n      value: _queue2\n    });\n    Object.defineProperty(this, _next, {\n      value: _next2\n    });\n    Object.defineProperty(this, _queueNext, {\n      value: _queueNext2\n    });\n    Object.defineProperty(this, _call, {\n      value: _call2\n    });\n    Object.defineProperty(this, _activeRequests, {\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(this, _queuedHandlers, {\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, _paused, {\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, _pauseTimer, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _downLimit, {\n      writable: true,\n      value: 1\n    });\n    Object.defineProperty(this, _upperLimit, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _rateLimitingTimer, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _resume, {\n      writable: true,\n      value: () => this.resume()\n    });\n    Object.defineProperty(this, _increaseLimit, {\n      writable: true,\n      value: () => {\n        if (_classPrivateFieldLooseBase(this, _paused)[_paused]) {\n          _classPrivateFieldLooseBase(this, _rateLimitingTimer)[_rateLimitingTimer] = setTimeout(_classPrivateFieldLooseBase(this, _increaseLimit)[_increaseLimit], 0);\n          return;\n        }\n        _classPrivateFieldLooseBase(this, _downLimit)[_downLimit] = this.limit;\n        this.limit = Math.ceil((_classPrivateFieldLooseBase(this, _upperLimit)[_upperLimit] + _classPrivateFieldLooseBase(this, _downLimit)[_downLimit]) / 2);\n        for (let i = _classPrivateFieldLooseBase(this, _downLimit)[_downLimit]; i <= this.limit; i++) {\n          _classPrivateFieldLooseBase(this, _queueNext)[_queueNext]();\n        }\n        if (_classPrivateFieldLooseBase(this, _upperLimit)[_upperLimit] - _classPrivateFieldLooseBase(this, _downLimit)[_downLimit] > 3) {\n          _classPrivateFieldLooseBase(this, _rateLimitingTimer)[_rateLimitingTimer] = setTimeout(_classPrivateFieldLooseBase(this, _increaseLimit)[_increaseLimit], 2000);\n        } else {\n          _classPrivateFieldLooseBase(this, _downLimit)[_downLimit] = Math.floor(_classPrivateFieldLooseBase(this, _downLimit)[_downLimit] / 2);\n        }\n      }\n    });\n    if (typeof limit !== 'number' || limit === 0) {\n      this.limit = Infinity;\n    } else {\n      this.limit = limit;\n    }\n  }\n  run(fn, queueOptions) {\n    if (!_classPrivateFieldLooseBase(this, _paused)[_paused] && _classPrivateFieldLooseBase(this, _activeRequests)[_activeRequests] < this.limit) {\n      return _classPrivateFieldLooseBase(this, _call)[_call](fn);\n    }\n    return _classPrivateFieldLooseBase(this, _queue)[_queue](fn, queueOptions);\n  }\n  wrapSyncFunction(fn, queueOptions) {\n    var _this = this;\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      const queuedRequest = _this.run(() => {\n        fn(...args);\n        queueMicrotask(() => queuedRequest.done());\n        return () => {};\n      }, queueOptions);\n      return {\n        abortOn,\n        abort() {\n          queuedRequest.abort();\n        }\n      };\n    };\n  }\n  wrapPromiseFunction(fn, queueOptions) {\n    var _this2 = this;\n    return function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      let queuedRequest;\n      const outerPromise = new Promise((resolve, reject) => {\n        queuedRequest = _this2.run(() => {\n          let cancelError;\n          let innerPromise;\n          try {\n            innerPromise = Promise.resolve(fn(...args));\n          } catch (err) {\n            innerPromise = Promise.reject(err);\n          }\n          innerPromise.then(result => {\n            if (cancelError) {\n              reject(cancelError);\n            } else {\n              queuedRequest.done();\n              resolve(result);\n            }\n          }, err => {\n            if (cancelError) {\n              reject(cancelError);\n            } else {\n              queuedRequest.done();\n              reject(err);\n            }\n          });\n          return cause => {\n            cancelError = createCancelError(cause);\n          };\n        }, queueOptions);\n      });\n      outerPromise.abort = cause => {\n        queuedRequest.abort(cause);\n      };\n      outerPromise.abortOn = abortOn;\n      return outerPromise;\n    };\n  }\n  resume() {\n    _classPrivateFieldLooseBase(this, _paused)[_paused] = false;\n    clearTimeout(_classPrivateFieldLooseBase(this, _pauseTimer)[_pauseTimer]);\n    for (let i = 0; i < this.limit; i++) {\n      _classPrivateFieldLooseBase(this, _queueNext)[_queueNext]();\n    }\n  }\n  /**\n   * Freezes the queue for a while or indefinitely.\n   *\n   * @param {number | null } [duration] Duration for the pause to happen, in milliseconds.\n   *                                    If omitted, the queue won't resume automatically.\n   */\n  pause(duration) {\n    if (duration === void 0) {\n      duration = null;\n    }\n    _classPrivateFieldLooseBase(this, _paused)[_paused] = true;\n    clearTimeout(_classPrivateFieldLooseBase(this, _pauseTimer)[_pauseTimer]);\n    if (duration != null) {\n      _classPrivateFieldLooseBase(this, _pauseTimer)[_pauseTimer] = setTimeout(_classPrivateFieldLooseBase(this, _resume)[_resume], duration);\n    }\n  }\n\n  /**\n   * Pauses the queue for a duration, and lower the limit of concurrent requests\n   * when the queue resumes. When the queue resumes, it tries to progressively\n   * increase the limit in `this.#increaseLimit` until another call is made to\n   * `this.rateLimit`.\n   * Call this function when using the RateLimitedQueue for network requests and\n   * the remote server responds with 429 HTTP code.\n   *\n   * @param {number} duration in milliseconds.\n   */\n  rateLimit(duration) {\n    clearTimeout(_classPrivateFieldLooseBase(this, _rateLimitingTimer)[_rateLimitingTimer]);\n    this.pause(duration);\n    if (this.limit > 1 && Number.isFinite(this.limit)) {\n      _classPrivateFieldLooseBase(this, _upperLimit)[_upperLimit] = this.limit - 1;\n      this.limit = _classPrivateFieldLooseBase(this, _downLimit)[_downLimit];\n      _classPrivateFieldLooseBase(this, _rateLimitingTimer)[_rateLimitingTimer] = setTimeout(_classPrivateFieldLooseBase(this, _increaseLimit)[_increaseLimit], duration);\n    }\n  }\n  get isPaused() {\n    return _classPrivateFieldLooseBase(this, _paused)[_paused];\n  }\n}\nfunction _call2(fn) {\n  _classPrivateFieldLooseBase(this, _activeRequests)[_activeRequests] += 1;\n  let done = false;\n  let cancelActive;\n  try {\n    cancelActive = fn();\n  } catch (err) {\n    _classPrivateFieldLooseBase(this, _activeRequests)[_activeRequests] -= 1;\n    throw err;\n  }\n  return {\n    abort: cause => {\n      if (done) return;\n      done = true;\n      _classPrivateFieldLooseBase(this, _activeRequests)[_activeRequests] -= 1;\n      cancelActive(cause);\n      _classPrivateFieldLooseBase(this, _queueNext)[_queueNext]();\n    },\n    done: () => {\n      if (done) return;\n      done = true;\n      _classPrivateFieldLooseBase(this, _activeRequests)[_activeRequests] -= 1;\n      _classPrivateFieldLooseBase(this, _queueNext)[_queueNext]();\n    }\n  };\n}\nfunction _queueNext2() {\n  // Do it soon but not immediately, this allows clearing out the entire queue synchronously\n  // one by one without continuously _advancing_ it (and starting new tasks before immediately\n  // aborting them)\n  queueMicrotask(() => _classPrivateFieldLooseBase(this, _next)[_next]());\n}\nfunction _next2() {\n  if (_classPrivateFieldLooseBase(this, _paused)[_paused] || _classPrivateFieldLooseBase(this, _activeRequests)[_activeRequests] >= this.limit) {\n    return;\n  }\n  if (_classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].length === 0) {\n    return;\n  }\n\n  // Dispatch the next request, and update the abort/done handlers\n  // so that cancelling it does the Right Thing (and doesn't just try\n  // to dequeue an already-running request).\n  const next = _classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].shift();\n  const handler = _classPrivateFieldLooseBase(this, _call)[_call](next.fn);\n  next.abort = handler.abort;\n  next.done = handler.done;\n}\nfunction _queue2(fn, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const handler = {\n    fn,\n    priority: options.priority || 0,\n    abort: () => {\n      _classPrivateFieldLooseBase(this, _dequeue)[_dequeue](handler);\n    },\n    done: () => {\n      throw new Error('Cannot mark a queued request as done: this indicates a bug');\n    }\n  };\n  const index = _classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].findIndex(other => {\n    return handler.priority > other.priority;\n  });\n  if (index === -1) {\n    _classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].push(handler);\n  } else {\n    _classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].splice(index, 0, handler);\n  }\n  return handler;\n}\nfunction _dequeue2(handler) {\n  const index = _classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].indexOf(handler);\n  if (index !== -1) {\n    _classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].splice(index, 1);\n  }\n}\nexport const internalRateLimitedQueue = Symbol('__queue');", "export function filterNonFailedFiles(files) {\n  const hasError = file => 'error' in file && file.error;\n  return files.filter(file => !hasError(file));\n}\n\n// Don't double-emit upload-started for Golden Retriever-restored files that were already started\nexport function filterFilesToEmitUploadStarted(files) {\n  return files.filter(file => !file.progress.uploadStarted || !file.isRestored);\n}", "import * as tus from 'tus-js-client';\nfunction isCordova() {\n  return typeof window !== 'undefined' && (typeof window.PhoneGap !== 'undefined' || typeof window.Cordova !== 'undefined' || typeof window.cordova !== 'undefined');\n}\nfunction isReactNative() {\n  return typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative';\n}\n\n// We override tus fingerprint to uppy\u2019s `file.id`, since the `file.id`\n// now also includes `relativePath` for files added from folders.\n// This means you can add 2 identical files, if one is in folder a,\n// the other in folder b \u2014 `a/file.jpg` and `b/file.jpg`, when added\n// together with a folder, will be treated as 2 separate files.\n//\n// For React Native and Cordova, we let tus-js-client\u2019s default\n// fingerprint handling take charge.\nexport default function getFingerprint(uppyFileObj) {\n  return (file, options) => {\n    if (isCordova() || isReactNative()) {\n      return tus.defaultOptions.fingerprint(file, options);\n    }\n    const uppyFingerprint = ['tus', uppyFileObj.id, options.endpoint].join('-');\n    return Promise.resolve(uppyFingerprint);\n  };\n}", "function _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\nvar id = 0;\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\nimport UploaderPlugin from '@uppy/core/lib/UploaderPlugin.js';\nimport * as tus from 'tus-js-client';\nimport { Provider, RequestClient, Socket } from '@uppy/companion-client';\nimport emitSocketProgress from '@uppy/utils/lib/emitSocketProgress';\nimport getSocketHost from '@uppy/utils/lib/getSocketHost';\nimport EventManager from '@uppy/utils/lib/EventManager';\nimport NetworkError from '@uppy/utils/lib/NetworkError';\nimport isNetworkError from '@uppy/utils/lib/isNetworkError';\nimport { RateLimitedQueue } from '@uppy/utils/lib/RateLimitedQueue';\nimport hasProperty from '@uppy/utils/lib/hasProperty';\nimport { filterNonFailedFiles, filterFilesToEmitUploadStarted } from '@uppy/utils/lib/fileFilters';\nimport getFingerprint from './getFingerprint.js';\nconst packageJson = {\n  \"version\": \"3.1.2\"\n};\n/** @typedef {import('..').TusOptions} TusOptions */\n/** @typedef {import('tus-js-client').UploadOptions} RawTusOptions */\n/** @typedef {import('@uppy/core').Uppy} Uppy */\n/** @typedef {import('@uppy/core').UppyFile} UppyFile */\n/** @typedef {import('@uppy/core').FailedUppyFile<{}>} FailedUppyFile */\n/**\n * Extracted from https://github.com/tus/tus-js-client/blob/master/lib/upload.js#L13\n * excepted we removed 'fingerprint' key to avoid adding more dependencies\n *\n * @type {RawTusOptions}\n */\nconst tusDefaultOptions = {\n  endpoint: '',\n  uploadUrl: null,\n  metadata: {},\n  uploadSize: null,\n  onProgress: null,\n  onChunkComplete: null,\n  onSuccess: null,\n  onError: null,\n  overridePatchMethod: false,\n  headers: {},\n  addRequestId: false,\n  chunkSize: Infinity,\n  retryDelays: [100, 1000, 3000, 5000],\n  parallelUploads: 1,\n  removeFingerprintOnSuccess: false,\n  uploadLengthDeferred: false,\n  uploadDataDuringCreation: false\n};\n\n/**\n * Tus resumable file uploader\n */\nvar _retryDelayIterator = /*#__PURE__*/_classPrivateFieldLooseKey(\"retryDelayIterator\");\nvar _upload = /*#__PURE__*/_classPrivateFieldLooseKey(\"upload\");\nvar _requestSocketToken = /*#__PURE__*/_classPrivateFieldLooseKey(\"requestSocketToken\");\nvar _uploadFiles = /*#__PURE__*/_classPrivateFieldLooseKey(\"uploadFiles\");\nvar _handleUpload = /*#__PURE__*/_classPrivateFieldLooseKey(\"handleUpload\");\nexport default class Tus extends UploaderPlugin {\n  /**\n   * @param {Uppy} uppy\n   * @param {TusOptions} opts\n   */\n  constructor(uppy, _opts) {\n    var _this$opts$rateLimite, _this$opts$retryDelay;\n    super(uppy, _opts);\n    /**\n     * @param {(UppyFile | FailedUppyFile)[]} files\n     */\n    Object.defineProperty(this, _uploadFiles, {\n      value: _uploadFiles2\n    });\n    /**\n     * Create a new Tus upload.\n     *\n     * A lot can happen during an upload, so this is quite hard to follow!\n     * - First, the upload is started. If the file was already paused by the time the upload starts, nothing should happen.\n     *   If the `limit` option is used, the upload must be queued onto the `this.requests` queue.\n     *   When an upload starts, we store the tus.Upload instance, and an EventManager instance that manages the event listeners\n     *   for pausing, cancellation, removal, etc.\n     * - While the upload is in progress, it may be paused or cancelled.\n     *   Pausing aborts the underlying tus.Upload, and removes the upload from the `this.requests` queue. All other state is\n     *   maintained.\n     *   Cancelling removes the upload from the `this.requests` queue, and completely aborts the upload-- the `tus.Upload`\n     *   instance is aborted and discarded, the EventManager instance is destroyed (removing all listeners).\n     *   Resuming the upload uses the `this.requests` queue as well, to prevent selectively pausing and resuming uploads from\n     *   bypassing the limit.\n     * - After completing an upload, the tus.Upload and EventManager instances are cleaned up, and the upload is marked as done\n     *   in the `this.requests` queue.\n     * - When an upload completed with an error, the same happens as on successful completion, but the `upload()` promise is\n     *   rejected.\n     *\n     * When working on this function, keep in mind:\n     *  - When an upload is completed or cancelled for any reason, the tus.Upload and EventManager instances need to be cleaned\n     *    up using this.resetUploaderReferences().\n     *  - When an upload is cancelled or paused, for any reason, it needs to be removed from the `this.requests` queue using\n     *    `queuedRequest.abort()`.\n     *  - When an upload is completed for any reason, including errors, it needs to be marked as such using\n     *    `queuedRequest.done()`.\n     *  - When an upload is started or resumed, it needs to go through the `this.requests` queue. The `queuedRequest` variable\n     *    must be updated so the other uses of it are valid.\n     *  - Before replacing the `queuedRequest` variable, the previous `queuedRequest` must be aborted, else it will keep taking\n     *    up a spot in the queue.\n     *\n     * @param {UppyFile} file for use with upload\n     * @returns {Promise<void>}\n     */\n    Object.defineProperty(this, _upload, {\n      value: _upload2\n    });\n    Object.defineProperty(this, _retryDelayIterator, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _requestSocketToken, {\n      writable: true,\n      value: async (file, options) => {\n        const Client = file.remote.providerOptions.provider ? Provider : RequestClient;\n        const client = new Client(this.uppy, file.remote.providerOptions);\n        const opts = {\n          ...this.opts\n        };\n        if (file.tus) {\n          // Install file-specific upload overrides.\n          Object.assign(opts, file.tus);\n        }\n        const res = await client.post(file.remote.url, {\n          ...file.remote.body,\n          endpoint: opts.endpoint,\n          uploadUrl: opts.uploadUrl,\n          protocol: 'tus',\n          size: file.data.size,\n          headers: opts.headers,\n          metadata: file.meta\n        }, options);\n        return res.token;\n      }\n    });\n    /**\n     * @param {string[]} fileIDs\n     */\n    Object.defineProperty(this, _handleUpload, {\n      writable: true,\n      value: async fileIDs => {\n        if (fileIDs.length === 0) {\n          this.uppy.log('[Tus] No files to upload');\n          return;\n        }\n        if (this.opts.limit === 0) {\n          this.uppy.log('[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0', 'warning');\n        }\n        this.uppy.log('[Tus] Uploading...');\n        const filesToUpload = this.uppy.getFilesByIds(fileIDs);\n        await _classPrivateFieldLooseBase(this, _uploadFiles)[_uploadFiles](filesToUpload);\n      }\n    });\n    this.type = 'uploader';\n    this.id = this.opts.id || 'Tus';\n    this.title = 'Tus';\n\n    // set default options\n    const defaultOptions = {\n      useFastRemoteRetry: true,\n      limit: 20,\n      retryDelays: tusDefaultOptions.retryDelays,\n      withCredentials: false\n    };\n\n    // merge default options with the ones set by user\n    /** @type {import(\"..\").TusOptions} */\n    this.opts = {\n      ...defaultOptions,\n      ..._opts\n    };\n    if ((_opts == null ? void 0 : _opts.allowedMetaFields) === undefined && 'metaFields' in this.opts) {\n      throw new Error('The `metaFields` option has been renamed to `allowedMetaFields`.');\n    }\n    if ('autoRetry' in _opts) {\n      throw new Error('The `autoRetry` option was deprecated and has been removed.');\n    }\n\n    /**\n     * Simultaneous upload limiting is shared across all uploads with this plugin.\n     *\n     * @type {RateLimitedQueue}\n     */\n    this.requests = (_this$opts$rateLimite = this.opts.rateLimitedQueue) != null ? _this$opts$rateLimite : new RateLimitedQueue(this.opts.limit);\n    _classPrivateFieldLooseBase(this, _retryDelayIterator)[_retryDelayIterator] = (_this$opts$retryDelay = this.opts.retryDelays) == null ? void 0 : _this$opts$retryDelay.values();\n    this.uploaders = Object.create(null);\n    this.uploaderEvents = Object.create(null);\n    this.uploaderSockets = Object.create(null);\n    this.handleResetProgress = this.handleResetProgress.bind(this);\n    this.setQueueRequestSocketToken(this.requests.wrapPromiseFunction(_classPrivateFieldLooseBase(this, _requestSocketToken)[_requestSocketToken], {\n      priority: -1\n    }));\n  }\n  handleResetProgress() {\n    const files = {\n      ...this.uppy.getState().files\n    };\n    Object.keys(files).forEach(fileID => {\n      // Only clone the file object if it has a Tus `uploadUrl` attached.\n      if (files[fileID].tus && files[fileID].tus.uploadUrl) {\n        const tusState = {\n          ...files[fileID].tus\n        };\n        delete tusState.uploadUrl;\n        files[fileID] = {\n          ...files[fileID],\n          tus: tusState\n        };\n      }\n    });\n    this.uppy.setState({\n      files\n    });\n  }\n\n  /**\n   * Clean up all references for a file's upload: the tus.Upload instance,\n   * any events related to the file, and the Companion WebSocket connection.\n   *\n   * @param {string} fileID\n   */\n  resetUploaderReferences(fileID, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n    if (this.uploaders[fileID]) {\n      const uploader = this.uploaders[fileID];\n      uploader.abort();\n      if (opts.abort) {\n        uploader.abort(true);\n      }\n      this.uploaders[fileID] = null;\n    }\n    if (this.uploaderEvents[fileID]) {\n      this.uploaderEvents[fileID].remove();\n      this.uploaderEvents[fileID] = null;\n    }\n    if (this.uploaderSockets[fileID]) {\n      this.uploaderSockets[fileID].close();\n      this.uploaderSockets[fileID] = null;\n    }\n  }\n  /**\n   * See the comment on the upload() method.\n   *\n   * Additionally, when an upload is removed, completed, or cancelled, we need to close the WebSocket connection. This is\n   * handled by the resetUploaderReferences() function, so the same guidelines apply as in upload().\n   *\n   * @param {UppyFile} file\n   */\n  async connectToServerSocket(file) {\n    var _this = this;\n    return new Promise((resolve, reject) => {\n      const token = file.serverToken;\n      const host = getSocketHost(file.remote.companionUrl);\n      const socket = new Socket({\n        target: `${host}/api/${token}`,\n        autoOpen: false\n      });\n      this.uploaderSockets[file.id] = socket;\n      this.uploaderEvents[file.id] = new EventManager(this.uppy);\n      let queuedRequest;\n      this.onFileRemove(file.id, () => {\n        socket.send('cancel', {});\n        queuedRequest.abort();\n        this.resetUploaderReferences(file.id);\n        resolve(`upload ${file.id} was removed`);\n      });\n      this.onPause(file.id, isPaused => {\n        if (isPaused) {\n          // Remove this file from the queue so another file can start in its place.\n          socket.send('pause', {});\n          queuedRequest.abort();\n        } else {\n          // Resuming an upload should be queued, else you could pause and then\n          // resume a queued upload to make it skip the queue.\n          queuedRequest.abort();\n          queuedRequest = this.requests.run(() => {\n            socket.open();\n            socket.send('resume', {});\n            return () => {};\n          });\n        }\n      });\n      this.onPauseAll(file.id, () => {\n        socket.send('pause', {});\n        queuedRequest.abort();\n      });\n      this.onCancelAll(file.id, function (_temp) {\n        let {\n          reason\n        } = _temp === void 0 ? {} : _temp;\n        if (reason === 'user') {\n          socket.send('cancel', {});\n          queuedRequest.abort();\n          _this.resetUploaderReferences(file.id);\n        }\n        resolve(`upload ${file.id} was canceled`);\n      });\n      this.onResumeAll(file.id, () => {\n        queuedRequest.abort();\n        if (file.error) {\n          socket.send('pause', {});\n        }\n        queuedRequest = this.requests.run(() => {\n          socket.open();\n          socket.send('resume', {});\n          return () => {};\n        });\n      });\n      this.onRetry(file.id, () => {\n        // Only do the retry if the upload is actually in progress;\n        // else we could try to send these messages when the upload is still queued.\n        // We may need a better check for this since the socket may also be closed\n        // for other reasons, like network failures.\n        if (socket.isOpen) {\n          socket.send('pause', {});\n          socket.send('resume', {});\n        }\n      });\n      this.onRetryAll(file.id, () => {\n        // See the comment in the onRetry() call\n        if (socket.isOpen) {\n          socket.send('pause', {});\n          socket.send('resume', {});\n        }\n      });\n      socket.on('progress', progressData => emitSocketProgress(this, progressData, file));\n      socket.on('error', errData => {\n        const {\n          message\n        } = errData.error;\n        const error = Object.assign(new Error(message), {\n          cause: errData.error\n        });\n\n        // If the remote retry optimisation should not be used,\n        // close the socket\u2014this will tell companion to clear state and delete the file.\n        if (!this.opts.useFastRemoteRetry) {\n          this.resetUploaderReferences(file.id);\n          // Remove the serverToken so that a new one will be created for the retry.\n          this.uppy.setFileState(file.id, {\n            serverToken: null\n          });\n        } else {\n          socket.close();\n        }\n        this.uppy.emit('upload-error', file, error);\n        queuedRequest.done();\n        reject(error);\n      });\n      socket.on('success', data => {\n        const uploadResp = {\n          uploadURL: data.url\n        };\n        this.uppy.emit('upload-success', file, uploadResp);\n        this.resetUploaderReferences(file.id);\n        queuedRequest.done();\n        socket.close();\n        resolve();\n      });\n      queuedRequest = this.requests.run(() => {\n        if (file.isPaused) {\n          socket.send('pause', {});\n        } else {\n          socket.open();\n        }\n\n        // Just close the socket here, the caller will take care of cancelling the upload itself\n        // using resetUploaderReferences(). This is because resetUploaderReferences() has to be\n        // called when this request is still in the queue, and has not been started yet, too. At\n        // that point this cancellation function is not going to be called.\n        // Also, we need to remove the request from the queue _without_ destroying everything\n        // related to this upload to handle pauses.\n        return () => {};\n      });\n    });\n  }\n\n  /**\n   * Store the uploadUrl on the file options, so that when Golden Retriever\n   * restores state, we will continue uploading to the correct URL.\n   *\n   * @param {UppyFile} file\n   * @param {string} uploadURL\n   */\n  onReceiveUploadUrl(file, uploadURL) {\n    const currentFile = this.uppy.getFile(file.id);\n    if (!currentFile) return;\n    // Only do the update if we didn't have an upload URL yet.\n    if (!currentFile.tus || currentFile.tus.uploadUrl !== uploadURL) {\n      this.uppy.log('[Tus] Storing upload url');\n      this.uppy.setFileState(currentFile.id, {\n        tus: {\n          ...currentFile.tus,\n          uploadUrl: uploadURL\n        }\n      });\n    }\n  }\n\n  /**\n   * @param {string} fileID\n   * @param {function(string): void} cb\n   */\n  onFileRemove(fileID, cb) {\n    this.uploaderEvents[fileID].on('file-removed', file => {\n      if (fileID === file.id) cb(file.id);\n    });\n  }\n\n  /**\n   * @param {string} fileID\n   * @param {function(boolean): void} cb\n   */\n  onPause(fileID, cb) {\n    this.uploaderEvents[fileID].on('upload-pause', (targetFileID, isPaused) => {\n      if (fileID === targetFileID) {\n        // const isPaused = this.uppy.pauseResume(fileID)\n        cb(isPaused);\n      }\n    });\n  }\n\n  /**\n   * @param {string} fileID\n   * @param {function(): void} cb\n   */\n  onRetry(fileID, cb) {\n    this.uploaderEvents[fileID].on('upload-retry', targetFileID => {\n      if (fileID === targetFileID) {\n        cb();\n      }\n    });\n  }\n\n  /**\n   * @param {string} fileID\n   * @param {function(): void} cb\n   */\n  onRetryAll(fileID, cb) {\n    this.uploaderEvents[fileID].on('retry-all', () => {\n      if (!this.uppy.getFile(fileID)) return;\n      cb();\n    });\n  }\n\n  /**\n   * @param {string} fileID\n   * @param {function(): void} cb\n   */\n  onPauseAll(fileID, cb) {\n    this.uploaderEvents[fileID].on('pause-all', () => {\n      if (!this.uppy.getFile(fileID)) return;\n      cb();\n    });\n  }\n\n  /**\n   * @param {string} fileID\n   * @param {function(): void} eventHandler\n   */\n  onCancelAll(fileID, eventHandler) {\n    var _this2 = this;\n    this.uploaderEvents[fileID].on('cancel-all', function () {\n      if (!_this2.uppy.getFile(fileID)) return;\n      eventHandler(...arguments);\n    });\n  }\n\n  /**\n   * @param {string} fileID\n   * @param {function(): void} cb\n   */\n  onResumeAll(fileID, cb) {\n    this.uploaderEvents[fileID].on('resume-all', () => {\n      if (!this.uppy.getFile(fileID)) return;\n      cb();\n    });\n  }\n  install() {\n    this.uppy.setState({\n      capabilities: {\n        ...this.uppy.getState().capabilities,\n        resumableUploads: true\n      }\n    });\n    this.uppy.addUploader(_classPrivateFieldLooseBase(this, _handleUpload)[_handleUpload]);\n    this.uppy.on('reset-progress', this.handleResetProgress);\n  }\n  uninstall() {\n    this.uppy.setState({\n      capabilities: {\n        ...this.uppy.getState().capabilities,\n        resumableUploads: false\n      }\n    });\n    this.uppy.removeUploader(_classPrivateFieldLooseBase(this, _handleUpload)[_handleUpload]);\n  }\n}\nfunction _upload2(file) {\n  var _this3 = this;\n  this.resetUploaderReferences(file.id);\n\n  // Create a new tus upload\n  return new Promise((resolve, reject) => {\n    let queuedRequest;\n    let qRequest;\n    let upload;\n    const opts = {\n      ...this.opts,\n      ...(file.tus || {})\n    };\n    if (typeof opts.headers === 'function') {\n      opts.headers = opts.headers(file);\n    }\n\n    /** @type {RawTusOptions} */\n    const uploadOptions = {\n      ...tusDefaultOptions,\n      ...opts\n    };\n\n    // We override tus fingerprint to uppy\u2019s `file.id`, since the `file.id`\n    // now also includes `relativePath` for files added from folders.\n    // This means you can add 2 identical files, if one is in folder a,\n    // the other in folder b.\n    uploadOptions.fingerprint = getFingerprint(file);\n    uploadOptions.onBeforeRequest = req => {\n      const xhr = req.getUnderlyingObject();\n      xhr.withCredentials = !!opts.withCredentials;\n      let userProvidedPromise;\n      if (typeof opts.onBeforeRequest === 'function') {\n        userProvidedPromise = opts.onBeforeRequest(req, file);\n      }\n      if (hasProperty(queuedRequest, 'shouldBeRequeued')) {\n        if (!queuedRequest.shouldBeRequeued) return Promise.reject();\n        let done;\n        const p = new Promise(res => {\n          // eslint-disable-line promise/param-names\n          done = res;\n        });\n        queuedRequest = this.requests.run(() => {\n          if (file.isPaused) {\n            queuedRequest.abort();\n          }\n          done();\n          return () => {};\n        });\n        // If the request has been requeued because it was rate limited by the\n        // remote server, we want to wait for `RateLimitedQueue` to dispatch\n        // the re-try request.\n        // Therefore we create a promise that the queue will resolve when\n        // enough time has elapsed to expect not to be rate-limited again.\n        // This means we can hold the Tus retry here with a `Promise.all`,\n        // together with the returned value of the user provided\n        // `onBeforeRequest` option callback (in case it returns a promise).\n        return Promise.all([p, userProvidedPromise]);\n      }\n      return userProvidedPromise;\n    };\n    uploadOptions.onError = err => {\n      var _queuedRequest;\n      this.uppy.log(err);\n      const xhr = err.originalRequest ? err.originalRequest.getUnderlyingObject() : null;\n      if (isNetworkError(xhr)) {\n        // eslint-disable-next-line no-param-reassign\n        err = new NetworkError(err, xhr);\n      }\n      this.resetUploaderReferences(file.id);\n      (_queuedRequest = queuedRequest) == null ? void 0 : _queuedRequest.abort();\n      this.uppy.emit('upload-error', file, err);\n      reject(err);\n    };\n    uploadOptions.onProgress = (bytesUploaded, bytesTotal) => {\n      this.onReceiveUploadUrl(file, upload.url);\n      this.uppy.emit('upload-progress', file, {\n        uploader: this,\n        bytesUploaded,\n        bytesTotal\n      });\n    };\n    uploadOptions.onSuccess = () => {\n      const uploadResp = {\n        uploadURL: upload.url\n      };\n      this.resetUploaderReferences(file.id);\n      queuedRequest.done();\n      this.uppy.emit('upload-success', file, uploadResp);\n      if (upload.url) {\n        this.uppy.log(`Download ${upload.file.name} from ${upload.url}`);\n      }\n      resolve(upload);\n    };\n    const defaultOnShouldRetry = err => {\n      var _err$originalResponse;\n      const status = err == null ? void 0 : (_err$originalResponse = err.originalResponse) == null ? void 0 : _err$originalResponse.getStatus();\n      if (status === 429) {\n        // HTTP 429 Too Many Requests => to avoid the whole download to fail, pause all requests.\n        if (!this.requests.isPaused) {\n          var _classPrivateFieldLoo;\n          const next = (_classPrivateFieldLoo = _classPrivateFieldLooseBase(this, _retryDelayIterator)[_retryDelayIterator]) == null ? void 0 : _classPrivateFieldLoo.next();\n          if (next == null || next.done) {\n            return false;\n          }\n          this.requests.rateLimit(next.value);\n        }\n      } else if (status > 400 && status < 500 && status !== 409 && status !== 423) {\n        // HTTP 4xx, the server won't send anything, it's doesn't make sense to retry\n        // HTTP 409 Conflict (happens if the Upload-Offset header does not match the one on the server)\n        // HTTP 423 Locked (happens when a paused download is resumed too quickly)\n        return false;\n      } else if (typeof navigator !== 'undefined' && navigator.onLine === false) {\n        // The navigator is offline, let's wait for it to come back online.\n        if (!this.requests.isPaused) {\n          this.requests.pause();\n          window.addEventListener('online', () => {\n            this.requests.resume();\n          }, {\n            once: true\n          });\n        }\n      }\n      queuedRequest.abort();\n      queuedRequest = {\n        shouldBeRequeued: true,\n        abort() {\n          this.shouldBeRequeued = false;\n        },\n        done() {\n          throw new Error('Cannot mark a queued request as done: this indicates a bug');\n        },\n        fn() {\n          throw new Error('Cannot run a queued request: this indicates a bug');\n        }\n      };\n      return true;\n    };\n    if (opts.onShouldRetry != null) {\n      uploadOptions.onShouldRetry = function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        return opts.onShouldRetry(...args, defaultOnShouldRetry);\n      };\n    } else {\n      uploadOptions.onShouldRetry = defaultOnShouldRetry;\n    }\n    const copyProp = (obj, srcProp, destProp) => {\n      if (hasProperty(obj, srcProp) && !hasProperty(obj, destProp)) {\n        // eslint-disable-next-line no-param-reassign\n        obj[destProp] = obj[srcProp];\n      }\n    };\n\n    /** @type {Record<string, string>} */\n    const meta = {};\n    const allowedMetaFields = Array.isArray(opts.allowedMetaFields) ? opts.allowedMetaFields\n    // Send along all fields by default.\n    : Object.keys(file.meta);\n    allowedMetaFields.forEach(item => {\n      meta[item] = file.meta[item];\n    });\n\n    // tusd uses metadata fields 'filetype' and 'filename'\n    copyProp(meta, 'type', 'filetype');\n    copyProp(meta, 'name', 'filename');\n    uploadOptions.metadata = meta;\n    upload = new tus.Upload(file.data, uploadOptions);\n    this.uploaders[file.id] = upload;\n    this.uploaderEvents[file.id] = new EventManager(this.uppy);\n\n    // eslint-disable-next-line prefer-const\n    qRequest = () => {\n      if (!file.isPaused) {\n        upload.start();\n      }\n      // Don't do anything here, the caller will take care of cancelling the upload itself\n      // using resetUploaderReferences(). This is because resetUploaderReferences() has to be\n      // called when this request is still in the queue, and has not been started yet, too. At\n      // that point this cancellation function is not going to be called.\n      // Also, we need to remove the request from the queue _without_ destroying everything\n      // related to this upload to handle pauses.\n      return () => {};\n    };\n    upload.findPreviousUploads().then(previousUploads => {\n      const previousUpload = previousUploads[0];\n      if (previousUpload) {\n        this.uppy.log(`[Tus] Resuming upload of ${file.id} started at ${previousUpload.creationTime}`);\n        upload.resumeFromPreviousUpload(previousUpload);\n      }\n    });\n    queuedRequest = this.requests.run(qRequest);\n    this.onFileRemove(file.id, targetFileID => {\n      queuedRequest.abort();\n      this.resetUploaderReferences(file.id, {\n        abort: !!upload.url\n      });\n      resolve(`upload ${targetFileID} was removed`);\n    });\n    this.onPause(file.id, isPaused => {\n      queuedRequest.abort();\n      if (isPaused) {\n        // Remove this file from the queue so another file can start in its place.\n        upload.abort();\n      } else {\n        // Resuming an upload should be queued, else you could pause and then\n        // resume a queued upload to make it skip the queue.\n        queuedRequest = this.requests.run(qRequest);\n      }\n    });\n    this.onPauseAll(file.id, () => {\n      queuedRequest.abort();\n      upload.abort();\n    });\n    this.onCancelAll(file.id, function (_temp2) {\n      let {\n        reason\n      } = _temp2 === void 0 ? {} : _temp2;\n      if (reason === 'user') {\n        queuedRequest.abort();\n        _this3.resetUploaderReferences(file.id, {\n          abort: !!upload.url\n        });\n      }\n      resolve(`upload ${file.id} was canceled`);\n    });\n    this.onResumeAll(file.id, () => {\n      queuedRequest.abort();\n      if (file.error) {\n        upload.abort();\n      }\n      queuedRequest = this.requests.run(qRequest);\n    });\n  }).catch(err => {\n    this.uppy.emit('upload-error', file, err);\n    throw err;\n  });\n}\nasync function _uploadFiles2(files) {\n  const filesFiltered = filterNonFailedFiles(files);\n  const filesToEmit = filterFilesToEmitUploadStarted(filesFiltered);\n  this.uppy.emit('upload-start', filesToEmit);\n  await Promise.allSettled(filesFiltered.map((file, i) => {\n    const current = i + 1;\n    const total = files.length;\n    if (file.isRemote) {\n      const controller = new AbortController();\n      const removedHandler = removedFile => {\n        if (removedFile.id === file.id) controller.abort();\n      };\n      this.uppy.on('file-removed', removedHandler);\n      this.resetUploaderReferences(file.id);\n      const uploadPromise = this.uploadRemoteFile(file, {\n        signal: controller.signal\n      });\n      this.requests.wrapSyncFunction(() => {\n        this.uppy.off('file-removed', removedHandler);\n      }, {\n        priority: -1\n      })();\n      return uploadPromise;\n    }\n    return _classPrivateFieldLooseBase(this, _upload)[_upload](file, current, total);\n  }));\n}\nTus.VERSION = packageJson.version;"],
  "mappings": ";;;;;;;;;;;;;AAAA;AAAA;AAAA;AAWA,WAAO,UAAU,SAAS,SAAS,MAAM,UAAU;AACjD,iBAAW,SAAS,MAAM,GAAG,EAAE,CAAC;AAChC,aAAO,CAAC;AAER,UAAI,CAAC;AAAM,eAAO;AAElB,cAAQ,UAAU;AAAA,QAChB,KAAK;AAAA,QACL,KAAK;AACL,iBAAO,SAAS;AAAA,QAEhB,KAAK;AAAA,QACL,KAAK;AACL,iBAAO,SAAS;AAAA,QAEhB,KAAK;AACL,iBAAO,SAAS;AAAA,QAEhB,KAAK;AACL,iBAAO,SAAS;AAAA,QAEhB,KAAK;AACL,iBAAO;AAAA,MACT;AAEA,aAAO,SAAS;AAAA,IAClB;AAAA;AAAA;;;ACrCA;AAAA;AAAA;AAEA,QAAIA,OAAM,OAAO,UAAU;AAA3B,QACI;AASJ,aAASC,QAAO,OAAO;AACrB,UAAI;AACF,eAAO,mBAAmB,MAAM,QAAQ,OAAO,GAAG,CAAC;AAAA,MACrD,SAAS,GAAP;AACA,eAAO;AAAA,MACT;AAAA,IACF;AASA,aAASC,QAAO,OAAO;AACrB,UAAI;AACF,eAAO,mBAAmB,KAAK;AAAA,MACjC,SAAS,GAAP;AACA,eAAO;AAAA,MACT;AAAA,IACF;AASA,aAAS,YAAY,OAAO;AAC1B,UAAI,SAAS,wBACT,SAAS,CAAC,GACV;AAEJ,aAAO,OAAO,OAAO,KAAK,KAAK,GAAG;AAChC,YAAI,MAAMD,QAAO,KAAK,CAAC,CAAC,GACpB,QAAQA,QAAO,KAAK,CAAC,CAAC;AAU1B,YAAI,QAAQ,QAAQ,UAAU,QAAQ,OAAO;AAAQ;AACrD,eAAO,GAAG,IAAI;AAAA,MAChB;AAEA,aAAO;AAAA,IACT;AAUA,aAAS,eAAe,KAAK,QAAQ;AACnC,eAAS,UAAU;AAEnB,UAAI,QAAQ,CAAC,GACT,OACA;AAKJ,UAAI,aAAa,OAAO;AAAQ,iBAAS;AAEzC,WAAK,OAAO,KAAK;AACf,YAAID,KAAI,KAAK,KAAK,GAAG,GAAG;AACtB,kBAAQ,IAAI,GAAG;AAMf,cAAI,CAAC,UAAU,UAAU,QAAQ,UAAU,SAAS,MAAM,KAAK,IAAI;AACjE,oBAAQ;AAAA,UACV;AAEA,gBAAME,QAAO,GAAG;AAChB,kBAAQA,QAAO,KAAK;AAMpB,cAAI,QAAQ,QAAQ,UAAU;AAAM;AACpC,gBAAM,KAAK,MAAK,MAAK,KAAK;AAAA,QAC5B;AAAA,MACF;AAEA,aAAO,MAAM,SAAS,SAAS,MAAM,KAAK,GAAG,IAAI;AAAA,IACnD;AAKA,YAAQ,YAAY;AACpB,YAAQ,QAAQ;AAAA;AAAA;;;ACrHhB;AAAA;AAAA;AAEA,QAAI,WAAW;AAAf,QACI,KAAK;AADT,QAEI,sBAAsB;AAF1B,QAGI,SAAS;AAHb,QAII,UAAU;AAJd,QAKI,OAAO;AALX,QAMI,aAAa;AANjB,QAOI,qBAAqB;AAUzB,aAAS,SAAS,KAAK;AACrB,cAAQ,MAAM,MAAM,IAAI,SAAS,EAAE,QAAQ,qBAAqB,EAAE;AAAA,IACpE;AAcA,QAAI,QAAQ;AAAA,MACV,CAAC,KAAK,MAAM;AAAA;AAAA,MACZ,CAAC,KAAK,OAAO;AAAA;AAAA,MACb,SAAS,SAAS,SAAS,KAAK;AAC9B,eAAO,UAAU,IAAI,QAAQ,IAAI,QAAQ,QAAQ,OAAO,GAAG,IAAI;AAAA,MACjE;AAAA,MACA,CAAC,KAAK,UAAU;AAAA;AAAA,MAChB,CAAC,KAAK,QAAQ,CAAC;AAAA;AAAA,MACf,CAAC,KAAK,QAAQ,QAAW,GAAG,CAAC;AAAA;AAAA,MAC7B,CAAC,WAAW,QAAQ,QAAW,CAAC;AAAA;AAAA,MAChC,CAAC,KAAK,YAAY,QAAW,GAAG,CAAC;AAAA;AAAA,IACnC;AAUA,QAAI,SAAS,EAAE,MAAM,GAAG,OAAO,EAAE;AAcjC,aAAS,UAAU,KAAK;AACtB,UAAI;AAEJ,UAAI,OAAO,WAAW;AAAa,oBAAY;AAAA,eACtC,OAAO,eAAW;AAAa,oBAAY;AAAA,eAC3C,OAAO,SAAS;AAAa,oBAAY;AAAA;AAC7C,oBAAY,CAAC;AAElB,UAAI,WAAW,UAAU,YAAY,CAAC;AACtC,YAAM,OAAO;AAEb,UAAI,mBAAmB,CAAC,GACpB,OAAO,OAAO,KACd;AAEJ,UAAI,YAAY,IAAI,UAAU;AAC5B,2BAAmB,IAAI,IAAI,SAAS,IAAI,QAAQ,GAAG,CAAC,CAAC;AAAA,MACvD,WAAW,aAAa,MAAM;AAC5B,2BAAmB,IAAI,IAAI,KAAK,CAAC,CAAC;AAClC,aAAK,OAAO;AAAQ,iBAAO,iBAAiB,GAAG;AAAA,MACjD,WAAW,aAAa,MAAM;AAC5B,aAAK,OAAO,KAAK;AACf,cAAI,OAAO;AAAQ;AACnB,2BAAiB,GAAG,IAAI,IAAI,GAAG;AAAA,QACjC;AAEA,YAAI,iBAAiB,YAAY,QAAW;AAC1C,2BAAiB,UAAU,QAAQ,KAAK,IAAI,IAAI;AAAA,QAClD;AAAA,MACF;AAEA,aAAO;AAAA,IACT;AASA,aAAS,UAAU,QAAQ;AACzB,aACE,WAAW,WACX,WAAW,UACX,WAAW,WACX,WAAW,YACX,WAAW,SACX,WAAW;AAAA,IAEf;AAkBA,aAAS,gBAAgB,SAAS,UAAU;AAC1C,gBAAU,SAAS,OAAO;AAC1B,gBAAU,QAAQ,QAAQ,QAAQ,EAAE;AACpC,iBAAW,YAAY,CAAC;AAExB,UAAI,QAAQ,WAAW,KAAK,OAAO;AACnC,UAAI,WAAW,MAAM,CAAC,IAAI,MAAM,CAAC,EAAE,YAAY,IAAI;AACnD,UAAI,iBAAiB,CAAC,CAAC,MAAM,CAAC;AAC9B,UAAI,eAAe,CAAC,CAAC,MAAM,CAAC;AAC5B,UAAI,eAAe;AACnB,UAAI;AAEJ,UAAI,gBAAgB;AAClB,YAAI,cAAc;AAChB,iBAAO,MAAM,CAAC,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC;AACpC,yBAAe,MAAM,CAAC,EAAE,SAAS,MAAM,CAAC,EAAE;AAAA,QAC5C,OAAO;AACL,iBAAO,MAAM,CAAC,IAAI,MAAM,CAAC;AACzB,yBAAe,MAAM,CAAC,EAAE;AAAA,QAC1B;AAAA,MACF,OAAO;AACL,YAAI,cAAc;AAChB,iBAAO,MAAM,CAAC,IAAI,MAAM,CAAC;AACzB,yBAAe,MAAM,CAAC,EAAE;AAAA,QAC1B,OAAO;AACL,iBAAO,MAAM,CAAC;AAAA,QAChB;AAAA,MACF;AAEA,UAAI,aAAa,SAAS;AACxB,YAAI,gBAAgB,GAAG;AACrB,iBAAO,KAAK,MAAM,CAAC;AAAA,QACrB;AAAA,MACF,WAAW,UAAU,QAAQ,GAAG;AAC9B,eAAO,MAAM,CAAC;AAAA,MAChB,WAAW,UAAU;AACnB,YAAI,gBAAgB;AAClB,iBAAO,KAAK,MAAM,CAAC;AAAA,QACrB;AAAA,MACF,WAAW,gBAAgB,KAAK,UAAU,SAAS,QAAQ,GAAG;AAC5D,eAAO,MAAM,CAAC;AAAA,MAChB;AAEA,aAAO;AAAA,QACL;AAAA,QACA,SAAS,kBAAkB,UAAU,QAAQ;AAAA,QAC7C;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAUA,aAAS,QAAQ,UAAU,MAAM;AAC/B,UAAI,aAAa;AAAI,eAAO;AAE5B,UAAI,QAAQ,QAAQ,KAAK,MAAM,GAAG,EAAE,MAAM,GAAG,EAAE,EAAE,OAAO,SAAS,MAAM,GAAG,CAAC,GACvE,IAAI,KAAK,QACT,OAAO,KAAK,IAAI,CAAC,GACjB,UAAU,OACV,KAAK;AAET,aAAO,KAAK;AACV,YAAI,KAAK,CAAC,MAAM,KAAK;AACnB,eAAK,OAAO,GAAG,CAAC;AAAA,QAClB,WAAW,KAAK,CAAC,MAAM,MAAM;AAC3B,eAAK,OAAO,GAAG,CAAC;AAChB;AAAA,QACF,WAAW,IAAI;AACb,cAAI,MAAM;AAAG,sBAAU;AACvB,eAAK,OAAO,GAAG,CAAC;AAChB;AAAA,QACF;AAAA,MACF;AAEA,UAAI;AAAS,aAAK,QAAQ,EAAE;AAC5B,UAAI,SAAS,OAAO,SAAS;AAAM,aAAK,KAAK,EAAE;AAE/C,aAAO,KAAK,KAAK,GAAG;AAAA,IACtB;AAgBA,aAAS,IAAI,SAAS,UAAU,QAAQ;AACtC,gBAAU,SAAS,OAAO;AAC1B,gBAAU,QAAQ,QAAQ,QAAQ,EAAE;AAEpC,UAAI,EAAE,gBAAgB,MAAM;AAC1B,eAAO,IAAI,IAAI,SAAS,UAAU,MAAM;AAAA,MAC1C;AAEA,UAAI,UAAU,WAAW,OAAO,aAAa,OAAO,KAChD,eAAe,MAAM,MAAM,GAC3B,OAAO,OAAO,UACd,MAAM,MACN,IAAI;AAaR,UAAI,aAAa,QAAQ,aAAa,MAAM;AAC1C,iBAAS;AACT,mBAAW;AAAA,MACb;AAEA,UAAI,UAAU,eAAe,OAAO;AAAQ,iBAAS,GAAG;AAExD,iBAAW,UAAU,QAAQ;AAK7B,kBAAY,gBAAgB,WAAW,IAAI,QAAQ;AACnD,iBAAW,CAAC,UAAU,YAAY,CAAC,UAAU;AAC7C,UAAI,UAAU,UAAU,WAAW,YAAY,SAAS;AACxD,UAAI,WAAW,UAAU,YAAY,SAAS,YAAY;AAC1D,gBAAU,UAAU;AAMpB,UACE,UAAU,aAAa,YACrB,UAAU,iBAAiB,KAAK,mBAAmB,KAAK,OAAO,MAChE,CAAC,UAAU,YACT,UAAU,YACT,UAAU,eAAe,KACzB,CAAC,UAAU,IAAI,QAAQ,IAC3B;AACA,qBAAa,CAAC,IAAI,CAAC,QAAQ,UAAU;AAAA,MACvC;AAEA,aAAO,IAAI,aAAa,QAAQ,KAAK;AACnC,sBAAc,aAAa,CAAC;AAE5B,YAAI,OAAO,gBAAgB,YAAY;AACrC,oBAAU,YAAY,SAAS,GAAG;AAClC;AAAA,QACF;AAEA,gBAAQ,YAAY,CAAC;AACrB,cAAM,YAAY,CAAC;AAEnB,YAAI,UAAU,OAAO;AACnB,cAAI,GAAG,IAAI;AAAA,QACb,WAAW,aAAa,OAAO,OAAO;AACpC,kBAAQ,UAAU,MACd,QAAQ,YAAY,KAAK,IACzB,QAAQ,QAAQ,KAAK;AAEzB,cAAI,CAAC,OAAO;AACV,gBAAI,aAAa,OAAO,YAAY,CAAC,GAAG;AACtC,kBAAI,GAAG,IAAI,QAAQ,MAAM,GAAG,KAAK;AACjC,wBAAU,QAAQ,MAAM,QAAQ,YAAY,CAAC,CAAC;AAAA,YAChD,OAAO;AACL,kBAAI,GAAG,IAAI,QAAQ,MAAM,KAAK;AAC9B,wBAAU,QAAQ,MAAM,GAAG,KAAK;AAAA,YAClC;AAAA,UACF;AAAA,QACF,WAAY,QAAQ,MAAM,KAAK,OAAO,GAAI;AACxC,cAAI,GAAG,IAAI,MAAM,CAAC;AAClB,oBAAU,QAAQ,MAAM,GAAG,MAAM,KAAK;AAAA,QACxC;AAEA,YAAI,GAAG,IAAI,IAAI,GAAG,MAChB,YAAY,YAAY,CAAC,IAAI,SAAS,GAAG,KAAK,KAAK;AAOrD,YAAI,YAAY,CAAC;AAAG,cAAI,GAAG,IAAI,IAAI,GAAG,EAAE,YAAY;AAAA,MACtD;AAOA,UAAI;AAAQ,YAAI,QAAQ,OAAO,IAAI,KAAK;AAKxC,UACI,YACC,SAAS,WACT,IAAI,SAAS,OAAO,CAAC,MAAM,QAC1B,IAAI,aAAa,MAAM,SAAS,aAAa,KACjD;AACA,YAAI,WAAW,QAAQ,IAAI,UAAU,SAAS,QAAQ;AAAA,MACxD;AAMA,UAAI,IAAI,SAAS,OAAO,CAAC,MAAM,OAAO,UAAU,IAAI,QAAQ,GAAG;AAC7D,YAAI,WAAW,MAAM,IAAI;AAAA,MAC3B;AAOA,UAAI,CAAC,SAAS,IAAI,MAAM,IAAI,QAAQ,GAAG;AACrC,YAAI,OAAO,IAAI;AACf,YAAI,OAAO;AAAA,MACb;AAKA,UAAI,WAAW,IAAI,WAAW;AAE9B,UAAI,IAAI,MAAM;AACZ,gBAAQ,IAAI,KAAK,QAAQ,GAAG;AAE5B,YAAI,CAAC,OAAO;AACV,cAAI,WAAW,IAAI,KAAK,MAAM,GAAG,KAAK;AACtC,cAAI,WAAW,mBAAmB,mBAAmB,IAAI,QAAQ,CAAC;AAElE,cAAI,WAAW,IAAI,KAAK,MAAM,QAAQ,CAAC;AACvC,cAAI,WAAW,mBAAmB,mBAAmB,IAAI,QAAQ,CAAC;AAAA,QACpE,OAAO;AACL,cAAI,WAAW,mBAAmB,mBAAmB,IAAI,IAAI,CAAC;AAAA,QAChE;AAEA,YAAI,OAAO,IAAI,WAAW,IAAI,WAAU,MAAK,IAAI,WAAW,IAAI;AAAA,MAClE;AAEA,UAAI,SAAS,IAAI,aAAa,WAAW,UAAU,IAAI,QAAQ,KAAK,IAAI,OACpE,IAAI,WAAU,OAAM,IAAI,OACxB;AAKJ,UAAI,OAAO,IAAI,SAAS;AAAA,IAC1B;AAeA,aAAS,IAAI,MAAM,OAAO,IAAI;AAC5B,UAAI,MAAM;AAEV,cAAQ,MAAM;AAAA,QACZ,KAAK;AACH,cAAI,aAAa,OAAO,SAAS,MAAM,QAAQ;AAC7C,qBAAS,MAAM,GAAG,OAAO,KAAK;AAAA,UAChC;AAEA,cAAI,IAAI,IAAI;AACZ;AAAA,QAEF,KAAK;AACH,cAAI,IAAI,IAAI;AAEZ,cAAI,CAAC,SAAS,OAAO,IAAI,QAAQ,GAAG;AAClC,gBAAI,OAAO,IAAI;AACf,gBAAI,IAAI,IAAI;AAAA,UACd,WAAW,OAAO;AAChB,gBAAI,OAAO,IAAI,WAAU,MAAK;AAAA,UAChC;AAEA;AAAA,QAEF,KAAK;AACH,cAAI,IAAI,IAAI;AAEZ,cAAI,IAAI;AAAM,qBAAS,MAAK,IAAI;AAChC,cAAI,OAAO;AACX;AAAA,QAEF,KAAK;AACH,cAAI,IAAI,IAAI;AAEZ,cAAI,KAAK,KAAK,KAAK,GAAG;AACpB,oBAAQ,MAAM,MAAM,GAAG;AACvB,gBAAI,OAAO,MAAM,IAAI;AACrB,gBAAI,WAAW,MAAM,KAAK,GAAG;AAAA,UAC/B,OAAO;AACL,gBAAI,WAAW;AACf,gBAAI,OAAO;AAAA,UACb;AAEA;AAAA,QAEF,KAAK;AACH,cAAI,WAAW,MAAM,YAAY;AACjC,cAAI,UAAU,CAAC;AACf;AAAA,QAEF,KAAK;AAAA,QACL,KAAK;AACH,cAAI,OAAO;AACT,gBAAI,OAAO,SAAS,aAAa,MAAM;AACvC,gBAAI,IAAI,IAAI,MAAM,OAAO,CAAC,MAAM,OAAO,OAAO,QAAQ;AAAA,UACxD,OAAO;AACL,gBAAI,IAAI,IAAI;AAAA,UACd;AACA;AAAA,QAEF,KAAK;AAAA,QACL,KAAK;AACH,cAAI,IAAI,IAAI,mBAAmB,KAAK;AACpC;AAAA,QAEF,KAAK;AACH,cAAI,QAAQ,MAAM,QAAQ,GAAG;AAE7B,cAAI,CAAC,OAAO;AACV,gBAAI,WAAW,MAAM,MAAM,GAAG,KAAK;AACnC,gBAAI,WAAW,mBAAmB,mBAAmB,IAAI,QAAQ,CAAC;AAElE,gBAAI,WAAW,MAAM,MAAM,QAAQ,CAAC;AACpC,gBAAI,WAAW,mBAAmB,mBAAmB,IAAI,QAAQ,CAAC;AAAA,UACpE,OAAO;AACL,gBAAI,WAAW,mBAAmB,mBAAmB,KAAK,CAAC;AAAA,UAC7D;AAAA,MACJ;AAEA,eAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,YAAI,MAAM,MAAM,CAAC;AAEjB,YAAI,IAAI,CAAC;AAAG,cAAI,IAAI,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,EAAE,YAAY;AAAA,MACpD;AAEA,UAAI,OAAO,IAAI,WAAW,IAAI,WAAU,MAAK,IAAI,WAAW,IAAI;AAEhE,UAAI,SAAS,IAAI,aAAa,WAAW,UAAU,IAAI,QAAQ,KAAK,IAAI,OACpE,IAAI,WAAU,OAAM,IAAI,OACxB;AAEJ,UAAI,OAAO,IAAI,SAAS;AAExB,aAAO;AAAA,IACT;AASA,aAAS,SAAS,WAAW;AAC3B,UAAI,CAAC,aAAa,eAAe,OAAO;AAAW,oBAAY,GAAG;AAElE,UAAI,OACA,MAAM,MACN,OAAO,IAAI,MACX,WAAW,IAAI;AAEnB,UAAI,YAAY,SAAS,OAAO,SAAS,SAAS,CAAC,MAAM;AAAK,oBAAY;AAE1E,UAAI,SACF,YACE,IAAI,YAAY,IAAI,WAAY,UAAU,IAAI,QAAQ,IAAI,OAAO;AAErE,UAAI,IAAI,UAAU;AAChB,kBAAU,IAAI;AACd,YAAI,IAAI;AAAU,oBAAU,MAAK,IAAI;AACrC,kBAAU;AAAA,MACZ,WAAW,IAAI,UAAU;AACvB,kBAAU,MAAK,IAAI;AACnB,kBAAU;AAAA,MACZ,WACE,IAAI,aAAa,WACjB,UAAU,IAAI,QAAQ,KACtB,CAAC,QACD,IAAI,aAAa,KACjB;AAKA,kBAAU;AAAA,MACZ;AAOA,UAAI,KAAK,KAAK,SAAS,CAAC,MAAM,OAAQ,KAAK,KAAK,IAAI,QAAQ,KAAK,CAAC,IAAI,MAAO;AAC3E,gBAAQ;AAAA,MACV;AAEA,gBAAU,OAAO,IAAI;AAErB,cAAQ,aAAa,OAAO,IAAI,QAAQ,UAAU,IAAI,KAAK,IAAI,IAAI;AACnE,UAAI;AAAO,kBAAU,QAAQ,MAAM,OAAO,CAAC,IAAI,MAAK,QAAQ;AAE5D,UAAI,IAAI;AAAM,kBAAU,IAAI;AAE5B,aAAO;AAAA,IACT;AAEA,QAAI,YAAY,EAAE,KAAU,SAAmB;AAM/C,QAAI,kBAAkB;AACtB,QAAI,WAAW;AACf,QAAI,WAAW;AACf,QAAI,KAAK;AAET,WAAO,UAAU;AAAA;AAAA;;;AC5kBjB,SAAS,4BAA4B,UAAU,YAAY;AAAE,MAAI,CAAC,OAAO,UAAU,eAAe,KAAK,UAAU,UAAU,GAAG;AAAE,UAAM,IAAI,UAAU,gDAAgD;AAAA,EAAG;AAAE,SAAO;AAAU;AAC1N,IAAI,KAAK;AACT,SAAS,2BAA2B,MAAM;AAAE,SAAO,eAAe,OAAO,MAAM;AAAM;AAErF,IAAI,2BAAwC,2CAA2B,yBAAyB;AAChG,IAAqB,iBAArB,cAA4C,WAAW;AAAA,EACrD,cAAc;AACZ,UAAM,GAAG,SAAS;AAClB,WAAO,eAAe,MAAM,0BAA0B;AAAA,MACpD,UAAU;AAAA,MACV,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA;AAAA,EAEA,2BAA2B,IAAI;AAC7B,gCAA4B,MAAM,wBAAwB,EAAE,wBAAwB,IAAI;AAAA,EAC1F;AAAA,EACA,MAAM,iBAAiB,MAAM,SAAS;AACpC,QAAI,YAAY,QAAQ;AACtB,gBAAU,CAAC;AAAA,IACb;AAEA,QAAI;AACF,UAAI,KAAK,aAAa;AACpB,eAAO,MAAM,KAAK,sBAAsB,IAAI;AAAA,MAC9C;AACA,YAAM,cAAc,MAAM,4BAA4B,MAAM,wBAAwB,EAAE,wBAAwB,EAAE,IAAI,EAAE,QAAQ,QAAQ,MAAM;AAC5I,UAAI,CAAC,KAAK,KAAK,SAAS,EAAE,MAAM,KAAK,EAAE;AAAG,eAAO;AACjD,WAAK,KAAK,aAAa,KAAK,IAAI;AAAA,QAC9B;AAAA,MACF,CAAC;AACD,aAAO,MAAM,KAAK,sBAAsB,KAAK,KAAK,QAAQ,KAAK,EAAE,CAAC;AAAA,IACpE,SAAS,KAAP;AACA,UAAI;AACJ,WAAK,OAAO,OAAO,UAAU,aAAa,IAAI,UAAU,OAAO,SAAS,WAAW,UAAU,cAAc;AAEzG,eAAO;AAAA,MACT;AACA,WAAK,KAAK,aAAa,KAAK,IAAI;AAAA,QAC9B,aAAa;AAAA,MACf,CAAC;AACD,WAAK,KAAK,KAAK,gBAAgB,MAAM,GAAG;AACxC,YAAM;AAAA,IACR;AAAA,EACF;AACF;;;AClCA,IAAM,UAAU;AAIhB,IAAM,UAAU;AAChB,IAAM,WAAW,OAAO,SAAS;AACjC,IAAM,WAAW,OAAO,SAAS;AACjC,IAAM,aAAa,OAAO,WAAW;AACrC,IAAM,MAAM,OAAO,gBAAgB,aAAa,IAAI,YAAY,IAAI;AACpE,IAAM,MAAM,OAAO,gBAAgB,aAAa,IAAI,YAAY,IAAI;AACpE,IAAM,QAAQ;AACd,IAAM,SAAS,MAAM,UAAU,MAAM,KAAK,KAAK;AAC/C,IAAM,UAAU,CAAC,MAAM;AACnB,MAAI,MAAM,CAAC;AACX,IAAE,QAAQ,CAAC,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC;AAC9B,SAAO;AACX,GAAG,MAAM;AACT,IAAM,QAAQ;AACd,IAAM,UAAU,OAAO,aAAa,KAAK,MAAM;AAC/C,IAAM,WAAW,OAAO,WAAW,SAAS,aACtC,WAAW,KAAK,KAAK,UAAU,IAC/B,CAAC,OAAO,IAAI,WAAW,MAAM,UAAU,MAAM,KAAK,IAAI,CAAC,CAAC;AAC9D,IAAM,aAAa,CAAC,QAAQ,IACvB,QAAQ,MAAM,EAAE,EAAE,QAAQ,UAAU,CAAC,OAAO,MAAM,MAAM,MAAM,GAAG;AACtE,IAAM,WAAW,CAAC,MAAM,EAAE,QAAQ,qBAAqB,EAAE;AAIzD,IAAM,eAAe,CAAC,QAAQ;AAE1B,MAAI,KAAK,IAAI,IAAI,IAAI,MAAM;AAC3B,QAAM,MAAM,IAAI,SAAS;AACzB,WAAS,IAAI,GAAG,IAAI,IAAI,UAAS;AAC7B,SAAK,KAAK,IAAI,WAAW,GAAG,KAAK,QAC5B,KAAK,IAAI,WAAW,GAAG,KAAK,QAC5B,KAAK,IAAI,WAAW,GAAG,KAAK;AAC7B,YAAM,IAAI,UAAU,yBAAyB;AACjD,UAAO,MAAM,KAAO,MAAM,IAAK;AAC/B,WAAO,OAAO,OAAO,KAAK,EAAE,IACtB,OAAO,OAAO,KAAK,EAAE,IACrB,OAAO,OAAO,IAAI,EAAE,IACpB,OAAO,MAAM,EAAE;AAAA,EACzB;AACA,SAAO,MAAM,IAAI,MAAM,GAAG,MAAM,CAAC,IAAI,MAAM,UAAU,GAAG,IAAI;AAChE;AAMA,IAAM,QAAQ,WAAW,CAAC,QAAQ,KAAK,GAAG,IACpC,aAAa,CAAC,QAAQ,OAAO,KAAK,KAAK,QAAQ,EAAE,SAAS,QAAQ,IAC9D;AACV,IAAM,kBAAkB,aAClB,CAAC,QAAQ,OAAO,KAAK,GAAG,EAAE,SAAS,QAAQ,IAC3C,CAAC,QAAQ;AAEP,QAAM,UAAU;AAChB,MAAI,OAAO,CAAC;AACZ,WAAS,IAAI,GAAG,IAAI,IAAI,QAAQ,IAAI,GAAG,KAAK,SAAS;AACjD,SAAK,KAAK,QAAQ,MAAM,MAAM,IAAI,SAAS,GAAG,IAAI,OAAO,CAAC,CAAC;AAAA,EAC/D;AACA,SAAO,MAAM,KAAK,KAAK,EAAE,CAAC;AAC9B;AAMJ,IAAM,iBAAiB,CAAC,KAAK,UAAU,UAAU,UAAU,WAAW,gBAAgB,GAAG,CAAC,IAAI,gBAAgB,GAAG;AAIjH,IAAM,UAAU,CAAC,MAAM;AACnB,MAAI,EAAE,SAAS,GAAG;AACd,QAAI,KAAK,EAAE,WAAW,CAAC;AACvB,WAAO,KAAK,MAAO,IACb,KAAK,OAAS,QAAQ,MAAQ,OAAO,CAAE,IACnC,QAAQ,MAAQ,KAAK,EAAK,IACzB,QAAQ,MAAS,OAAO,KAAM,EAAK,IAChC,QAAQ,MAAS,OAAO,IAAK,EAAK,IAClC,QAAQ,MAAQ,KAAK,EAAK;AAAA,EAC5C,OACK;AACD,QAAI,KAAK,SACF,EAAE,WAAW,CAAC,IAAI,SAAU,QAC5B,EAAE,WAAW,CAAC,IAAI;AACzB,WAAQ,QAAQ,MAAS,OAAO,KAAM,CAAK,IACrC,QAAQ,MAAS,OAAO,KAAM,EAAK,IACnC,QAAQ,MAAS,OAAO,IAAK,EAAK,IAClC,QAAQ,MAAQ,KAAK,EAAK;AAAA,EACpC;AACJ;AACA,IAAM,UAAU;AAMhB,IAAM,OAAO,CAAC,MAAM,EAAE,QAAQ,SAAS,OAAO;AAE9C,IAAM,UAAU,aACV,CAAC,MAAM,OAAO,KAAK,GAAG,MAAM,EAAE,SAAS,QAAQ,IAC/C,MACI,CAAC,MAAM,gBAAgB,IAAI,OAAO,CAAC,CAAC,IACpC,CAAC,MAAM,MAAM,KAAK,CAAC,CAAC;AAM9B,IAAM,SAAS,CAAC,KAAK,UAAU,UAAU,UACnC,WAAW,QAAQ,GAAG,CAAC,IACvB,QAAQ,GAAG;AAKjB,IAAM,YAAY,CAAC,QAAQ,OAAO,KAAK,IAAI;AAI3C,IAAM,UAAU;AAChB,IAAM,UAAU,CAAC,SAAS;AACtB,UAAQ,KAAK,QAAQ;AAAA,IACjB,KAAK;AACD,UAAI,MAAO,IAAO,KAAK,WAAW,CAAC,MAAM,MACjC,KAAO,KAAK,WAAW,CAAC,MAAM,MAC9B,KAAO,KAAK,WAAW,CAAC,MAAM,IAC/B,KAAO,KAAK,WAAW,CAAC,GAAI,SAAS,KAAK;AACjD,aAAQ,SAAS,WAAW,MAAM,KAAM,IAClC,SAAS,SAAS,QAAS,KAAM;AAAA,IAC3C,KAAK;AACD,aAAO,SAAU,KAAO,KAAK,WAAW,CAAC,MAAM,MACvC,KAAO,KAAK,WAAW,CAAC,MAAM,IAC/B,KAAO,KAAK,WAAW,CAAC,CAAE;AAAA,IACrC;AACI,aAAO,SAAU,KAAO,KAAK,WAAW,CAAC,MAAM,IACxC,KAAO,KAAK,WAAW,CAAC,CAAE;AAAA,EACzC;AACJ;AAMA,IAAM,OAAO,CAAC,MAAM,EAAE,QAAQ,SAAS,OAAO;AAI9C,IAAM,eAAe,CAAC,QAAQ;AAE1B,QAAM,IAAI,QAAQ,QAAQ,EAAE;AAC5B,MAAI,CAAC,MAAM,KAAK,GAAG;AACf,UAAM,IAAI,UAAU,mBAAmB;AAC3C,SAAO,KAAK,MAAM,KAAK,IAAI,SAAS,EAAE;AACtC,MAAI,KAAK,MAAM,IAAI,IAAI;AACvB,WAAS,IAAI,GAAG,IAAI,IAAI,UAAS;AAC7B,UAAM,OAAO,IAAI,OAAO,GAAG,CAAC,KAAK,KAC3B,OAAO,IAAI,OAAO,GAAG,CAAC,KAAK,MAC1B,KAAK,OAAO,IAAI,OAAO,GAAG,CAAC,MAAM,KACjC,KAAK,OAAO,IAAI,OAAO,GAAG,CAAC;AAClC,WAAO,OAAO,KAAK,QAAQ,OAAO,KAAK,GAAG,IACpC,OAAO,KAAK,QAAQ,OAAO,KAAK,KAAK,OAAO,IAAI,GAAG,IAC/C,QAAQ,OAAO,KAAK,KAAK,OAAO,IAAI,KAAK,MAAM,GAAG;AAAA,EAChE;AACA,SAAO;AACX;AAMA,IAAM,QAAQ,WAAW,CAAC,QAAQ,KAAK,SAAS,GAAG,CAAC,IAC9C,aAAa,CAAC,QAAQ,OAAO,KAAK,KAAK,QAAQ,EAAE,SAAS,QAAQ,IAC9D;AAEV,IAAM,gBAAgB,aAChB,CAAC,MAAM,SAAS,OAAO,KAAK,GAAG,QAAQ,CAAC,IACxC,CAAC,MAAM,SAAS,MAAM,CAAC,EAAE,MAAM,EAAE,EAAE,IAAI,OAAK,EAAE,WAAW,CAAC,CAAC,CAAC;AAIlE,IAAM,eAAe,CAAC,MAAM,cAAc,OAAO,CAAC,CAAC;AAEnD,IAAM,UAAU,aACV,CAAC,MAAM,OAAO,KAAK,GAAG,QAAQ,EAAE,SAAS,MAAM,IAC/C,MACI,CAAC,MAAM,IAAI,OAAO,cAAc,CAAC,CAAC,IAClC,CAAC,MAAM,KAAK,MAAM,CAAC,CAAC;AAC9B,IAAM,SAAS,CAAC,MAAM,SAAS,EAAE,QAAQ,SAAS,CAAC,OAAO,MAAM,MAAM,MAAM,GAAG,CAAC;AAMhF,IAAM,SAAS,CAAC,QAAQ,QAAQ,OAAO,GAAG,CAAC;AAK3C,IAAM,UAAU,CAAC,QAAQ;AACrB,MAAI,OAAO,QAAQ;AACf,WAAO;AACX,QAAM,IAAI,IAAI,QAAQ,QAAQ,EAAE,EAAE,QAAQ,WAAW,EAAE;AACvD,SAAO,CAAC,oBAAoB,KAAK,CAAC,KAAK,CAAC,oBAAoB,KAAK,CAAC;AACtE;AAEA,IAAM,UAAU,CAAC,MAAM;AACnB,SAAO;AAAA,IACH,OAAO;AAAA,IAAG,YAAY;AAAA,IAAO,UAAU;AAAA,IAAM,cAAc;AAAA,EAC/D;AACJ;AAIA,IAAM,eAAe,WAAY;AAC7B,QAAM,OAAO,CAAC,MAAM,SAAS,OAAO,eAAe,OAAO,WAAW,MAAM,QAAQ,IAAI,CAAC;AACxF,OAAK,cAAc,WAAY;AAAE,WAAO,OAAO,IAAI;AAAA,EAAG,CAAC;AACvD,OAAK,YAAY,SAAU,SAAS;AAAE,WAAO,OAAO,MAAM,OAAO;AAAA,EAAG,CAAC;AACrE,OAAK,eAAe,WAAY;AAAE,WAAO,OAAO,MAAM,IAAI;AAAA,EAAG,CAAC;AAC9D,OAAK,eAAe,WAAY;AAAE,WAAO,OAAO,MAAM,IAAI;AAAA,EAAG,CAAC;AAC9D,OAAK,gBAAgB,WAAY;AAAE,WAAO,aAAa,IAAI;AAAA,EAAG,CAAC;AACnE;AAIA,IAAM,mBAAmB,WAAY;AACjC,QAAM,OAAO,CAAC,MAAM,SAAS,OAAO,eAAe,WAAW,WAAW,MAAM,QAAQ,IAAI,CAAC;AAC5F,OAAK,YAAY,SAAU,SAAS;AAAE,WAAO,eAAe,MAAM,OAAO;AAAA,EAAG,CAAC;AAC7E,OAAK,eAAe,WAAY;AAAE,WAAO,eAAe,MAAM,IAAI;AAAA,EAAG,CAAC;AACtE,OAAK,eAAe,WAAY;AAAE,WAAO,eAAe,MAAM,IAAI;AAAA,EAAG,CAAC;AAC1E;AAIA,IAAM,iBAAiB,MAAM;AACzB,eAAa;AACb,mBAAiB;AACrB;AACA,IAAM,UAAU;AAAA,EACZ;AAAA,EACA;AAAA,EACA,MAAM;AAAA,EACN;AAAA,EACA,MAAM;AAAA,EACN;AAAA,EACA,YAAY;AAAA,EACZ,UAAU;AAAA,EACV;AAAA,EACA;AAAA,EACA,WAAW;AAAA,EACX;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ;;;ACvPA,uBAAgB;;;ACzBhB,SAAS,QAAQ,KAAK;AAAE;AAA2B,SAAO,UAAU,cAAc,OAAO,UAAU,YAAY,OAAO,OAAO,WAAW,SAAUC,MAAK;AAAE,WAAO,OAAOA;AAAA,EAAK,IAAI,SAAUA,MAAK;AAAE,WAAOA,QAAO,cAAc,OAAO,UAAUA,KAAI,gBAAgB,UAAUA,SAAQ,OAAO,YAAY,WAAW,OAAOA;AAAA,EAAK,GAAG,QAAQ,GAAG;AAAG;AAE/U,SAAS,kBAAkB,QAAQ,OAAO;AAAE,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AAAE,QAAI,aAAa,MAAM,CAAC;AAAG,eAAW,aAAa,WAAW,cAAc;AAAO,eAAW,eAAe;AAAM,QAAI,WAAW;AAAY,iBAAW,WAAW;AAAM,WAAO,eAAe,QAAQ,WAAW,KAAK,UAAU;AAAA,EAAG;AAAE;AAE5T,SAAS,aAAa,aAAa,YAAY,aAAa;AAAE,MAAI;AAAY,sBAAkB,YAAY,WAAW,UAAU;AAAG,MAAI;AAAa,sBAAkB,aAAa,WAAW;AAAG,SAAO,eAAe,aAAa,aAAa,EAAE,UAAU,MAAM,CAAC;AAAG,SAAO;AAAa;AAE5R,SAAS,gBAAgB,UAAU,aAAa;AAAE,MAAI,EAAE,oBAAoB,cAAc;AAAE,UAAM,IAAI,UAAU,mCAAmC;AAAA,EAAG;AAAE;AAExJ,SAAS,UAAU,UAAU,YAAY;AAAE,MAAI,OAAO,eAAe,cAAc,eAAe,MAAM;AAAE,UAAM,IAAI,UAAU,oDAAoD;AAAA,EAAG;AAAE,WAAS,YAAY,OAAO,OAAO,cAAc,WAAW,WAAW,EAAE,aAAa,EAAE,OAAO,UAAU,UAAU,MAAM,cAAc,KAAK,EAAE,CAAC;AAAG,SAAO,eAAe,UAAU,aAAa,EAAE,UAAU,MAAM,CAAC;AAAG,MAAI;AAAY,oBAAgB,UAAU,UAAU;AAAG;AAEnc,SAAS,aAAa,SAAS;AAAE,MAAI,4BAA4B,0BAA0B;AAAG,SAAO,SAAS,uBAAuB;AAAE,QAAI,QAAQ,gBAAgB,OAAO,GAAG;AAAQ,QAAI,2BAA2B;AAAE,UAAI,YAAY,gBAAgB,IAAI,EAAE;AAAa,eAAS,QAAQ,UAAU,OAAO,WAAW,SAAS;AAAA,IAAG,OAAO;AAAE,eAAS,MAAM,MAAM,MAAM,SAAS;AAAA,IAAG;AAAE,WAAO,2BAA2B,MAAM,MAAM;AAAA,EAAG;AAAG;AAExa,SAAS,2BAA2BC,OAAM,MAAM;AAAE,MAAI,SAAS,QAAQ,IAAI,MAAM,YAAY,OAAO,SAAS,aAAa;AAAE,WAAO;AAAA,EAAM,WAAW,SAAS,QAAQ;AAAE,UAAM,IAAI,UAAU,0DAA0D;AAAA,EAAG;AAAE,SAAO,uBAAuBA,KAAI;AAAG;AAE/R,SAAS,uBAAuBA,OAAM;AAAE,MAAIA,UAAS,QAAQ;AAAE,UAAM,IAAI,eAAe,2DAA2D;AAAA,EAAG;AAAE,SAAOA;AAAM;AAErK,SAAS,iBAAiB,OAAO;AAAE,MAAI,SAAS,OAAO,QAAQ,aAAa,oBAAI,IAAI,IAAI;AAAW,qBAAmB,SAASC,kBAAiBC,QAAO;AAAE,QAAIA,WAAU,QAAQ,CAAC,kBAAkBA,MAAK;AAAG,aAAOA;AAAO,QAAI,OAAOA,WAAU,YAAY;AAAE,YAAM,IAAI,UAAU,oDAAoD;AAAA,IAAG;AAAE,QAAI,OAAO,WAAW,aAAa;AAAE,UAAI,OAAO,IAAIA,MAAK;AAAG,eAAO,OAAO,IAAIA,MAAK;AAAG,aAAO,IAAIA,QAAO,OAAO;AAAA,IAAG;AAAE,aAAS,UAAU;AAAE,aAAO,WAAWA,QAAO,WAAW,gBAAgB,IAAI,EAAE,WAAW;AAAA,IAAG;AAAE,YAAQ,YAAY,OAAO,OAAOA,OAAM,WAAW,EAAE,aAAa,EAAE,OAAO,SAAS,YAAY,OAAO,UAAU,MAAM,cAAc,KAAK,EAAE,CAAC;AAAG,WAAO,gBAAgB,SAASA,MAAK;AAAA,EAAG;AAAG,SAAO,iBAAiB,KAAK;AAAG;AAEtvB,SAAS,WAAW,QAAQ,MAAM,OAAO;AAAE,MAAI,0BAA0B,GAAG;AAAE,iBAAa,QAAQ,UAAU,KAAK;AAAA,EAAG,OAAO;AAAE,iBAAa,SAASC,YAAWC,SAAQC,OAAMH,QAAO;AAAE,UAAI,IAAI,CAAC,IAAI;AAAG,QAAE,KAAK,MAAM,GAAGG,KAAI;AAAG,UAAI,cAAc,SAAS,KAAK,MAAMD,SAAQ,CAAC;AAAG,UAAI,WAAW,IAAI,YAAY;AAAG,UAAIF;AAAO,wBAAgB,UAAUA,OAAM,SAAS;AAAG,aAAO;AAAA,IAAU;AAAA,EAAG;AAAE,SAAO,WAAW,MAAM,MAAM,SAAS;AAAG;AAExa,SAAS,4BAA4B;AAAE,MAAI,OAAO,YAAY,eAAe,CAAC,QAAQ;AAAW,WAAO;AAAO,MAAI,QAAQ,UAAU;AAAM,WAAO;AAAO,MAAI,OAAO,UAAU;AAAY,WAAO;AAAM,MAAI;AAAE,YAAQ,UAAU,QAAQ,KAAK,QAAQ,UAAU,SAAS,CAAC,GAAG,WAAY;AAAA,IAAC,CAAC,CAAC;AAAG,WAAO;AAAA,EAAM,SAAS,GAAP;AAAY,WAAO;AAAA,EAAO;AAAE;AAExU,SAAS,kBAAkB,IAAI;AAAE,SAAO,SAAS,SAAS,KAAK,EAAE,EAAE,QAAQ,eAAe,MAAM;AAAI;AAEpG,SAAS,gBAAgB,GAAG,GAAG;AAAE,oBAAkB,OAAO,iBAAiB,OAAO,eAAe,KAAK,IAAI,SAASI,iBAAgBC,IAAGC,IAAG;AAAE,IAAAD,GAAE,YAAYC;AAAG,WAAOD;AAAA,EAAG;AAAG,SAAO,gBAAgB,GAAG,CAAC;AAAG;AAEvM,SAAS,gBAAgB,GAAG;AAAE,oBAAkB,OAAO,iBAAiB,OAAO,eAAe,KAAK,IAAI,SAASE,iBAAgBF,IAAG;AAAE,WAAOA,GAAE,aAAa,OAAO,eAAeA,EAAC;AAAA,EAAG;AAAG,SAAO,gBAAgB,CAAC;AAAG;AAEnN,IAAI,gBAA6B,yBAAU,QAAQ;AACjD,YAAUG,gBAAe,MAAM;AAE/B,MAAI,SAAS,aAAaA,cAAa;AAEvC,WAASA,eAAc,SAAS;AAC9B,QAAI;AAEJ,QAAI,aAAa,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI;AACrF,QAAI,MAAM,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI;AAC9E,QAAI,MAAM,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI;AAE9E,oBAAgB,MAAMA,cAAa;AAEnC,YAAQ,OAAO,KAAK,MAAM,OAAO;AACjC,UAAM,kBAAkB;AACxB,UAAM,mBAAmB;AACzB,UAAM,eAAe;AAErB,QAAI,cAAc,MAAM;AACtB,iBAAW,eAAe,OAAO,WAAW,SAAS,CAAC;AAAA,IACxD;AAEA,QAAI,OAAO,MAAM;AACf,UAAI,YAAY,IAAI,UAAU,cAAc,KAAK;AACjD,UAAI,SAAS,IAAI,UAAU;AAC3B,UAAI,MAAM,IAAI,OAAO;AACrB,UAAI,SAAS,MAAM,IAAI,UAAU,IAAI;AACrC,UAAI,OAAO,MAAM,IAAI,QAAQ,KAAK,KAAK;AACvC,iBAAW,sCAAsC,OAAO,QAAQ,SAAS,EAAE,OAAO,KAAK,mBAAmB,EAAE,OAAO,QAAQ,mBAAmB,EAAE,OAAO,MAAM,gBAAgB,EAAE,OAAO,WAAW,GAAG;AAAA,IACtM;AAEA,UAAM,UAAU;AAChB,WAAO;AAAA,EACT;AAEA,SAAO,aAAaA,cAAa;AACnC,EAAgB,iCAAiB,KAAK,CAAC;AAEvC,IAAO,gBAAQ;;;AClEf,IAAI,YAAY;AAIT,SAAS,IAAI,KAAK;AACvB,MAAI,CAAC;AAAW;AAChB,UAAQ,IAAI,GAAG;AACjB;;;ACIe,SAAR,OAAwB;AAE7B,SAAO,uCAAuC,QAAQ,SAAS,SAAU,GAAG;AAC1E,QAAI,IAAI,KAAK,OAAO,IAAI,KAAK;AAC7B,QAAI,IAAI,MAAM,MAAM,IAAI,IAAI,IAAM;AAClC,WAAO,EAAE,SAAS,EAAE;AAAA,EACtB,CAAC;AACH;;;AHnBA,SAAS,eAAe,KAAK,GAAG;AAAE,SAAO,gBAAgB,GAAG,KAAK,sBAAsB,KAAK,CAAC,KAAK,4BAA4B,KAAK,CAAC,KAAK,iBAAiB;AAAG;AAE7J,SAAS,mBAAmB;AAAE,QAAM,IAAI,UAAU,2IAA2I;AAAG;AAEhM,SAAS,4BAA4B,GAAG,QAAQ;AAAE,MAAI,CAAC;AAAG;AAAQ,MAAI,OAAO,MAAM;AAAU,WAAO,kBAAkB,GAAG,MAAM;AAAG,MAAI,IAAI,OAAO,UAAU,SAAS,KAAK,CAAC,EAAE,MAAM,GAAG,EAAE;AAAG,MAAI,MAAM,YAAY,EAAE;AAAa,QAAI,EAAE,YAAY;AAAM,MAAI,MAAM,SAAS,MAAM;AAAO,WAAO,MAAM,KAAK,CAAC;AAAG,MAAI,MAAM,eAAe,2CAA2C,KAAK,CAAC;AAAG,WAAO,kBAAkB,GAAG,MAAM;AAAG;AAE/Z,SAAS,kBAAkB,KAAKC,MAAK;AAAE,MAAIA,QAAO,QAAQA,OAAM,IAAI;AAAQ,IAAAA,OAAM,IAAI;AAAQ,WAAS,IAAI,GAAG,OAAO,IAAI,MAAMA,IAAG,GAAG,IAAIA,MAAK,KAAK;AAAE,SAAK,CAAC,IAAI,IAAI,CAAC;AAAA,EAAG;AAAE,SAAO;AAAM;AAEtL,SAAS,sBAAsB,KAAK,GAAG;AAAE,MAAI,KAAK,OAAO,OAAO,OAAO,OAAO,WAAW,eAAe,IAAI,OAAO,QAAQ,KAAK,IAAI,YAAY;AAAG,MAAI,MAAM;AAAM;AAAQ,MAAI,OAAO,CAAC;AAAG,MAAI,KAAK;AAAM,MAAI,KAAK;AAAO,MAAI,IAAI;AAAI,MAAI;AAAE,SAAK,KAAK,GAAG,KAAK,GAAG,GAAG,EAAE,MAAM,KAAK,GAAG,KAAK,GAAG,OAAO,KAAK,MAAM;AAAE,WAAK,KAAK,GAAG,KAAK;AAAG,UAAI,KAAK,KAAK,WAAW;AAAG;AAAA,IAAO;AAAA,EAAE,SAAS,KAAP;AAAc,SAAK;AAAM,SAAK;AAAA,EAAK,UAAE;AAAU,QAAI;AAAE,UAAI,CAAC,MAAM,GAAG,QAAQ,KAAK;AAAM,WAAG,QAAQ,EAAE;AAAA,IAAG,UAAE;AAAU,UAAI;AAAI,cAAM;AAAA,IAAI;AAAA,EAAE;AAAE,SAAO;AAAM;AAEhgB,SAAS,gBAAgB,KAAK;AAAE,MAAI,MAAM,QAAQ,GAAG;AAAG,WAAO;AAAK;AAEpE,SAAS,QAAQ,QAAQ,gBAAgB;AAAE,MAAI,OAAO,OAAO,KAAK,MAAM;AAAG,MAAI,OAAO,uBAAuB;AAAE,QAAI,UAAU,OAAO,sBAAsB,MAAM;AAAG,uBAAmB,UAAU,QAAQ,OAAO,SAAU,KAAK;AAAE,aAAO,OAAO,yBAAyB,QAAQ,GAAG,EAAE;AAAA,IAAY,CAAC,IAAI,KAAK,KAAK,MAAM,MAAM,OAAO;AAAA,EAAG;AAAE,SAAO;AAAM;AAEpV,SAAS,cAAc,QAAQ;AAAE,WAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK;AAAE,QAAI,SAAS,QAAQ,UAAU,CAAC,IAAI,UAAU,CAAC,IAAI,CAAC;AAAG,QAAI,IAAI,QAAQ,OAAO,MAAM,GAAG,IAAE,EAAE,QAAQ,SAAU,KAAK;AAAE,sBAAgB,QAAQ,KAAK,OAAO,GAAG,CAAC;AAAA,IAAG,CAAC,IAAI,OAAO,4BAA4B,OAAO,iBAAiB,QAAQ,OAAO,0BAA0B,MAAM,CAAC,IAAI,QAAQ,OAAO,MAAM,CAAC,EAAE,QAAQ,SAAU,KAAK;AAAE,aAAO,eAAe,QAAQ,KAAK,OAAO,yBAAyB,QAAQ,GAAG,CAAC;AAAA,IAAG,CAAC;AAAA,EAAG;AAAE,SAAO;AAAQ;AAEzf,SAAS,gBAAgB,KAAK,KAAK,OAAO;AAAE,MAAI,OAAO,KAAK;AAAE,WAAO,eAAe,KAAK,KAAK,EAAE,OAAc,YAAY,MAAM,cAAc,MAAM,UAAU,KAAK,CAAC;AAAA,EAAG,OAAO;AAAE,QAAI,GAAG,IAAI;AAAA,EAAO;AAAE,SAAO;AAAK;AAEhN,SAASC,iBAAgB,UAAU,aAAa;AAAE,MAAI,EAAE,oBAAoB,cAAc;AAAE,UAAM,IAAI,UAAU,mCAAmC;AAAA,EAAG;AAAE;AAExJ,SAASC,mBAAkB,QAAQ,OAAO;AAAE,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AAAE,QAAI,aAAa,MAAM,CAAC;AAAG,eAAW,aAAa,WAAW,cAAc;AAAO,eAAW,eAAe;AAAM,QAAI,WAAW;AAAY,iBAAW,WAAW;AAAM,WAAO,eAAe,QAAQ,WAAW,KAAK,UAAU;AAAA,EAAG;AAAE;AAE5T,SAASC,cAAa,aAAa,YAAY,aAAa;AAAE,MAAI;AAAY,IAAAD,mBAAkB,YAAY,WAAW,UAAU;AAAG,MAAI;AAAa,IAAAA,mBAAkB,aAAa,WAAW;AAAG,SAAO,eAAe,aAAa,aAAa,EAAE,UAAU,MAAM,CAAC;AAAG,SAAO;AAAa;AAO5R,IAAI,iBAAiB;AAAA,EACnB,UAAU;AAAA,EACV,WAAW;AAAA,EACX,UAAU,CAAC;AAAA,EACX,aAAa;AAAA,EACb,YAAY;AAAA,EACZ,YAAY;AAAA,EACZ,iBAAiB;AAAA,EACjB,WAAW;AAAA,EACX,SAAS;AAAA,EACT,sBAAsB;AAAA,EACtB,qBAAqB;AAAA,EACrB,SAAS,CAAC;AAAA,EACV,cAAc;AAAA,EACd,iBAAiB;AAAA,EACjB,iBAAiB;AAAA,EACjB,eAAe;AAAA,EACf,WAAW;AAAA,EACX,aAAa,CAAC,GAAG,KAAM,KAAM,GAAI;AAAA,EACjC,iBAAiB;AAAA,EACjB,0BAA0B;AAAA,EAC1B,6BAA6B;AAAA,EAC7B,4BAA4B;AAAA,EAC5B,sBAAsB;AAAA,EACtB,0BAA0B;AAAA,EAC1B,YAAY;AAAA,EACZ,YAAY;AAAA,EACZ,WAAW;AACb;AAEA,IAAI,aAA0B,2BAAY;AACxC,WAASE,YAAW,MAAM,SAAS;AACjC,IAAAH,iBAAgB,MAAMG,WAAU;AAGhC,QAAI,YAAY,SAAS;AACvB,cAAQ,IAAI,wGAAwG;AAAA,IACtH;AAGA,SAAK,UAAU;AAEf,SAAK,QAAQ,YAAY,OAAO,KAAK,QAAQ,SAAS;AAEtD,SAAK,cAAc,KAAK,QAAQ;AAEhC,SAAK,OAAO;AAEZ,SAAK,MAAM;AAEX,SAAK,OAAO;AAEZ,SAAK,eAAe;AAEpB,SAAK,iBAAiB;AAEtB,SAAK,UAAU;AAEf,SAAK,WAAW;AAEhB,SAAK,QAAQ;AAIb,SAAK,UAAU;AAEf,SAAK,gBAAgB;AAErB,SAAK,gBAAgB;AAErB,SAAK,qBAAqB;AAG1B,SAAK,mBAAmB;AAGxB,SAAK,sBAAsB;AAAA,EAC7B;AAaA,EAAAD,cAAaC,aAAY,CAAC;AAAA,IACxB,KAAK;AAAA,IACL,OAAO,SAAS,sBAAsB;AACpC,UAAI,QAAQ;AAEZ,aAAO,KAAK,QAAQ,YAAY,KAAK,MAAM,KAAK,OAAO,EAAE,KAAK,SAAUC,cAAa;AACnF,eAAO,MAAM,YAAY,yBAAyBA,YAAW;AAAA,MAC/D,CAAC;AAAA,IACH;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,yBAAyB,gBAAgB;AACvD,WAAK,MAAM,eAAe,aAAa;AACvC,WAAK,sBAAsB,eAAe,sBAAsB;AAChE,WAAK,iBAAiB,eAAe;AAAA,IACvC;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,QAAQ;AACtB,UAAI,SAAS;AAEb,UAAI,OAAO,KAAK;AAEhB,UAAI,CAAC,MAAM;AACT,aAAK,WAAW,IAAI,MAAM,2CAA2C,CAAC;AAEtE;AAAA,MACF;AAEA,UAAI,CAAC,KAAK,QAAQ,YAAY,CAAC,KAAK,QAAQ,aAAa,CAAC,KAAK,KAAK;AAClE,aAAK,WAAW,IAAI,MAAM,uDAAuD,CAAC;AAElF;AAAA,MACF;AAEA,UAAI,cAAc,KAAK,QAAQ;AAE/B,UAAI,eAAe,QAAQ,OAAO,UAAU,SAAS,KAAK,WAAW,MAAM,kBAAkB;AAC3F,aAAK,WAAW,IAAI,MAAM,+DAA+D,CAAC;AAE1F;AAAA,MACF;AAEA,UAAI,KAAK,QAAQ,kBAAkB,GAAG;AAEpC,iBAAS,KAAK,GAAG,OAAO,CAAC,aAAa,cAAc,sBAAsB,GAAG,KAAK,KAAK,QAAQ,MAAM;AACnG,cAAI,aAAa,KAAK,EAAE;AAExB,cAAI,KAAK,QAAQ,UAAU,GAAG;AAC5B,iBAAK,WAAW,IAAI,MAAM,uBAAuB,OAAO,YAAY,yCAAyC,CAAC,CAAC;AAE/G;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,UAAI,KAAK,QAAQ,0BAA0B;AACzC,YAAI,KAAK,QAAQ,mBAAmB,GAAG;AACrC,eAAK,WAAW,IAAI,MAAM,0FAA0F,CAAC;AAErH;AAAA,QACF;AAEA,YAAI,KAAK,QAAQ,oBAAoB,KAAK,QAAQ,yBAAyB,QAAQ;AACjF,eAAK,WAAW,IAAI,MAAM,iGAAiG,CAAC;AAE5H;AAAA,QACF;AAAA,MACF;AAEA,WAAK,QAAQ,YAAY,MAAM,KAAK,OAAO,EAAE,KAAK,SAAUA,cAAa;AACvE,YAAIA,gBAAe,MAAM;AACvB,cAAI,4FAA4F;AAAA,QAClG,OAAO;AACL,cAAI,2BAA2B,OAAOA,YAAW,CAAC;AAAA,QACpD;AAEA,eAAO,eAAeA;AAEtB,YAAI,OAAO,SAAS;AAClB,iBAAO,OAAO;AAAA,QAChB;AAEA,eAAO,OAAO,QAAQ,WAAW,SAAS,MAAM,OAAO,QAAQ,SAAS;AAAA,MAC1E,CAAC,EAAE,KAAK,SAAU,QAAQ;AACxB,eAAO,UAAU;AAIjB,YAAI,OAAO,QAAQ,sBAAsB;AACvC,iBAAO,QAAQ;AAAA,QACjB,WAAW,OAAO,QAAQ,cAAc,MAAM;AAC5C,iBAAO,QAAQ,OAAO,OAAO,QAAQ,UAAU;AAE/C,cAAI,OAAO,MAAM,OAAO,KAAK,GAAG;AAC9B,mBAAO,WAAW,IAAI,MAAM,uDAAuD,CAAC;AAEpF;AAAA,UACF;AAAA,QACF,OAAO;AACL,iBAAO,QAAQ,OAAO,QAAQ;AAE9B,cAAI,OAAO,SAAS,MAAM;AACxB,mBAAO,WAAW,IAAI,MAAM,uJAAuJ,CAAC;AAEpL;AAAA,UACF;AAAA,QACF;AAIA,YAAI,OAAO,QAAQ,kBAAkB,KAAK,OAAO,uBAAuB,MAAM;AAC5E,iBAAO,qBAAqB;AAAA,QAC9B,OAAO;AACL,iBAAO,mBAAmB;AAAA,QAC5B;AAAA,MACF,CAAC,EAAE,OAAO,EAAE,SAAU,KAAK;AACzB,eAAO,WAAW,GAAG;AAAA,MACvB,CAAC;AAAA,IACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,uBAAuB;AACrC,UAAI,uBACA,SAAS;AAEb,UAAI,YAAY,KAAK;AACrB,UAAI,gBAAgB;AACpB,WAAK,mBAAmB,CAAC;AACzB,UAAI,YAAY,KAAK,uBAAuB,OAAO,KAAK,oBAAoB,SAAS,KAAK,QAAQ;AAGlG,UAAI,SAAS,wBAAwB,KAAK,QAAQ,8BAA8B,QAAQ,0BAA0B,SAAS,wBAAwB,mBAAmB,KAAK,QAAQ,MAAM,SAAS;AAElM,UAAI,KAAK,qBAAqB;AAC5B,cAAM,QAAQ,SAAU,MAAM,OAAO;AACnC,eAAK,YAAY,OAAO,oBAAoB,KAAK,KAAK;AAAA,QACxD,CAAC;AAAA,MACH;AAGA,WAAK,sBAAsB,IAAI,MAAM,MAAM,MAAM;AAGjD,UAAI,UAAU,MAAM,IAAI,SAAU,MAAM,OAAO;AAC7C,YAAI,mBAAmB;AACvB,eAAO,OAAO,QAAQ,MAAM,KAAK,OAAO,KAAK,GAAG,EAAE,KAAK,SAAU,MAAM;AACrE,cAAI,QAAQ,KAAK;AACjB,iBAAO,IAAI,QAAQ,SAAU,SAAS,QAAQ;AAE5C,gBAAI,UAAU,cAAc,cAAc,CAAC,GAAG,OAAO,OAAO,GAAG,CAAC,GAAG;AAAA;AAAA,cAEjE,WAAW,KAAK,aAAa;AAAA;AAAA;AAAA,cAG7B,6BAA6B;AAAA,cAC7B,4BAA4B;AAAA;AAAA,cAE5B,iBAAiB;AAAA;AAAA,cAEjB,0BAA0B;AAAA,cAC1B,UAAU,CAAC;AAAA;AAAA,cAEX,SAAS,cAAc,cAAc,CAAC,GAAG,OAAO,QAAQ,OAAO,GAAG,CAAC,GAAG;AAAA,gBACpE,iBAAiB;AAAA,cACnB,CAAC;AAAA;AAAA,cAED,WAAW;AAAA,cACX,SAAS;AAAA;AAAA;AAAA,cAGT,YAAY,SAAS,WAAW,iBAAiB;AAC/C,gCAAgB,gBAAgB,mBAAmB;AACnD,mCAAmB;AAEnB,uBAAO,cAAc,eAAe,SAAS;AAAA,cAC/C;AAAA;AAAA;AAAA,cAGA,sBAAsB,SAAS,uBAAuB;AACpD,uBAAO,oBAAoB,KAAK,IAAI,OAAO;AAE3C,oBAAI,OAAO,oBAAoB,OAAO,SAAU,GAAG;AACjD,yBAAO,QAAQ,CAAC;AAAA,gBAClB,CAAC,EAAE,WAAW,MAAM,QAAQ;AAC1B,yBAAO,wBAAwB;AAAA,gBACjC;AAAA,cACF;AAAA,YACF,CAAC;AAED,gBAAI,SAAS,IAAID,YAAW,OAAO,OAAO;AAC1C,mBAAO,MAAM;AAEb,mBAAO,iBAAiB,KAAK,MAAM;AAAA,UACrC,CAAC;AAAA,QACH,CAAC;AAAA,MACH,CAAC;AACD,UAAI;AAGJ,cAAQ,IAAI,OAAO,EAAE,KAAK,WAAY;AACpC,cAAM,OAAO,aAAa,QAAQ,OAAO,QAAQ,QAAQ;AACzD,YAAI,UAAU,iBAAiB,SAAS,OAAO,OAAO,oBAAoB,KAAK,GAAG,CAAC,CAAC;AAEpF,YAAI,WAAW,eAAe,OAAO,QAAQ,QAAQ;AAErD,YAAI,aAAa,IAAI;AACnB,cAAI,UAAU,mBAAmB,QAAQ;AAAA,QAC3C;AAEA,eAAO,OAAO,aAAa,KAAK,IAAI;AAAA,MACtC,CAAC,EAAE,KAAK,SAAU,KAAK;AACrB,YAAI,CAAC,iBAAiB,IAAI,UAAU,GAAG,GAAG,GAAG;AAC3C,iBAAO,eAAe,KAAK,KAAK,gDAAgD;AAEhF;AAAA,QACF;AAEA,YAAI,WAAW,IAAI,UAAU,UAAU;AAEvC,YAAI,YAAY,MAAM;AACpB,iBAAO,eAAe,KAAK,KAAK,yCAAyC;AAEzE;AAAA,QACF;AAEA,eAAO,MAAM,WAAW,OAAO,QAAQ,UAAU,QAAQ;AACzD,YAAI,qBAAqB,OAAO,OAAO,GAAG,CAAC;AAE3C,eAAO,aAAa;AAAA,MACtB,CAAC,EAAE,OAAO,EAAE,SAAU,KAAK;AACzB,eAAO,WAAW,GAAG;AAAA,MACvB,CAAC;AAAA,IACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,qBAAqB;AAInC,WAAK,WAAW;AAEhB,UAAI,KAAK,OAAO,MAAM;AACpB,YAAI,sCAAsC,OAAO,KAAK,GAAG,CAAC;AAE1D,aAAK,cAAc;AAEnB;AAAA,MACF;AAGA,UAAI,KAAK,QAAQ,aAAa,MAAM;AAClC,YAAI,sCAAsC,OAAO,KAAK,QAAQ,SAAS,CAAC;AACxE,aAAK,MAAM,KAAK,QAAQ;AAExB,aAAK,cAAc;AAEnB;AAAA,MACF;AAGA,UAAI,uBAAuB;AAE3B,WAAK,cAAc;AAAA,IACrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,MAAM,iBAAiB;AACrC,UAAI,SAAS;AAGb,UAAI,KAAK,oBAAoB,MAAM;AACjC,aAAK,iBAAiB,QAAQ,SAAU,QAAQ;AAC9C,iBAAO,MAAM,eAAe;AAAA,QAC9B,CAAC;AAAA,MACH;AAGA,UAAI,KAAK,SAAS,MAAM;AACtB,aAAK,KAAK,MAAM;AAAA,MAElB;AAEA,WAAK,WAAW;AAEhB,UAAI,KAAK,iBAAiB,MAAM;AAC9B,qBAAa,KAAK,aAAa;AAC/B,aAAK,gBAAgB;AAAA,MACvB;AAEA,UAAI,CAAC,mBAAmB,KAAK,OAAO,MAAM;AACxC,eAAO,QAAQ,QAAQ;AAAA,MACzB;AAEA,aAAOA,YAAW,UAAU,KAAK,KAAK,KAAK,OAAO,EACjD,KAAK,WAAY;AAChB,eAAO,OAAO,sBAAsB;AAAA,MACtC,CAAC;AAAA,IACH;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,eAAe,KAAK,KAAK,SAAS,YAAY;AAC5D,WAAK,WAAW,IAAI,cAAc,SAAS,YAAY,KAAK,GAAG,CAAC;AAAA,IAClE;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,WAAW,KAAK;AAC9B,UAAI,SAAS;AAGb,UAAI,KAAK;AAAU;AAEnB,UAAI,KAAK,QAAQ,eAAe,MAAM;AAIpC,YAAI,oBAAoB,KAAK,WAAW,QAAQ,KAAK,UAAU,KAAK;AAEpE,YAAI,mBAAmB;AACrB,eAAK,gBAAgB;AAAA,QACvB;AAEA,YAAI,YAAY,KAAK,KAAK,eAAe,KAAK,OAAO,GAAG;AACtD,cAAI,QAAQ,KAAK,QAAQ,YAAY,KAAK,eAAe;AACzD,eAAK,qBAAqB,KAAK;AAC/B,eAAK,gBAAgB,WAAW,WAAY;AAC1C,mBAAO,MAAM;AAAA,UACf,GAAG,KAAK;AACR;AAAA,QACF;AAAA,MACF;AAEA,UAAI,OAAO,KAAK,QAAQ,YAAY,YAAY;AAC9C,aAAK,QAAQ,QAAQ,GAAG;AAAA,MAC1B,OAAO;AACL,cAAM;AAAA,MACR;AAAA,IACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,eAAe;AAC7B,UAAI,KAAK,QAAQ,4BAA4B;AAG3C,aAAK,sBAAsB;AAAA,MAC7B;AAEA,UAAI,OAAO,KAAK,QAAQ,cAAc,YAAY;AAChD,aAAK,QAAQ,UAAU;AAAA,MACzB;AAAA,IACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,cAAc,WAAW,YAAY;AACnD,UAAI,OAAO,KAAK,QAAQ,eAAe,YAAY;AACjD,aAAK,QAAQ,WAAW,WAAW,UAAU;AAAA,MAC/C;AAAA,IACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,mBAAmB,WAAW,eAAe,YAAY;AACvE,UAAI,OAAO,KAAK,QAAQ,oBAAoB,YAAY;AACtD,aAAK,QAAQ,gBAAgB,WAAW,eAAe,UAAU;AAAA,MACnE;AAAA,IACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,gBAAgB;AAC9B,UAAI,SAAS;AAEb,UAAI,CAAC,KAAK,QAAQ,UAAU;AAC1B,aAAK,WAAW,IAAI,MAAM,8DAA8D,CAAC;AAEzF;AAAA,MACF;AAEA,UAAI,MAAM,KAAK,aAAa,QAAQ,KAAK,QAAQ,QAAQ;AAEzD,UAAI,KAAK,QAAQ,sBAAsB;AACrC,YAAI,UAAU,uBAAuB,CAAC;AAAA,MACxC,OAAO;AACL,YAAI,UAAU,iBAAiB,KAAK,KAAK;AAAA,MAC3C;AAGA,UAAI,WAAW,eAAe,KAAK,QAAQ,QAAQ;AAEnD,UAAI,aAAa,IAAI;AACnB,YAAI,UAAU,mBAAmB,QAAQ;AAAA,MAC3C;AAEA,UAAI;AAEJ,UAAI,KAAK,QAAQ,4BAA4B,CAAC,KAAK,QAAQ,sBAAsB;AAC/E,aAAK,UAAU;AACf,kBAAU,KAAK,mBAAmB,GAAG;AAAA,MACvC,OAAO;AACL,kBAAU,KAAK,aAAa,KAAK,IAAI;AAAA,MACvC;AAEA,cAAQ,KAAK,SAAU,KAAK;AAC1B,YAAI,CAAC,iBAAiB,IAAI,UAAU,GAAG,GAAG,GAAG;AAC3C,iBAAO,eAAe,KAAK,KAAK,gDAAgD;AAEhF;AAAA,QACF;AAEA,YAAI,WAAW,IAAI,UAAU,UAAU;AAEvC,YAAI,YAAY,MAAM;AACpB,iBAAO,eAAe,KAAK,KAAK,yCAAyC;AAEzE;AAAA,QACF;AAEA,eAAO,MAAM,WAAW,OAAO,QAAQ,UAAU,QAAQ;AACzD,YAAI,qBAAqB,OAAO,OAAO,GAAG,CAAC;AAE3C,YAAI,OAAO,OAAO,QAAQ,yBAAyB,YAAY;AAC7D,iBAAO,QAAQ,qBAAqB;AAAA,QACtC;AAEA,YAAI,OAAO,UAAU,GAAG;AAEtB,iBAAO,aAAa;AAEpB,iBAAO,QAAQ,MAAM;AAErB;AAAA,QACF;AAEA,eAAO,wBAAwB,EAAE,KAAK,WAAY;AAChD,cAAI,OAAO,QAAQ,0BAA0B;AAC3C,mBAAO,sBAAsB,KAAK,GAAG;AAAA,UACvC,OAAO;AACL,mBAAO,UAAU;AAEjB,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,CAAC;AAAA,MACH,CAAC,EAAE,OAAO,EAAE,SAAU,KAAK;AACzB,eAAO,eAAe,KAAK,MAAM,gCAAgC,GAAG;AAAA,MACtE,CAAC;AAAA,IACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,gBAAgB;AAC9B,UAAI,SAAS;AAEb,UAAI,MAAM,KAAK,aAAa,QAAQ,KAAK,GAAG;AAE5C,UAAI,UAAU,KAAK,aAAa,KAAK,IAAI;AAEzC,cAAQ,KAAK,SAAU,KAAK;AAC1B,YAAI,SAAS,IAAI,UAAU;AAE3B,YAAI,CAAC,iBAAiB,QAAQ,GAAG,GAAG;AAMlC,cAAI,WAAW,KAAK;AAClB,mBAAO,eAAe,KAAK,KAAK,8CAA8C;AAE9E;AAAA,UACF;AAEA,cAAI,iBAAiB,QAAQ,GAAG,GAAG;AAGjC,mBAAO,sBAAsB;AAAA,UAC/B;AAEA,cAAI,CAAC,OAAO,QAAQ,UAAU;AAE5B,mBAAO,eAAe,KAAK,KAAK,iFAAiF;AAEjH;AAAA,UACF;AAGA,iBAAO,MAAM;AAEb,iBAAO,cAAc;AAErB;AAAA,QACF;AAEA,YAAI,SAAS,SAAS,IAAI,UAAU,eAAe,GAAG,EAAE;AAExD,YAAI,OAAO,MAAM,MAAM,GAAG;AACxB,iBAAO,eAAe,KAAK,KAAK,sCAAsC;AAEtE;AAAA,QACF;AAEA,YAAI,SAAS,SAAS,IAAI,UAAU,eAAe,GAAG,EAAE;AAExD,YAAI,OAAO,MAAM,MAAM,KAAK,CAAC,OAAO,QAAQ,sBAAsB;AAChE,iBAAO,eAAe,KAAK,KAAK,sCAAsC;AAEtE;AAAA,QACF;AAEA,YAAI,OAAO,OAAO,QAAQ,yBAAyB,YAAY;AAC7D,iBAAO,QAAQ,qBAAqB;AAAA,QACtC;AAEA,eAAO,wBAAwB,EAAE,KAAK,WAAY;AAGhD,cAAI,WAAW,QAAQ;AACrB,mBAAO,cAAc,QAAQ,MAAM;AAEnC,mBAAO,aAAa;AAEpB;AAAA,UACF;AAEA,iBAAO,UAAU;AAEjB,iBAAO,eAAe;AAAA,QACxB,CAAC;AAAA,MACH,CAAC,EAAE,OAAO,EAAE,SAAU,KAAK;AACzB,eAAO,eAAe,KAAK,MAAM,gCAAgC,GAAG;AAAA,MACtE,CAAC;AAAA,IACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,iBAAiB;AAC/B,UAAI,SAAS;AAKb,UAAI,KAAK,UAAU;AACjB;AAAA,MACF;AAEA,UAAI;AAIJ,UAAI,KAAK,QAAQ,qBAAqB;AACpC,cAAM,KAAK,aAAa,QAAQ,KAAK,GAAG;AACxC,YAAI,UAAU,0BAA0B,OAAO;AAAA,MACjD,OAAO;AACL,cAAM,KAAK,aAAa,SAAS,KAAK,GAAG;AAAA,MAC3C;AAEA,UAAI,UAAU,iBAAiB,KAAK,OAAO;AAE3C,UAAI,UAAU,KAAK,mBAAmB,GAAG;AAEzC,cAAQ,KAAK,SAAU,KAAK;AAC1B,YAAI,CAAC,iBAAiB,IAAI,UAAU,GAAG,GAAG,GAAG;AAC3C,iBAAO,eAAe,KAAK,KAAK,gDAAgD;AAEhF;AAAA,QACF;AAEA,eAAO,sBAAsB,KAAK,GAAG;AAAA,MACvC,CAAC,EAAE,OAAO,EAAE,SAAU,KAAK;AAEzB,YAAI,OAAO,UAAU;AACnB;AAAA,QACF;AAEA,eAAO,eAAe,KAAK,MAAM,yCAAyC,OAAO,OAAO,OAAO,GAAG,GAAG;AAAA,MACvG,CAAC;AAAA,IACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,mBAAmB,KAAK;AACtC,UAAI,SAAS;AAEb,UAAI,QAAQ,KAAK;AACjB,UAAI,MAAM,KAAK,UAAU,KAAK,QAAQ;AACtC,UAAI,mBAAmB,SAAU,WAAW;AAC1C,eAAO,cAAc,QAAQ,WAAW,OAAO,KAAK;AAAA,MACtD,CAAC;AACD,UAAI,UAAU,gBAAgB,iCAAiC;AAI/D,WAAK,QAAQ,YAAY,MAAM,KAAK,UAAU,CAAC,KAAK,QAAQ,sBAAsB;AAChF,cAAM,KAAK;AAAA,MACb;AAEA,aAAO,KAAK,QAAQ,MAAM,OAAO,GAAG,EAAE,KAAK,SAAU,OAAO;AAC1D,YAAI,QAAQ,MAAM,OACd,OAAO,MAAM;AAKjB,YAAI,OAAO,QAAQ,wBAAwB,MAAM;AAC/C,iBAAO,QAAQ,OAAO,WAAW,SAAS,MAAM,OAAO,MAAM,OAAO;AACpE,cAAI,UAAU,iBAAiB,OAAO,KAAK;AAAA,QAC7C;AAEA,YAAI,UAAU,MAAM;AAClB,iBAAO,OAAO,aAAa,GAAG;AAAA,QAChC;AAEA,eAAO,cAAc,OAAO,SAAS,OAAO,KAAK;AAEjD,eAAO,OAAO,aAAa,KAAK,KAAK;AAAA,MACvC,CAAC;AAAA,IACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,sBAAsB,KAAK,KAAK;AAC9C,UAAI,SAAS,SAAS,IAAI,UAAU,eAAe,GAAG,EAAE;AAExD,UAAI,OAAO,MAAM,MAAM,GAAG;AACxB,aAAK,eAAe,KAAK,KAAK,sCAAsC;AAEpE;AAAA,MACF;AAEA,WAAK,cAAc,QAAQ,KAAK,KAAK;AAErC,WAAK,mBAAmB,SAAS,KAAK,SAAS,QAAQ,KAAK,KAAK;AAEjE,WAAK,UAAU;AAEf,UAAI,WAAW,KAAK,OAAO;AAEzB,aAAK,aAAa;AAElB,aAAK,QAAQ,MAAM;AAEnB;AAAA,MACF;AAEA,WAAK,eAAe;AAAA,IACtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,aAAa,QAAQ,KAAK;AACxC,UAAI,MAAM,YAAY,QAAQ,KAAK,KAAK,OAAO;AAC/C,WAAK,OAAO;AACZ,aAAO;AAAA,IACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,wBAAwB;AACtC,UAAI,UAAU;AAEd,UAAI,CAAC,KAAK;AAAgB;AAE1B,WAAK,YAAY,aAAa,KAAK,cAAc,EAAE,OAAO,EAAE,SAAU,KAAK;AACzE,gBAAQ,WAAW,GAAG;AAAA,MACxB,CAAC;AAED,WAAK,iBAAiB;AAAA,IACxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,0BAA0B;AACxC,UAAI,UAAU;AAMd,UAAI,CAAC,KAAK,QAAQ,+BAA+B,CAAC,KAAK,gBAAgB,KAAK,mBAAmB,MAAM;AACnG,eAAO,QAAQ,QAAQ;AAAA,MACzB;AAEA,UAAI,eAAe;AAAA,QACjB,MAAM,KAAK;AAAA,QACX,UAAU,KAAK,QAAQ;AAAA,QACvB,eAAc,oBAAI,KAAK,GAAE,SAAS;AAAA,MACpC;AAEA,UAAI,KAAK,kBAAkB;AAEzB,qBAAa,qBAAqB,KAAK;AAAA,MACzC,OAAO;AAEL,qBAAa,YAAY,KAAK;AAAA,MAChC;AAEA,aAAO,KAAK,YAAY,UAAU,KAAK,cAAc,YAAY,EAAE,KAAK,SAAU,eAAe;AAC/F,gBAAQ,iBAAiB;AAAA,MAC3B,CAAC;AAAA,IACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,aAAa,KAAK;AAChC,UAAI,OAAO,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI;AAC/E,aAAO,YAAY,KAAK,MAAM,KAAK,OAAO;AAAA,IAC5C;AAAA,EACF,CAAC,GAAG,CAAC;AAAA,IACH,KAAK;AAAA,IACL,OAAO,SAAS,UAAU,KAAK;AAC7B,UAAI,UAAU,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI,CAAC;AACnF,UAAI,MAAM,YAAY,UAAU,KAAK,OAAO;AAC5C,aAAO,YAAY,KAAK,MAAM,OAAO,EAAE,KAAK,SAAU,KAAK;AAEzD,YAAI,IAAI,UAAU,MAAM,KAAK;AAC3B;AAAA,QACF;AAEA,cAAM,IAAI,cAAc,qDAAqD,MAAM,KAAK,GAAG;AAAA,MAC7F,CAAC,EAAE,OAAO,EAAE,SAAU,KAAK;AACzB,YAAI,EAAE,eAAe,gBAAgB;AACnC,gBAAM,IAAI,cAAc,mCAAmC,KAAK,KAAK,IAAI;AAAA,QAC3E;AAEA,YAAI,CAAC,YAAY,KAAK,GAAG,OAAO,GAAG;AACjC,gBAAM;AAAA,QACR;AAKA,YAAI,QAAQ,QAAQ,YAAY,CAAC;AACjC,YAAI,kBAAkB,QAAQ,YAAY,MAAM,CAAC;AAEjD,YAAI,aAAa,cAAc,cAAc,CAAC,GAAG,OAAO,GAAG,CAAC,GAAG;AAAA,UAC7D,aAAa;AAAA,QACf,CAAC;AAED,eAAO,IAAI,QAAQ,SAAU,SAAS;AACpC,iBAAO,WAAW,SAAS,KAAK;AAAA,QAClC,CAAC,EAAE,KAAK,WAAY;AAClB,iBAAOA,YAAW,UAAU,KAAK,UAAU;AAAA,QAC7C,CAAC;AAAA,MACH,CAAC;AAAA,IACH;AAAA,EACF,CAAC,CAAC;AAEF,SAAOA;AACT,EAAE;AAEF,SAAS,eAAe,UAAU;AAChC,SAAO,OAAO,QAAQ,QAAQ,EAAE,IAAI,SAAU,OAAO;AACnD,QAAI,QAAQ,eAAe,OAAO,CAAC,GAC/B,MAAM,MAAM,CAAC,GACb,QAAQ,MAAM,CAAC;AAEnB,WAAO,GAAG,OAAO,KAAK,GAAG,EAAE,OAAO,QAAO,OAAO,OAAO,KAAK,CAAC,CAAC;AAAA,EAChE,CAAC,EAAE,KAAK,GAAG;AACb;AASA,SAAS,iBAAiB,QAAQ,UAAU;AAC1C,SAAO,UAAU,YAAY,SAAS,WAAW;AACnD;AAUA,SAAS,YAAY,QAAQ,KAAK,SAAS;AACzC,MAAI,MAAM,QAAQ,UAAU,cAAc,QAAQ,GAAG;AACrD,MAAI,UAAU,iBAAiB,OAAO;AACtC,MAAI,UAAU,QAAQ,WAAW,CAAC;AAClC,SAAO,QAAQ,OAAO,EAAE,QAAQ,SAAU,OAAO;AAC/C,QAAI,QAAQ,eAAe,OAAO,CAAC,GAC/B,OAAO,MAAM,CAAC,GACd,QAAQ,MAAM,CAAC;AAEnB,QAAI,UAAU,MAAM,KAAK;AAAA,EAC3B,CAAC;AAED,MAAI,QAAQ,cAAc;AACxB,QAAI,YAAY,KAAK;AACrB,QAAI,UAAU,gBAAgB,SAAS;AAAA,EACzC;AAEA,SAAO;AACT;AASA,SAAS,YAAY,KAAK,MAAM,SAAS;AACvC,MAAI,yBAAyB,OAAO,QAAQ,oBAAoB,aAAa,QAAQ,QAAQ,QAAQ,gBAAgB,GAAG,CAAC,IAAI,QAAQ,QAAQ;AAC7I,SAAO,uBAAuB,KAAK,WAAY;AAC7C,WAAO,IAAI,KAAK,IAAI,EAAE,KAAK,SAAU,KAAK;AACxC,UAAI,yBAAyB,OAAO,QAAQ,oBAAoB,aAAa,QAAQ,QAAQ,QAAQ,gBAAgB,KAAK,GAAG,CAAC,IAAI,QAAQ,QAAQ;AAClJ,aAAO,uBAAuB,KAAK,WAAY;AAC7C,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAAA,EACH,CAAC;AACH;AASA,SAAS,WAAW;AAClB,MAAI,SAAS;AAEb,MAAI,OAAO,WAAW,eAAe,eAAe,UACjD,OAAO,UAAU,WAAW,OAAO;AAEpC,aAAS;AAAA,EACX;AAEA,SAAO;AACT;AAWA,SAAS,YAAY,KAAK,cAAc,SAAS;AAQ/C,MAAI,QAAQ,eAAe,QAAQ,gBAAgB,QAAQ,YAAY,UAAU,IAAI,mBAAmB,MAAM;AAC5G,WAAO;AAAA,EACT;AAEA,MAAI,WAAW,OAAO,QAAQ,kBAAkB,YAAY;AAC1D,WAAO,QAAQ,cAAc,KAAK,cAAc,OAAO;AAAA,EACzD;AAEA,MAAI,SAAS,IAAI,mBAAmB,IAAI,iBAAiB,UAAU,IAAI;AACvE,UAAQ,CAAC,iBAAiB,QAAQ,GAAG,KAAK,WAAW,OAAO,WAAW,QAAQ,SAAS;AAC1F;AASA,SAAS,WAAW,QAAQ,MAAM;AAChC,SAAO,IAAI,iBAAAE,QAAI,MAAM,MAAM,EAAE,SAAS;AACxC;AAYA,SAAS,mBAAmB,WAAW,WAAW;AAChD,MAAI,WAAW,KAAK,MAAM,YAAY,SAAS;AAC/C,MAAI,QAAQ,CAAC;AAEb,WAAS,IAAI,GAAG,IAAI,WAAW,KAAK;AAClC,UAAM,KAAK;AAAA,MACT,OAAO,WAAW;AAAA,MAClB,KAAK,YAAY,IAAI;AAAA,IACvB,CAAC;AAAA,EACH;AAEA,QAAM,YAAY,CAAC,EAAE,MAAM;AAC3B,SAAO;AACT;AAEA,WAAW,iBAAiB;AAC5B,IAAO,iBAAQ;;;AInmCf,SAASC,iBAAgB,UAAU,aAAa;AAAE,MAAI,EAAE,oBAAoB,cAAc;AAAE,UAAM,IAAI,UAAU,mCAAmC;AAAA,EAAG;AAAE;AAExJ,SAASC,mBAAkB,QAAQ,OAAO;AAAE,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AAAE,QAAI,aAAa,MAAM,CAAC;AAAG,eAAW,aAAa,WAAW,cAAc;AAAO,eAAW,eAAe;AAAM,QAAI,WAAW;AAAY,iBAAW,WAAW;AAAM,WAAO,eAAe,QAAQ,WAAW,KAAK,UAAU;AAAA,EAAG;AAAE;AAE5T,SAASC,cAAa,aAAa,YAAY,aAAa;AAAE,MAAI;AAAY,IAAAD,mBAAkB,YAAY,WAAW,UAAU;AAAG,MAAI;AAAa,IAAAA,mBAAkB,aAAa,WAAW;AAAG,SAAO,eAAe,aAAa,aAAa,EAAE,UAAU,MAAM,CAAC;AAAG,SAAO;AAAa;AAG5R,IAAI,iBAA8B,2BAAY;AAC5C,WAASE,kBAAiB;AACxB,IAAAH,iBAAgB,MAAMG,eAAc;AAAA,EACtC;AAEA,EAAAD,cAAaC,iBAAgB,CAAC;AAAA,IAC5B,KAAK;AAAA,IACL,OAAO,SAAS,iBAAiB;AAC/B,aAAO,QAAQ,QAAQ,CAAC,CAAC;AAAA,IAC3B;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,yBAAyBC,cAAa;AACpD,aAAO,QAAQ,QAAQ,CAAC,CAAC;AAAA,IAC3B;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,aAAa,eAAe;AAC1C,aAAO,QAAQ,QAAQ;AAAA,IACzB;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,UAAUA,cAAa,QAAQ;AAC7C,aAAO,QAAQ,QAAQ,IAAI;AAAA,IAC7B;AAAA,EACF,CAAC,CAAC;AAEF,SAAOD;AACT,EAAE;;;ACnCF,SAASE,iBAAgB,UAAU,aAAa;AAAE,MAAI,EAAE,oBAAoB,cAAc;AAAE,UAAM,IAAI,UAAU,mCAAmC;AAAA,EAAG;AAAE;AAExJ,SAASC,mBAAkB,QAAQ,OAAO;AAAE,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AAAE,QAAI,aAAa,MAAM,CAAC;AAAG,eAAW,aAAa,WAAW,cAAc;AAAO,eAAW,eAAe;AAAM,QAAI,WAAW;AAAY,iBAAW,WAAW;AAAM,WAAO,eAAe,QAAQ,WAAW,KAAK,UAAU;AAAA,EAAG;AAAE;AAE5T,SAASC,cAAa,aAAa,YAAY,aAAa;AAAE,MAAI;AAAY,IAAAD,mBAAkB,YAAY,WAAW,UAAU;AAAG,MAAI;AAAa,IAAAA,mBAAkB,aAAa,WAAW;AAAG,SAAO,eAAe,aAAa,aAAa,EAAE,UAAU,MAAM,CAAC;AAAG,SAAO;AAAa;AAE5R,IAAI,aAAa;AAEjB,IAAI;AACF,eAAa,kBAAkB;AAK3B,QAAM;AACN,kBAAgB,aAAa,QAAQ,GAAG;AAC5C,eAAa,QAAQ,KAAK,aAAa;AACvC,MAAI,kBAAkB;AAAM,iBAAa,WAAW,GAAG;AACzD,SAAS,GAAP;AAIA,MAAI,EAAE,SAAS,EAAE,gBAAgB,EAAE,SAAS,EAAE,oBAAoB;AAChE,iBAAa;AAAA,EACf,OAAO;AACL,UAAM;AAAA,EACR;AACF;AAbM;AACA;AAcC,IAAI,eAAe;AACnB,IAAI,uBAAoC,2BAAY;AACzD,WAASE,wBAAuB;AAC9B,IAAAH,iBAAgB,MAAMG,qBAAoB;AAAA,EAC5C;AAEA,EAAAD,cAAaC,uBAAsB,CAAC;AAAA,IAClC,KAAK;AAAA,IACL,OAAO,SAAS,iBAAiB;AAC/B,UAAI,UAAU,KAAK,aAAa,OAAO;AAEvC,aAAO,QAAQ,QAAQ,OAAO;AAAA,IAChC;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,yBAAyBC,cAAa;AACpD,UAAI,UAAU,KAAK,aAAa,QAAQ,OAAOA,cAAa,IAAI,CAAC;AAEjE,aAAO,QAAQ,QAAQ,OAAO;AAAA,IAChC;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,aAAa,eAAe;AAC1C,mBAAa,WAAW,aAAa;AACrC,aAAO,QAAQ,QAAQ;AAAA,IACzB;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,UAAUA,cAAa,QAAQ;AAC7C,UAAIC,MAAK,KAAK,MAAM,KAAK,OAAO,IAAI,IAAI;AACxC,UAAI,MAAM,QAAQ,OAAOD,cAAa,IAAI,EAAE,OAAOC,GAAE;AACrD,mBAAa,QAAQ,KAAK,KAAK,UAAU,MAAM,CAAC;AAChD,aAAO,QAAQ,QAAQ,GAAG;AAAA,IAC5B;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,aAAa,QAAQ;AACnC,UAAI,UAAU,CAAC;AAEf,eAAS,IAAI,GAAG,IAAI,aAAa,QAAQ,KAAK;AAC5C,YAAI,OAAO,aAAa,IAAI,CAAC;AAE7B,YAAI,KAAK,QAAQ,MAAM,MAAM;AAAG;AAEhC,YAAI;AACF,cAAI,SAAS,KAAK,MAAM,aAAa,QAAQ,IAAI,CAAC;AAClD,iBAAO,gBAAgB;AACvB,kBAAQ,KAAK,MAAM;AAAA,QACrB,SAAS,GAAP;AAAA,QAEF;AAAA,MACF;AAEA,aAAO;AAAA,IACT;AAAA,EACF,CAAC,CAAC;AAEF,SAAOF;AACT,EAAE;;;ACvFF,SAASG,iBAAgB,UAAU,aAAa;AAAE,MAAI,EAAE,oBAAoB,cAAc;AAAE,UAAM,IAAI,UAAU,mCAAmC;AAAA,EAAG;AAAE;AAExJ,SAASC,mBAAkB,QAAQ,OAAO;AAAE,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AAAE,QAAI,aAAa,MAAM,CAAC;AAAG,eAAW,aAAa,WAAW,cAAc;AAAO,eAAW,eAAe;AAAM,QAAI,WAAW;AAAY,iBAAW,WAAW;AAAM,WAAO,eAAe,QAAQ,WAAW,KAAK,UAAU;AAAA,EAAG;AAAE;AAE5T,SAASC,cAAa,aAAa,YAAY,aAAa;AAAE,MAAI;AAAY,IAAAD,mBAAkB,YAAY,WAAW,UAAU;AAAG,MAAI;AAAa,IAAAA,mBAAkB,aAAa,WAAW;AAAG,SAAO,eAAe,aAAa,aAAa,EAAE,UAAU,MAAM,CAAC;AAAG,SAAO;AAAa;AAG5R,IAAI,eAA4B,2BAAY;AAC1C,WAASE,gBAAe;AACtB,IAAAH,iBAAgB,MAAMG,aAAY;AAAA,EACpC;AAEA,EAAAD,cAAaC,eAAc,CAAC;AAAA,IAC1B,KAAK;AAAA,IACL,OAAO,SAAS,cAAc,QAAQ,KAAK;AACzC,aAAO,IAAI,QAAQ,QAAQ,GAAG;AAAA,IAChC;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAASC,WAAU;AACxB,aAAO;AAAA,IACT;AAAA,EACF,CAAC,CAAC;AAEF,SAAOD;AACT,EAAE;AAIF,IAAI,UAAuB,2BAAY;AACrC,WAASE,SAAQ,QAAQ,KAAK;AAC5B,IAAAC,iBAAgB,MAAMD,QAAO;AAE7B,SAAK,OAAO,IAAI,eAAe;AAE/B,SAAK,KAAK,KAAK,QAAQ,KAAK,IAAI;AAEhC,SAAK,UAAU;AACf,SAAK,OAAO;AACZ,SAAK,WAAW,CAAC;AAAA,EACnB;AAEA,EAAAE,cAAaF,UAAS,CAAC;AAAA,IACrB,KAAK;AAAA,IACL,OAAO,SAAS,YAAY;AAC1B,aAAO,KAAK;AAAA,IACd;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,SAAS;AACvB,aAAO,KAAK;AAAA,IACd;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,UAAU,QAAQ,OAAO;AACvC,WAAK,KAAK,iBAAiB,QAAQ,KAAK;AAExC,WAAK,SAAS,MAAM,IAAI;AAAA,IAC1B;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,UAAU,QAAQ;AAChC,aAAO,KAAK,SAAS,MAAM;AAAA,IAC7B;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,mBAAmB,iBAAiB;AAElD,UAAI,EAAE,YAAY,KAAK,OAAO;AAC5B;AAAA,MACF;AAEA,WAAK,KAAK,OAAO,aAAa,SAAU,GAAG;AACzC,YAAI,CAAC,EAAE,kBAAkB;AACvB;AAAA,QACF;AAEA,wBAAgB,EAAE,MAAM;AAAA,MAC1B;AAAA,IACF;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,OAAO;AACrB,UAAI,QAAQ;AAEZ,UAAI,OAAO,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI;AAC/E,aAAO,IAAI,QAAQ,SAAU,SAAS,QAAQ;AAC5C,cAAM,KAAK,SAAS,WAAY;AAC9B,kBAAQ,IAAI,SAAS,MAAM,IAAI,CAAC;AAAA,QAClC;AAEA,cAAM,KAAK,UAAU,SAAU,KAAK;AAClC,iBAAO,GAAG;AAAA,QACZ;AAEA,cAAM,KAAK,KAAK,IAAI;AAAA,MACtB,CAAC;AAAA,IACH;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,QAAQ;AACtB,WAAK,KAAK,MAAM;AAEhB,aAAO,QAAQ,QAAQ;AAAA,IACzB;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,sBAAsB;AACpC,aAAO,KAAK;AAAA,IACd;AAAA,EACF,CAAC,CAAC;AAEF,SAAOA;AACT,EAAE;AAEF,IAAI,WAAwB,2BAAY;AACtC,WAASG,UAAS,KAAK;AACrB,IAAAF,iBAAgB,MAAME,SAAQ;AAE9B,SAAK,OAAO;AAAA,EACd;AAEA,EAAAD,cAAaC,WAAU,CAAC;AAAA,IACtB,KAAK;AAAA,IACL,OAAO,SAAS,YAAY;AAC1B,aAAO,KAAK,KAAK;AAAA,IACnB;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,UAAU,QAAQ;AAChC,aAAO,KAAK,KAAK,kBAAkB,MAAM;AAAA,IAC3C;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,UAAU;AACxB,aAAO,KAAK,KAAK;AAAA,IACnB;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,sBAAsB;AACpC,aAAO,KAAK;AAAA,IACd;AAAA,EACF,CAAC,CAAC;AAEF,SAAOA;AACT,EAAE;;;ACjJF,IAAI,gBAAgB,SAASC,iBAAgB;AAC3C,SAAO,OAAO,cAAc,eAAe,OAAO,UAAU,YAAY,YAAY,UAAU,QAAQ,YAAY,MAAM;AAC1H;AAEA,IAAO,wBAAQ;;;ACCA,SAAR,UAA2B,KAAK;AACrC,SAAO,IAAI,QAAQ,SAAU,SAAS,QAAQ;AAC5C,QAAI,MAAM,IAAI,eAAe;AAC7B,QAAI,eAAe;AAEnB,QAAI,SAAS,WAAY;AACvB,UAAI,OAAO,IAAI;AACf,cAAQ,IAAI;AAAA,IACd;AAEA,QAAI,UAAU,SAAU,KAAK;AAC3B,aAAO,GAAG;AAAA,IACZ;AAEA,QAAI,KAAK,OAAO,GAAG;AACnB,QAAI,KAAK;AAAA,EACX,CAAC;AACH;;;ACtBA,IAAI,YAAY,SAASC,aAAY;AACnC,SAAO,OAAO,WAAW,gBAAgB,OAAO,OAAO,aAAa,eAAe,OAAO,OAAO,YAAY,eAAe,OAAO,OAAO,YAAY;AACxJ;AAEA,IAAO,oBAAQ;;;ACCA,SAAR,gBAAiC,OAAO;AAC7C,SAAO,IAAI,QAAQ,SAAU,SAAS,QAAQ;AAC5C,QAAI,SAAS,IAAI,WAAW;AAE5B,WAAO,SAAS,WAAY;AAC1B,UAAI,QAAQ,IAAI,WAAW,OAAO,MAAM;AACxC,cAAQ;AAAA,QACN;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,UAAU,SAAU,KAAK;AAC9B,aAAO,GAAG;AAAA,IACZ;AAEA,WAAO,kBAAkB,KAAK;AAAA,EAChC,CAAC;AACH;;;ACtBA,SAASC,iBAAgB,UAAU,aAAa;AAAE,MAAI,EAAE,oBAAoB,cAAc;AAAE,UAAM,IAAI,UAAU,mCAAmC;AAAA,EAAG;AAAE;AAExJ,SAASC,mBAAkB,QAAQ,OAAO;AAAE,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AAAE,QAAI,aAAa,MAAM,CAAC;AAAG,eAAW,aAAa,WAAW,cAAc;AAAO,eAAW,eAAe;AAAM,QAAI,WAAW;AAAY,iBAAW,WAAW;AAAM,WAAO,eAAe,QAAQ,WAAW,KAAK,UAAU;AAAA,EAAG;AAAE;AAE5T,SAASC,cAAa,aAAa,YAAY,aAAa;AAAE,MAAI;AAAY,IAAAD,mBAAkB,YAAY,WAAW,UAAU;AAAG,MAAI;AAAa,IAAAA,mBAAkB,aAAa,WAAW;AAAG,SAAO,eAAe,aAAa,aAAa,EAAE,UAAU,MAAM,CAAC;AAAG,SAAO;AAAa;AAK5R,IAAI,aAA0B,2BAAY;AAExC,WAASE,YAAW,MAAM;AACxB,IAAAH,iBAAgB,MAAMG,WAAU;AAEhC,SAAK,QAAQ;AACb,SAAK,OAAO,KAAK;AAAA,EACnB;AAEA,EAAAD,cAAaC,aAAY,CAAC;AAAA,IACxB,KAAK;AAAA,IACL,OAAO,SAAS,MAAM,OAAO,KAAK;AAIhC,UAAI,kBAAU,GAAG;AACf,eAAO,gBAAgB,KAAK,MAAM,MAAM,OAAO,GAAG,CAAC;AAAA,MACrD;AAEA,UAAI,QAAQ,KAAK,MAAM,MAAM,OAAO,GAAG;AAEvC,aAAO,QAAQ,QAAQ;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,QAAQ;AAAA,IACxB;AAAA,EACF,CAAC,CAAC;AAEF,SAAOA;AACT,EAAE;;;ACzCF,SAASC,iBAAgB,UAAU,aAAa;AAAE,MAAI,EAAE,oBAAoB,cAAc;AAAE,UAAM,IAAI,UAAU,mCAAmC;AAAA,EAAG;AAAE;AAExJ,SAASC,mBAAkB,QAAQ,OAAO;AAAE,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AAAE,QAAI,aAAa,MAAM,CAAC;AAAG,eAAW,aAAa,WAAW,cAAc;AAAO,eAAW,eAAe;AAAM,QAAI,WAAW;AAAY,iBAAW,WAAW;AAAM,WAAO,eAAe,QAAQ,WAAW,KAAK,UAAU;AAAA,EAAG;AAAE;AAE5T,SAASC,cAAa,aAAa,YAAY,aAAa;AAAE,MAAI;AAAY,IAAAD,mBAAkB,YAAY,WAAW,UAAU;AAAG,MAAI;AAAa,IAAAA,mBAAkB,aAAa,WAAW;AAAG,SAAO,eAAe,aAAa,aAAa,EAAE,UAAU,MAAM,CAAC;AAAG,SAAO;AAAa;AAE5R,SAAS,IAAI,aAAa;AACxB,MAAI,gBAAgB;AAAW,WAAO;AACtC,MAAI,YAAY,SAAS;AAAW,WAAO,YAAY;AACvD,SAAO,YAAY;AACrB;AAOA,SAAS,OAAO,GAAG,GAAG;AACpB,MAAI,EAAE,QAAQ;AAEZ,WAAO,EAAE,OAAO,CAAC;AAAA,EACnB;AAEA,MAAI,aAAa,MAAM;AACrB,WAAO,IAAI,KAAK,CAAC,GAAG,CAAC,GAAG;AAAA,MACtB,MAAM,EAAE;AAAA,IACV,CAAC;AAAA,EACH;AAEA,MAAI,EAAE,KAAK;AAET,QAAI,IAAI,IAAI,EAAE,YAAY,EAAE,SAAS,EAAE,MAAM;AAC7C,MAAE,IAAI,CAAC;AACP,MAAE,IAAI,GAAG,EAAE,MAAM;AACjB,WAAO;AAAA,EACT;AAEA,QAAM,IAAI,MAAM,mBAAmB;AACrC;AAEA,IAAI,eAA4B,2BAAY;AAC1C,WAASE,cAAa,QAAQ;AAC5B,IAAAH,iBAAgB,MAAMG,aAAY;AAElC,SAAK,UAAU;AACf,SAAK,gBAAgB;AACrB,SAAK,UAAU;AACf,SAAK,QAAQ;AAAA,EACf;AAEA,EAAAD,cAAaC,eAAc,CAAC;AAAA,IAC1B,KAAK;AAAA,IACL,OAAO,SAAS,MAAM,OAAO,KAAK;AAChC,UAAI,QAAQ,KAAK,eAAe;AAC9B,eAAO,QAAQ,OAAO,IAAI,MAAM,sDAAsD,CAAC;AAAA,MACzF;AAEA,aAAO,KAAK,2BAA2B,OAAO,GAAG;AAAA,IACnD;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,2BAA2B,OAAO,KAAK;AACrD,UAAI,QAAQ;AAEZ,UAAI,gBAAgB,OAAO,KAAK,gBAAgB,IAAI,KAAK,OAAO;AAEhE,UAAI,KAAK,SAAS,eAAe;AAC/B,YAAI,QAAQ,KAAK,mBAAmB,OAAO,GAAG;AAE9C,YAAI,OAAO,SAAS,OAAO,KAAK,QAAQ;AACxC,eAAO,QAAQ,QAAQ;AAAA,UACrB;AAAA,UACA;AAAA,QACF,CAAC;AAAA,MACH;AAEA,aAAO,KAAK,QAAQ,KAAK,EAAE,KAAK,SAAU,MAAM;AAC9C,YAAIC,SAAQ,KAAK,OACbC,QAAO,KAAK;AAEhB,YAAIA,OAAM;AACR,gBAAM,QAAQ;AAAA,QAChB,WAAW,MAAM,YAAY,QAAW;AACtC,gBAAM,UAAUD;AAAA,QAClB,OAAO;AACL,gBAAM,UAAU,OAAO,MAAM,SAASA,MAAK;AAAA,QAC7C;AAEA,eAAO,MAAM,2BAA2B,OAAO,GAAG;AAAA,MACpD,CAAC;AAAA,IACH;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,mBAAmB,OAAO,KAAK;AAI7C,UAAI,QAAQ,KAAK,eAAe;AAC9B,aAAK,UAAU,KAAK,QAAQ,MAAM,QAAQ,KAAK,aAAa;AAC5D,aAAK,gBAAgB;AAAA,MACvB;AAGA,UAAI,qBAAqB,IAAI,KAAK,OAAO,MAAM;AAE/C,UAAI,KAAK,SAAS,oBAAoB;AACpC,eAAO;AAAA,MACT;AAIA,aAAO,KAAK,QAAQ,MAAM,GAAG,MAAM,KAAK;AAAA,IAC1C;AAAA,EACF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,OAAO,SAAS,QAAQ;AACtB,UAAI,KAAK,QAAQ,QAAQ;AACvB,aAAK,QAAQ,OAAO;AAAA,MACtB;AAAA,IACF;AAAA,EACF,CAAC,CAAC;AAEF,SAAOD;AACT,EAAE;;;AC3HF,SAASG,iBAAgB,UAAU,aAAa;AAAE,MAAI,EAAE,oBAAoB,cAAc;AAAE,UAAM,IAAI,UAAU,mCAAmC;AAAA,EAAG;AAAE;AAExJ,SAASC,mBAAkB,QAAQ,OAAO;AAAE,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AAAE,QAAI,aAAa,MAAM,CAAC;AAAG,eAAW,aAAa,WAAW,cAAc;AAAO,eAAW,eAAe;AAAM,QAAI,WAAW;AAAY,iBAAW,WAAW;AAAM,WAAO,eAAe,QAAQ,WAAW,KAAK,UAAU;AAAA,EAAG;AAAE;AAE5T,SAASC,cAAa,aAAa,YAAY,aAAa;AAAE,MAAI;AAAY,IAAAD,mBAAkB,YAAY,WAAW,UAAU;AAAG,MAAI;AAAa,IAAAA,mBAAkB,aAAa,WAAW;AAAG,SAAO,eAAe,aAAa,aAAa,EAAE,UAAU,MAAM,CAAC;AAAG,SAAO;AAAa;AAO5R,IAAIE,cAA0B,2BAAY;AACxC,WAASA,cAAa;AACpB,IAAAH,iBAAgB,MAAMG,WAAU;AAAA,EAClC;AAEA,EAAAD,cAAaC,aAAY,CAAC;AAAA,IACxB,KAAK;AAAA,IACL,OAAO,SAAS,SAAS,OAAO,WAAW;AAKzC,UAAI,sBAAc,KAAK,SAAS,OAAO,MAAM,QAAQ,aAAa;AAChE,eAAO,UAAU,MAAM,GAAG,EAAE,KAAK,SAAU,MAAM;AAC/C,iBAAO,IAAI,WAAW,IAAI;AAAA,QAC5B,CAAC,EAAE,OAAO,EAAE,SAAU,KAAK;AACzB,gBAAM,IAAI,MAAM,sFAAsF,OAAO,GAAG,CAAC;AAAA,QACnH,CAAC;AAAA,MACH;AAMA,UAAI,OAAO,MAAM,UAAU,cAAc,OAAO,MAAM,SAAS,aAAa;AAC1E,eAAO,QAAQ,QAAQ,IAAI,WAAW,KAAK,CAAC;AAAA,MAC9C;AAEA,UAAI,OAAO,MAAM,SAAS,YAAY;AACpC,oBAAY,OAAO,SAAS;AAE5B,YAAI,CAAC,OAAO,SAAS,SAAS,GAAG;AAC/B,iBAAO,QAAQ,OAAO,IAAI,MAAM,mFAAmF,CAAC;AAAA,QACtH;AAEA,eAAO,QAAQ,QAAQ,IAAI,aAAa,OAAO,SAAS,CAAC;AAAA,MAC3D;AAEA,aAAO,QAAQ,OAAO,IAAI,MAAM,oFAAoF,CAAC;AAAA,IACvH;AAAA,EACF,CAAC,CAAC;AAEF,SAAOA;AACT,EAAE;;;AC5Ca,SAAR,YAA6B,MAAM,SAAS;AACjD,MAAI,sBAAc,GAAG;AACnB,WAAO,QAAQ,QAAQ,uBAAuB,MAAM,OAAO,CAAC;AAAA,EAC9D;AAEA,SAAO,QAAQ,QAAQ,CAAC,UAAU,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,cAAc,QAAQ,QAAQ,EAAE,KAAK,GAAG,CAAC;AACnH;AAEA,SAAS,uBAAuB,MAAM,SAAS;AAC7C,MAAI,WAAW,KAAK,OAAO,SAAS,KAAK,UAAU,KAAK,IAAI,CAAC,IAAI;AACjE,SAAO,CAAC,UAAU,KAAK,QAAQ,UAAU,KAAK,QAAQ,UAAU,UAAU,QAAQ,QAAQ,EAAE,KAAK,GAAG;AACtG;AAEA,SAAS,SAAS,KAAK;AAGrB,MAAI,OAAO;AAEX,MAAI,IAAI,WAAW,GAAG;AACpB,WAAO;AAAA,EACT;AAEA,WAAS,IAAI,GAAG,IAAI,IAAI,QAAQ,KAAK;AACnC,QAAI,QAAQ,IAAI,WAAW,CAAC;AAE5B,YAAQ,QAAQ,KAAK,OAAO;AAC5B,YAAQ;AAAA,EACV;AAEA,SAAO;AACT;;;ACxCA,SAASC,SAAQ,KAAK;AAAE;AAA2B,SAAOA,WAAU,cAAc,OAAO,UAAU,YAAY,OAAO,OAAO,WAAW,SAAUC,MAAK;AAAE,WAAO,OAAOA;AAAA,EAAK,IAAI,SAAUA,MAAK;AAAE,WAAOA,QAAO,cAAc,OAAO,UAAUA,KAAI,gBAAgB,UAAUA,SAAQ,OAAO,YAAY,WAAW,OAAOA;AAAA,EAAK,GAAGD,SAAQ,GAAG;AAAG;AAE/U,SAASE,iBAAgB,UAAU,aAAa;AAAE,MAAI,EAAE,oBAAoB,cAAc;AAAE,UAAM,IAAI,UAAU,mCAAmC;AAAA,EAAG;AAAE;AAExJ,SAASC,mBAAkB,QAAQ,OAAO;AAAE,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AAAE,QAAI,aAAa,MAAM,CAAC;AAAG,eAAW,aAAa,WAAW,cAAc;AAAO,eAAW,eAAe;AAAM,QAAI,WAAW;AAAY,iBAAW,WAAW;AAAM,WAAO,eAAe,QAAQ,WAAW,KAAK,UAAU;AAAA,EAAG;AAAE;AAE5T,SAASC,cAAa,aAAa,YAAY,aAAa;AAAE,MAAI;AAAY,IAAAD,mBAAkB,YAAY,WAAW,UAAU;AAAG,MAAI;AAAa,IAAAA,mBAAkB,aAAa,WAAW;AAAG,SAAO,eAAe,aAAa,aAAa,EAAE,UAAU,MAAM,CAAC;AAAG,SAAO;AAAa;AAE5R,SAASE,WAAU,UAAU,YAAY;AAAE,MAAI,OAAO,eAAe,cAAc,eAAe,MAAM;AAAE,UAAM,IAAI,UAAU,oDAAoD;AAAA,EAAG;AAAE,WAAS,YAAY,OAAO,OAAO,cAAc,WAAW,WAAW,EAAE,aAAa,EAAE,OAAO,UAAU,UAAU,MAAM,cAAc,KAAK,EAAE,CAAC;AAAG,SAAO,eAAe,UAAU,aAAa,EAAE,UAAU,MAAM,CAAC;AAAG,MAAI;AAAY,IAAAC,iBAAgB,UAAU,UAAU;AAAG;AAEnc,SAASA,iBAAgB,GAAG,GAAG;AAAE,EAAAA,mBAAkB,OAAO,iBAAiB,OAAO,eAAe,KAAK,IAAI,SAASA,iBAAgBC,IAAGC,IAAG;AAAE,IAAAD,GAAE,YAAYC;AAAG,WAAOD;AAAA,EAAG;AAAG,SAAOD,iBAAgB,GAAG,CAAC;AAAG;AAEvM,SAASG,cAAa,SAAS;AAAE,MAAI,4BAA4BC,2BAA0B;AAAG,SAAO,SAAS,uBAAuB;AAAE,QAAI,QAAQC,iBAAgB,OAAO,GAAG;AAAQ,QAAI,2BAA2B;AAAE,UAAI,YAAYA,iBAAgB,IAAI,EAAE;AAAa,eAAS,QAAQ,UAAU,OAAO,WAAW,SAAS;AAAA,IAAG,OAAO;AAAE,eAAS,MAAM,MAAM,MAAM,SAAS;AAAA,IAAG;AAAE,WAAOC,4BAA2B,MAAM,MAAM;AAAA,EAAG;AAAG;AAExa,SAASA,4BAA2BC,OAAM,MAAM;AAAE,MAAI,SAASb,SAAQ,IAAI,MAAM,YAAY,OAAO,SAAS,aAAa;AAAE,WAAO;AAAA,EAAM,WAAW,SAAS,QAAQ;AAAE,UAAM,IAAI,UAAU,0DAA0D;AAAA,EAAG;AAAE,SAAOc,wBAAuBD,KAAI;AAAG;AAE/R,SAASC,wBAAuBD,OAAM;AAAE,MAAIA,UAAS,QAAQ;AAAE,UAAM,IAAI,eAAe,2DAA2D;AAAA,EAAG;AAAE,SAAOA;AAAM;AAErK,SAASH,6BAA4B;AAAE,MAAI,OAAO,YAAY,eAAe,CAAC,QAAQ;AAAW,WAAO;AAAO,MAAI,QAAQ,UAAU;AAAM,WAAO;AAAO,MAAI,OAAO,UAAU;AAAY,WAAO;AAAM,MAAI;AAAE,YAAQ,UAAU,QAAQ,KAAK,QAAQ,UAAU,SAAS,CAAC,GAAG,WAAY;AAAA,IAAC,CAAC,CAAC;AAAG,WAAO;AAAA,EAAM,SAAS,GAAP;AAAY,WAAO;AAAA,EAAO;AAAE;AAExU,SAASC,iBAAgB,GAAG;AAAE,EAAAA,mBAAkB,OAAO,iBAAiB,OAAO,eAAe,KAAK,IAAI,SAASA,iBAAgBJ,IAAG;AAAE,WAAOA,GAAE,aAAa,OAAO,eAAeA,EAAC;AAAA,EAAG;AAAG,SAAOI,iBAAgB,CAAC;AAAG;AAEnN,SAASI,SAAQ,QAAQ,gBAAgB;AAAE,MAAI,OAAO,OAAO,KAAK,MAAM;AAAG,MAAI,OAAO,uBAAuB;AAAE,QAAI,UAAU,OAAO,sBAAsB,MAAM;AAAG,uBAAmB,UAAU,QAAQ,OAAO,SAAU,KAAK;AAAE,aAAO,OAAO,yBAAyB,QAAQ,GAAG,EAAE;AAAA,IAAY,CAAC,IAAI,KAAK,KAAK,MAAM,MAAM,OAAO;AAAA,EAAG;AAAE,SAAO;AAAM;AAEpV,SAASC,eAAc,QAAQ;AAAE,WAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK;AAAE,QAAI,SAAS,QAAQ,UAAU,CAAC,IAAI,UAAU,CAAC,IAAI,CAAC;AAAG,QAAI,IAAID,SAAQ,OAAO,MAAM,GAAG,IAAE,EAAE,QAAQ,SAAU,KAAK;AAAE,MAAAE,iBAAgB,QAAQ,KAAK,OAAO,GAAG,CAAC;AAAA,IAAG,CAAC,IAAI,OAAO,4BAA4B,OAAO,iBAAiB,QAAQ,OAAO,0BAA0B,MAAM,CAAC,IAAIF,SAAQ,OAAO,MAAM,CAAC,EAAE,QAAQ,SAAU,KAAK;AAAE,aAAO,eAAe,QAAQ,KAAK,OAAO,yBAAyB,QAAQ,GAAG,CAAC;AAAA,IAAG,CAAC;AAAA,EAAG;AAAE,SAAO;AAAQ;AAEzf,SAASE,iBAAgB,KAAK,KAAK,OAAO;AAAE,MAAI,OAAO,KAAK;AAAE,WAAO,eAAe,KAAK,KAAK,EAAE,OAAc,YAAY,MAAM,cAAc,MAAM,UAAU,KAAK,CAAC;AAAA,EAAG,OAAO;AAAE,QAAI,GAAG,IAAI;AAAA,EAAO;AAAE,SAAO;AAAK;AAWhN,IAAIC,kBAAiBF,eAAcA,eAAc,CAAC,GAAG,eAAW,cAAc,GAAG,CAAC,GAAG;AAAA,EACnF,WAAW,IAAI,aAAiB;AAAA,EAChC,YAAY,IAAIG,YAAW;AAAA,EAC3B,YAAY,eAAe,IAAI,qBAAqB,IAAI,IAAI,eAAe;AAAA,EAC3E;AACF,CAAC;AAED,IAAI,SAAsB,yBAAU,aAAa;AAC/C,EAAAd,WAAUe,SAAQ,WAAW;AAE7B,MAAI,SAASX,cAAaW,OAAM;AAEhC,WAASA,UAAS;AAChB,QAAI,OAAO,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI;AAC/E,QAAI,UAAU,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI,CAAC;AAEnF,IAAAlB,iBAAgB,MAAMkB,OAAM;AAE5B,cAAUJ,eAAcA,eAAc,CAAC,GAAGE,eAAc,GAAG,OAAO;AAClE,WAAO,OAAO,KAAK,MAAM,MAAM,OAAO;AAAA,EACxC;AAEA,EAAAd,cAAagB,SAAQ,MAAM,CAAC;AAAA,IAC1B,KAAK;AAAA,IACL,OAAO,SAAS,UAAU,KAAK;AAC7B,UAAI,UAAU,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI,CAAC;AACnF,gBAAUJ,eAAcA,eAAc,CAAC,GAAGE,eAAc,GAAG,OAAO;AAClE,aAAO,eAAW,UAAU,KAAK,OAAO;AAAA,IAC1C;AAAA,EACF,CAAC,CAAC;AAEF,SAAOE;AACT,EAAE,cAAU;AAEZ,IAAI,UAAU;AAAd,IACIC,kBAAiB,QAAQ;AAD7B,IAEIC,QAAO,QAAQ;AACnB,IAAI,cAAcD,mBAAkBC,SAAQ,OAAOA,MAAK,UAAU,UAAU;;;AC1E5E,IAAM,eAAN,cAA2B,MAAM;AAAA,EAC/B,YAAY,OAAO,KAAK;AACtB,QAAI,QAAQ,QAAQ;AAClB,YAAM;AAAA,IACR;AACA,UAAM,uGAAuG;AAC7G,SAAK,QAAQ;AACb,SAAK,iBAAiB;AACtB,SAAK,UAAU;AAAA,EACjB;AACF;AACA,IAAO,uBAAQ;;;ACNA,SAAR,wBAAyC;AAC9C,SAAO,MAAM,GAAG,SAAS,EAAE,MAAM,SAAO;AACtC,QAAI,IAAI,SAAS,cAAc;AAC7B,YAAM;AAAA,IACR,OAAO;AACL,YAAM,IAAI,qBAAa,GAAG;AAAA,IAC5B;AAAA,EACF,CAAC;AACH;;;ACZA,IAAM,iBAAN,cAA6B,MAAM;AAAA,EACjC,YAAY,SAAS,SAAS;AAC5B,QAAI,YAAY,QAAQ;AACtB,gBAAU,CAAC;AAAA,IACb;AACA,UAAM,OAAO;AACb,SAAK,QAAQ,QAAQ;AACrB,QAAI,KAAK,SAAS,IAAY,KAAK,OAAO,gBAAgB,GAAG;AAC3D,WAAK,iBAAiB,KAAK,MAAM;AAAA,IACnC;AAAA,EACF;AACF;AACA,IAAO,yBAAQ;;;ACXf,IAAM,YAAN,cAAwB,MAAM;AAAA,EAC5B,cAAc;AACZ,UAAM,wBAAwB;AAC9B,SAAK,OAAO;AACZ,SAAK,cAAc;AAAA,EACrB;AACF;AACA,IAAO,oBAAQ;;;ACPf,IAAI;AACJ,SAASC,6BAA4B,UAAU,YAAY;AAAE,MAAI,CAAC,OAAO,UAAU,eAAe,KAAK,UAAU,UAAU,GAAG;AAAE,UAAM,IAAI,UAAU,gDAAgD;AAAA,EAAG;AAAE,SAAO;AAAU;AAC1N,IAAIC,MAAK;AACT,SAASC,4BAA2B,MAAM;AAAE,SAAO,eAAeD,QAAO,MAAM;AAAM;AAIrF,IAAM,cAAc;AAAA,EAClB,WAAW;AACb;AACA,SAAS,WAAW,KAAK;AACvB,SAAO,IAAI,QAAQ,OAAO,EAAE;AAC9B;AACA,eAAe,mBAAmB,KAAK;AACrC,MAAI,IAAI,WAAW,KAAK;AACtB,UAAM,IAAI,kBAAU;AAAA,EACtB;AACA,QAAM,cAAc,IAAI,KAAK;AAC7B,MAAI,IAAI,IAAI;AACV,WAAO;AAAA,EACT;AACA,MAAI,SAAS,+BAA+B,IAAI,WAAW,IAAI;AAC/D,MAAI;AACF,UAAM,UAAU,MAAM;AACtB,aAAS,QAAQ,UAAU,GAAG,mBAAmB,QAAQ,YAAY;AACrE,aAAS,QAAQ,YAAY,GAAG,sBAAsB,QAAQ,cAAc;AAAA,EAC9E,QAAE;AAAA,EAA0E;AAC5E,QAAM,IAAI,MAAM,MAAM;AACxB;AAGA,IAAM,sBAAsB,oBAAI,IAAI;AACpC,IAAI,oBAAiC,gBAAAC,4BAA2B,kBAAkB;AAClF,IAAI,UAAuB,gBAAAA,4BAA2B,QAAQ;AAC9D,cAAc,OAAO,IAAI,gCAAgC;AACzD,IAAqB,gBAArB,MAAmC;AAAA,EACjC,YAAY,MAAM,MAAM;AACtB,WAAO,eAAe,MAAM,SAAS;AAAA,MACnC,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,mBAAmB;AAAA,MAC7C,UAAU;AAAA,MACV,OAAO;AAAA,IACT,CAAC;AACD,SAAK,OAAO;AACZ,SAAK,OAAO;AACZ,SAAK,oBAAoB,KAAK,kBAAkB,KAAK,IAAI;AACzD,IAAAF,6BAA4B,MAAM,iBAAiB,EAAE,iBAAiB,IAAI,QAAQ,OAAO,SAAS,KAAK;AAAA,EACzG;AAAA,EACA,oBAAoB,SAAS;AAC3B,IAAAA,6BAA4B,MAAM,iBAAiB,EAAE,iBAAiB,IAAI;AAAA,EAC5E;AAAA,EACA,CAAC,WAAW,IAAI;AACd,WAAOA,6BAA4B,MAAM,iBAAiB,EAAE,iBAAiB;AAAA,EAC/E;AAAA,EACA,IAAI,WAAW;AACb,UAAM;AAAA,MACJ;AAAA,IACF,IAAI,KAAK,KAAK,SAAS;AACvB,UAAM,OAAO,KAAK,KAAK;AACvB,WAAO,WAAW,aAAa,UAAU,IAAI,IAAI,UAAU,IAAI,IAAI,IAAI;AAAA,EACzE;AAAA,EACA,MAAM,UAAU;AACd,UAAM,iBAAiB;AAAA,MACrB,QAAQ;AAAA,MACR,gBAAgB;AAAA,MAChB,iBAAiB,0BAA0B,cAAc;AAAA,IAC3D;AACA,WAAO;AAAA,MACL,GAAG;AAAA,MACH,GAAGA,6BAA4B,MAAM,iBAAiB,EAAE,iBAAiB;AAAA,IAC3E;AAAA,EACF;AAAA,EACA,kBAAkB,MAAM;AACtB,QAAI;AAAA,MACF;AAAA,IACF,IAAI;AACJ,UAAM,QAAQ,KAAK,KAAK,SAAS;AACjC,UAAM,YAAY,MAAM,aAAa,CAAC;AACtC,UAAM,OAAO,KAAK,KAAK;AAGvB,QAAI,QAAQ,IAAI,MAAM,KAAK,QAAQ,IAAI,MAAM,MAAM,UAAU,IAAI,GAAG;AAClE,WAAK,KAAK,SAAS;AAAA,QACjB,WAAW;AAAA,UACT,GAAG;AAAA,UACH,CAAC,IAAI,GAAG,QAAQ,IAAI,MAAM;AAAA,QAC5B;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcA,MAAM,UAAU,MAAM;AACpB,UAAM,uBAAuB,oBAAoB,IAAI,KAAK,QAAQ;AAClE,QAAI,wBAAwB;AAAM,aAAO;AACzC,UAAM,yBAAyB,CAAC,UAAU,gBAAgB,iBAAiB;AAC3E,UAAM,WAAW,YAAY;AAC3B,UAAI;AACF,cAAM,WAAW,MAAM,MAAMA,6BAA4B,MAAM,OAAO,EAAE,OAAO,EAAE,IAAI,GAAG;AAAA,UACtF,QAAQ;AAAA,QACV,CAAC;AACD,cAAM,SAAS,SAAS,QAAQ,IAAI,8BAA8B;AAClE,YAAI,UAAU,QAAQ,WAAW,KAAK;AACpC,8BAAoB,IAAI,KAAK,UAAU,sBAAsB;AAC7D,iBAAO;AAAA,QACT;AACA,aAAK,KAAK,IAAI,0EAA0E,KAAK,YAAY,QAAQ;AACjH,cAAM,iBAAiB,OAAO,MAAM,GAAG,EAAE,IAAI,gBAAc,WAAW,KAAK,EAAE,YAAY,CAAC;AAC1F,4BAAoB,IAAI,KAAK,UAAU,cAAc;AACrD,eAAO;AAAA,MACT,SAAS,KAAP;AACA,aAAK,KAAK,IAAI,sDAAsD,OAAO,SAAS;AAGpF,4BAAoB,OAAO,KAAK,QAAQ;AACxC,eAAO;AAAA,MACT;AAAA,IACF,GAAG;AACH,wBAAoB,IAAI,KAAK,UAAU,OAAO;AAC9C,WAAO;AAAA,EACT;AAAA,EACA,MAAM,oBAAoB,MAAM;AAC9B,UAAM,CAAC,gBAAgB,OAAO,IAAI,MAAM,QAAQ,IAAI,CAAC,KAAK,UAAU,IAAI,GAAG,KAAK,QAAQ,CAAC,CAAC;AAE1F,WAAO,OAAO,YAAY,OAAO,QAAQ,OAAO,EAAE,OAAO,WAAS;AAChE,UAAI,CAAC,MAAM,IAAI;AACf,UAAI,CAAC,eAAe,SAAS,OAAO,YAAY,CAAC,GAAG;AAClD,aAAK,KAAK,IAAI,iDAAiD,QAAQ;AACvE,eAAO;AAAA,MACT;AACA,aAAO;AAAA,IACT,CAAC,CAAC;AAAA,EACJ;AAAA;AAAA,EAGA,MAAM,QAAQ,OAAO;AACnB,QAAI;AAAA,MACF;AAAA,MACA,SAAS;AAAA,MACT;AAAA,MACA;AAAA,MACA;AAAA,IACF,IAAI;AACJ,QAAI;AACF,YAAM,UAAU,MAAM,KAAK,oBAAoB,IAAI;AACnD,YAAM,WAAW,MAAM,sBAAsBA,6BAA4B,MAAM,OAAO,EAAE,OAAO,EAAE,IAAI,GAAG;AAAA,QACtG;AAAA,QACA;AAAA,QACA;AAAA,QACA,aAAa,KAAK,KAAK,wBAAwB;AAAA,QAC/C,MAAM,OAAO,KAAK,UAAU,IAAI,IAAI;AAAA,MACtC,CAAC;AACD,UAAI,CAAC;AAAkB,aAAK,kBAAkB,QAAQ;AACtD,aAAO,mBAAmB,QAAQ;AAAA,IACpC,SAAS,KAAP;AACA,UAAI,OAAO,QAAQ,IAAI;AAAa,cAAM;AAC1C,YAAM,IAAI,uBAAe,aAAa,UAAUA,6BAA4B,MAAM,OAAO,EAAE,OAAO,EAAE,IAAI,KAAK;AAAA,QAC3G,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EACA,MAAM,IAAI,MAAM,SAAS;AACvB,QAAI,YAAY,QAAQ;AACtB,gBAAU;AAAA,IACZ;AAGA,QAAI,OAAO,YAAY;AAAW,gBAAU;AAAA,QAC1C,kBAAkB;AAAA,MACpB;AACA,WAAO,KAAK,QAAQ;AAAA,MAClB,GAAG;AAAA,MACH;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EACA,MAAM,KAAK,MAAM,MAAM,SAAS;AAC9B,QAAI,YAAY,QAAQ;AACtB,gBAAU;AAAA,IACZ;AAGA,QAAI,OAAO,YAAY;AAAW,gBAAU;AAAA,QAC1C,kBAAkB;AAAA,MACpB;AACA,WAAO,KAAK,QAAQ;AAAA,MAClB,GAAG;AAAA,MACH;AAAA,MACA,QAAQ;AAAA,MACR;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EACA,MAAM,OAAO,MAAM,MAAM,SAAS;AAChC,QAAI,SAAS,QAAQ;AACnB,aAAO;AAAA,IACT;AAGA,QAAI,OAAO,YAAY;AAAW,gBAAU;AAAA,QAC1C,kBAAkB;AAAA,MACpB;AACA,WAAO,KAAK,QAAQ;AAAA,MAClB,GAAG;AAAA,MACH;AAAA,MACA,QAAQ;AAAA,MACR;AAAA,IACF,CAAC;AAAA,EACH;AACF;AACA,SAAS,SAAS,KAAK;AACrB,MAAI,kBAAkB,KAAK,GAAG,GAAG;AAC/B,WAAO;AAAA,EACT;AACA,SAAO,GAAG,KAAK,YAAY;AAC7B;AACA,cAAc,UAAU,YAAY;;;ACpOpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAKO,SAAS,QAAQ,KAAK,OAAO;AAClC,SAAO,IAAI,QAAQ,aAAW;AAC5B,iBAAa,QAAQ,KAAK,KAAK;AAC/B,YAAQ;AAAA,EACV,CAAC;AACH;AACO,SAAS,QAAQ,KAAK;AAC3B,SAAO,QAAQ,QAAQ,aAAa,QAAQ,GAAG,CAAC;AAClD;AACO,SAAS,WAAW,KAAK;AAC9B,SAAO,IAAI,QAAQ,aAAW;AAC5B,iBAAa,WAAW,GAAG;AAC3B,YAAQ;AAAA,EACV,CAAC;AACH;;;ACjBA,SAASG,6BAA4B,UAAU,YAAY;AAAE,MAAI,CAAC,OAAO,UAAU,eAAe,KAAK,UAAU,UAAU,GAAG;AAAE,UAAM,IAAI,UAAU,gDAAgD;AAAA,EAAG;AAAE,SAAO;AAAU;AAC1N,IAAIC,MAAK;AACT,SAASC,4BAA2B,MAAM;AAAE,SAAO,eAAeD,QAAO,MAAM;AAAM;AAGrF,IAAM,UAAU,CAAAA,QAAM;AACpB,SAAOA,IAAG,MAAM,GAAG,EAAE,IAAI,OAAK,EAAE,OAAO,CAAC,EAAE,YAAY,IAAI,EAAE,MAAM,CAAC,CAAC,EAAE,KAAK,GAAG;AAChF;AACA,IAAI,0BAAuC,gBAAAC,4BAA2B,wBAAwB;AAC9F,IAAI,gBAA6B,gBAAAA,4BAA2B,cAAc;AAC1E,IAAI,mBAAgC,gBAAAA,4BAA2B,iBAAiB;AAChF,IAAqB,WAArB,cAAsC,cAAc;AAAA,EAClD,YAAY,MAAM,MAAM;AACtB,UAAM,MAAM,IAAI;AAChB,WAAO,eAAe,MAAM,kBAAkB;AAAA,MAC5C,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,eAAe;AAAA,MACzC,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,yBAAyB;AAAA,MACnD,UAAU;AAAA,MACV,OAAO;AAAA,IACT,CAAC;AACD,SAAK,WAAW,KAAK;AACrB,SAAK,KAAK,KAAK;AACf,SAAK,OAAO,KAAK,KAAK,QAAQ,QAAQ,KAAK,EAAE;AAC7C,SAAK,WAAW,KAAK,KAAK;AAC1B,SAAK,WAAW,aAAa,KAAK;AAClC,SAAK,sBAAsB,KAAK,KAAK;AACrC,SAAK,eAAe;AAAA,EACtB;AAAA,EACA,MAAM,UAAU;AACd,UAAM,CAAC,SAAS,KAAK,IAAI,MAAM,QAAQ,IAAI,CAAC,MAAM,QAAQ,GAAGF,6BAA4B,MAAM,aAAa,EAAE,aAAa,EAAE,CAAC,CAAC;AAC/H,UAAM,cAAc,CAAC;AACrB,QAAI,OAAO;AACT,kBAAY,iBAAiB,IAAI;AAAA,IACnC;AACA,QAAI,KAAK,qBAAqB;AAC5B,kBAAY,yBAAyB,IAAI,KAAK,KAAK,UAAU;AAAA,QAC3D,QAAQ,KAAK;AAAA,MACf,CAAC,CAAC;AAAA,IACJ;AACA,WAAO;AAAA,MACL,GAAG;AAAA,MACH,GAAG;AAAA,IACL;AAAA,EACF;AAAA,EACA,kBAAkB,UAAU;AAC1B,UAAM,kBAAkB,QAAQ;AAChC,UAAM,SAAS,KAAK,KAAK,UAAU,KAAK,QAAQ;AAChD,UAAM,mBAAmB,OAAO,eAAe,EAAE;AACjD,UAAM,gBAAgB,mBAAmB,SAAS,WAAW,MAAM,SAAS,SAAS;AACrF,WAAO,eAAe;AAAA,MACpB;AAAA,IACF,CAAC;AACD,WAAO;AAAA,EACT;AAAA,EACA,MAAM,aAAa,OAAO;AACxB,WAAO,KAAK,KAAK,UAAU,KAAK,QAAQ,EAAE,QAAQ,QAAQ,KAAK,UAAU,KAAK;AAAA,EAChF;AAAA;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,gBAAgB;AACpB,QAAI,KAAK,uBAAuB,CAAC,KAAK,cAAc;AAClD,YAAM,KAAK,kBAAkB;AAC7B,UAAI,CAAC,KAAK,cAAc;AACtB,cAAM,IAAI,MAAM,4FAA4F;AAAA,MAC9G;AAAA,IACF;AAAA,EACF;AAAA,EACA,QAAQ,SAAS;AACf,QAAI,YAAY,QAAQ;AACtB,gBAAU,CAAC;AAAA,IACb;AACA,UAAM,SAAS,IAAI,gBAAgB,OAAO;AAC1C,QAAI,KAAK,cAAc;AACrB,aAAO,IAAI,oBAAoB,KAAK,YAAY;AAAA,IAClD;AACA,WAAO,GAAG,KAAK,YAAY,KAAK,cAAc;AAAA,EAChD;AAAA,EACA,kBAAkB;AAChB,WAAO,GAAG,KAAK,YAAY,KAAK;AAAA,EAClC;AAAA,EACA,QAAQC,KAAI;AACV,WAAO,GAAG,KAAK,YAAY,KAAK,UAAUA;AAAA,EAC5C;AAAA;AAAA,EAGA,MAAM,UAAU;AACd,UAAMD,6BAA4B,MAAM,uBAAuB,EAAE,uBAAuB;AACxF,QAAI;AAEF,aAAO,MAAM,MAAM,QAAQ,GAAG,SAAS;AAAA,IACzC,SAAS,KAAP;AACA,UAAI,CAAC,IAAI;AAAa,cAAM;AAE5B,YAAMA,6BAA4B,MAAM,uBAAuB,EAAE,uBAAuB;AAIxF,MAAAA,6BAA4B,MAAM,uBAAuB,EAAE,uBAAuB,KAAK,YAAY;AACjG,YAAI;AACF,gBAAM,WAAW,MAAM,MAAM,QAAQ;AAAA,YACnC,MAAM,KAAK,gBAAgB;AAAA,YAC3B,QAAQ;AAAA,UACV,CAAC;AACD,gBAAM,KAAK,aAAa,SAAS,aAAa;AAAA,QAChD,UAAE;AACA,UAAAA,6BAA4B,MAAM,uBAAuB,EAAE,uBAAuB,IAAI;AAAA,QACxF;AAAA,MACF,GAAG;AACH,YAAMA,6BAA4B,MAAM,uBAAuB,EAAE,uBAAuB;AAGxF,aAAO,MAAM,QAAQ,GAAG,SAAS;AAAA,IACnC;AAAA,EACF;AAAA,EACA,MAAM,oBAAoB;AACxB,QAAI,CAAC,KAAK,qBAAqB;AAC7B;AAAA,IACF;AACA,QAAI;AACF,YAAM,MAAM,MAAM,KAAK,KAAK,GAAG,KAAK,eAAe;AAAA,QACjD,QAAQ,KAAK;AAAA,MACf,CAAC;AACD,WAAK,eAAe,IAAI;AAAA,IAC1B,SAAS,KAAP;AACA,WAAK,KAAK,IAAI,kDAAkD,OAAO,SAAS;AAAA,IAClF;AAAA,EACF;AAAA,EACA,KAAK,WAAW;AACd,WAAO,KAAK,IAAI,GAAG,KAAK,WAAW,aAAa,IAAI;AAAA,EACtD;AAAA,EACA,MAAM,SAAS;AACb,UAAM,WAAW,MAAM,KAAK,IAAI,GAAG,KAAK,WAAW;AACnD,UAAMA,6BAA4B,MAAM,gBAAgB,EAAE,gBAAgB,EAAE;AAC5E,WAAO;AAAA,EACT;AAAA,EACA,OAAO,WAAW,QAAQ,MAAM,aAAa;AAE3C,WAAO,OAAO;AACd,WAAO,QAAQ,CAAC;AAChB,QAAI,aAAa;AACf,aAAO,OAAO;AAAA,QACZ,GAAG;AAAA,QACH,GAAG;AAAA,MACL;AAAA,IACF;AACA,QAAI,KAAK,aAAa,KAAK,eAAe;AACxC,YAAM,IAAI,MAAM,mQAAmQ;AAAA,IACrR;AACA,QAAI,KAAK,uBAAuB;AAC9B,YAAM,UAAU,KAAK;AAErB,UAAI,OAAO,YAAY,YAAY,CAAC,MAAM,QAAQ,OAAO,KAAK,EAAE,mBAAmB,SAAS;AAC1F,cAAM,IAAI,UAAU,GAAG,OAAO,6EAA6E;AAAA,MAC7G;AACA,aAAO,KAAK,wBAAwB;AAAA,IACtC,WAAW,uBAAuB,KAAK,KAAK,YAAY,GAAG;AAEzD,aAAO,KAAK,wBAAwB,WAAW,KAAK,aAAa,QAAQ,SAAS,EAAE;AAAA,IACtF,OAAO;AACL,aAAO,KAAK,wBAAwB,IAAI,IAAI,KAAK,YAAY,EAAE;AAAA,IACjE;AACA,WAAO,UAAU,OAAO,KAAK,WAAW;AAAA,EAE1C;AACF;AACA,eAAe,iBAAiB;AAC9B,SAAO,KAAK,KAAK,UAAU,KAAK,QAAQ,EAAE,QAAQ,QAAQ,KAAK,QAAQ;AACzE;AACA,eAAe,oBAAoB;AACjC,SAAO,KAAK,KAAK,UAAU,KAAK,QAAQ,EAAE,QAAQ,WAAW,KAAK,QAAQ;AAC5E;;;AC9KA,+BAAe;AAJf,IAAIG;AAAJ,IAAiBC;AACjB,SAASC,6BAA4B,UAAU,YAAY;AAAE,MAAI,CAAC,OAAO,UAAU,eAAe,KAAK,UAAU,UAAU,GAAG;AAAE,UAAM,IAAI,UAAU,gDAAgD;AAAA,EAAG;AAAE,SAAO;AAAU;AAC1N,IAAIC,MAAK;AACT,SAASC,4BAA2B,MAAM;AAAE,SAAO,eAAeD,QAAO,MAAM;AAAM;AAErF,IAAI,UAAuB,gBAAAC,4BAA2B,QAAQ;AAC9D,IAAI,WAAwB,gBAAAA,4BAA2B,SAAS;AAChE,IAAI,UAAuB,gBAAAA,4BAA2B,QAAQ;AAC9D,IAAI,UAAuB,gBAAAA,4BAA2B,QAAQ;AAC9D,IAAI,iBAA8B,gBAAAA,4BAA2B,eAAe;AAC5EJ,eAAc,OAAO,IAAI,sBAAsB;AAC/CC,gBAAe,OAAO,IAAI,sBAAsB;AAChD,IAAqB,aAArB,MAAgC;AAAA,EAC9B,YAAY,MAAM;AAChB,WAAO,eAAe,MAAM,SAAS;AAAA,MACnC,UAAU;AAAA,MACV,OAAO,CAAC;AAAA,IACV,CAAC;AACD,WAAO,eAAe,MAAM,UAAU;AAAA,MACpC,UAAU;AAAA,MACV,WAAO,yBAAAI,SAAG;AAAA,IACZ,CAAC;AACD,WAAO,eAAe,MAAM,SAAS;AAAA,MACnC,UAAU;AAAA,MACV,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,SAAS;AAAA,MACnC,UAAU;AAAA,MACV,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,gBAAgB;AAAA,MAC1C,UAAU;AAAA,MACV,OAAO,OAAK;AACV,YAAI;AACF,gBAAM,UAAU,KAAK,MAAM,EAAE,IAAI;AACjC,eAAK,KAAK,QAAQ,QAAQ,QAAQ,OAAO;AAAA,QAC3C,SAAS,KAAP;AAEA,kBAAQ,IAAI,GAAG;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AACD,SAAK,OAAO;AACZ,QAAI,CAAC,QAAQ,KAAK,aAAa,OAAO;AACpC,WAAK,KAAK;AAAA,IACZ;AAAA,EACF;AAAA,EACA,IAAI,SAAS;AACX,WAAOH,6BAA4B,MAAM,OAAO,EAAE,OAAO;AAAA,EAC3D;AAAA,EACA,CAACF,YAAW,IAAI;AACd,WAAOE,6BAA4B,MAAM,OAAO,EAAE,OAAO;AAAA,EAC3D;AAAA,EACA,CAACD,aAAY,IAAI;AACf,WAAOC,6BAA4B,MAAM,OAAO,EAAE,OAAO;AAAA,EAC3D;AAAA,EACA,OAAO;AACL,QAAIA,6BAA4B,MAAM,OAAO,EAAE,OAAO,KAAK;AAAM;AACjE,IAAAA,6BAA4B,MAAM,OAAO,EAAE,OAAO,IAAI,IAAI,UAAU,KAAK,KAAK,MAAM;AACpF,IAAAA,6BAA4B,MAAM,OAAO,EAAE,OAAO,EAAE,SAAS,MAAM;AACjE,MAAAA,6BAA4B,MAAM,OAAO,EAAE,OAAO,IAAI;AACtD,aAAOA,6BAA4B,MAAM,OAAO,EAAE,OAAO,EAAE,SAAS,KAAKA,6BAA4B,MAAM,OAAO,EAAE,OAAO,GAAG;AAC5H,cAAM,QAAQA,6BAA4B,MAAM,OAAO,EAAE,OAAO,EAAE,MAAM;AACxE,aAAK,KAAK,MAAM,QAAQ,MAAM,OAAO;AAAA,MACvC;AAAA,IACF;AACA,IAAAA,6BAA4B,MAAM,OAAO,EAAE,OAAO,EAAE,UAAU,MAAM;AAClE,MAAAA,6BAA4B,MAAM,OAAO,EAAE,OAAO,IAAI;AACtD,MAAAA,6BAA4B,MAAM,OAAO,EAAE,OAAO,IAAI;AAAA,IACxD;AACA,IAAAA,6BAA4B,MAAM,OAAO,EAAE,OAAO,EAAE,YAAYA,6BAA4B,MAAM,cAAc,EAAE,cAAc;AAAA,EAClI;AAAA,EACA,QAAQ;AACN,QAAI;AACJ,KAAC,wBAAwBA,6BAA4B,MAAM,OAAO,EAAE,OAAO,MAAM,OAAO,SAAS,sBAAsB,MAAM;AAAA,EAC/H;AAAA,EACA,KAAK,QAAQ,SAAS;AAGpB,QAAI,CAACA,6BAA4B,MAAM,OAAO,EAAE,OAAO,GAAG;AACxD,MAAAA,6BAA4B,MAAM,OAAO,EAAE,OAAO,EAAE,KAAK;AAAA,QACvD;AAAA,QACA;AAAA,MACF,CAAC;AACD;AAAA,IACF;AACA,IAAAA,6BAA4B,MAAM,OAAO,EAAE,OAAO,EAAE,KAAK,KAAK,UAAU;AAAA,MACtE;AAAA,MACA;AAAA,IACF,CAAC,CAAC;AAAA,EACJ;AAAA,EACA,GAAG,QAAQ,SAAS;AAClB,IAAAA,6BAA4B,MAAM,QAAQ,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;AAAA,EAC1E;AAAA,EACA,KAAK,QAAQ,SAAS;AACpB,IAAAA,6BAA4B,MAAM,QAAQ,EAAE,QAAQ,EAAE,KAAK,QAAQ,OAAO;AAAA,EAC5E;AAAA,EACA,KAAK,QAAQ,SAAS;AACpB,IAAAA,6BAA4B,MAAM,QAAQ,EAAE,QAAQ,EAAE,KAAK,QAAQ,OAAO;AAAA,EAC5E;AACF;;;ACpGA,sBAAqB;AACrB,SAAS,mBAAmB,UAAU,cAAc,MAAM;AACxD,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI;AACJ,MAAI,UAAU;AACZ,aAAS,KAAK,IAAI,oBAAoB,UAAU;AAChD,aAAS,KAAK,KAAK,mBAAmB,MAAM;AAAA,MAC1C;AAAA,MACA;AAAA,MACA;AAAA,IACF,CAAC;AAAA,EACH;AACF;AACA,IAAO,iCAAQ,gBAAAI,SAAS,oBAAoB,KAAK;AAAA,EAC/C,SAAS;AAAA,EACT,UAAU;AACZ,CAAC;;;ACnBc,SAAR,cAA+B,KAAK;AAEzC,QAAM,QAAQ;AACd,QAAM,OAAO,MAAM,KAAK,GAAG,EAAE,CAAC;AAC9B,QAAM,iBAAiB,cAAc,KAAK,GAAG,IAAI,OAAO;AACxD,SAAO,GAAG,oBAAoB;AAChC;;;ACNA,SAASC,6BAA4B,UAAU,YAAY;AAAE,MAAI,CAAC,OAAO,UAAU,eAAe,KAAK,UAAU,UAAU,GAAG;AAAE,UAAM,IAAI,UAAU,gDAAgD;AAAA,EAAG;AAAE,SAAO;AAAU;AAC1N,IAAIC,MAAK;AACT,SAASC,4BAA2B,MAAM;AAAE,SAAO,eAAeD,QAAO,MAAM;AAAM;AACrF,IAAIE,YAAwB,gBAAAD,4BAA2B,SAAS;AAChE,IAAI,UAAuB,gBAAAA,4BAA2B,QAAQ;AAK9D,IAAqB,eAArB,MAAkC;AAAA,EAChC,YAAY,SAAS;AACnB,WAAO,eAAe,MAAMC,WAAU;AAAA,MACpC,UAAU;AAAA,MACV,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,SAAS;AAAA,MACnC,UAAU;AAAA,MACV,OAAO,CAAC;AAAA,IACV,CAAC;AACD,IAAAH,6BAA4B,MAAMG,SAAQ,EAAEA,SAAQ,IAAI;AAAA,EAC1D;AAAA,EACA,GAAG,OAAO,IAAI;AACZ,IAAAH,6BAA4B,MAAM,OAAO,EAAE,OAAO,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC;AACpE,WAAOA,6BAA4B,MAAMG,SAAQ,EAAEA,SAAQ,EAAE,GAAG,OAAO,EAAE;AAAA,EAC3E;AAAA,EACA,SAAS;AACP,eAAW,CAAC,OAAO,EAAE,KAAKH,6BAA4B,MAAM,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC,GAAG;AACvF,MAAAA,6BAA4B,MAAMG,SAAQ,EAAEA,SAAQ,EAAE,IAAI,OAAO,EAAE;AAAA,IACrE;AAAA,EACF;AACF;;;AC9BA,SAAS,eAAe,KAAK;AAC3B,MAAI,CAAC,KAAK;AACR,WAAO;AAAA,EACT;AACA,SAAO,IAAI,eAAe,KAAK,IAAI,eAAe,KAAK,IAAI,WAAW;AACxE;AACA,IAAO,yBAAQ;;;ACNf,SAASC,6BAA4B,UAAU,YAAY;AAAE,MAAI,CAAC,OAAO,UAAU,eAAe,KAAK,UAAU,UAAU,GAAG;AAAE,UAAM,IAAI,UAAU,gDAAgD;AAAA,EAAG;AAAE,SAAO;AAAU;AAC1N,IAAIC,MAAK;AACT,SAASC,4BAA2B,MAAM;AAAE,SAAO,eAAeD,QAAO,MAAM;AAAM;AACrF,SAAS,kBAAkB,OAAO;AAChC,SAAO,IAAI,MAAM,aAAa;AAAA,IAC5B;AAAA,EACF,CAAC;AACH;AACA,SAAS,QAAQ,QAAQ;AACvB,MAAI,UAAU,MAAM;AAClB,QAAI;AACJ,UAAM,eAAe,MAAM,KAAK,MAAM,OAAO,MAAM;AACnD,WAAO,iBAAiB,SAAS,cAAc;AAAA,MAC7C,MAAM;AAAA,IACR,CAAC;AACD,UAAM,sBAAsB,MAAM;AAChC,aAAO,oBAAoB,SAAS,YAAY;AAAA,IAClD;AACA,KAAC,aAAa,KAAK,SAAS,OAAO,SAAS,WAAW,KAAK,MAAM,qBAAqB,mBAAmB;AAAA,EAC5G;AACA,SAAO;AACT;AACA,IAAI,kBAA+B,gBAAAC,4BAA2B,gBAAgB;AAC9E,IAAI,kBAA+B,gBAAAA,4BAA2B,gBAAgB;AAC9E,IAAI,UAAuB,gBAAAA,4BAA2B,QAAQ;AAC9D,IAAI,cAA2B,gBAAAA,4BAA2B,YAAY;AACtE,IAAI,aAA0B,gBAAAA,4BAA2B,WAAW;AACpE,IAAI,cAA2B,gBAAAA,4BAA2B,YAAY;AACtE,IAAI,qBAAkC,gBAAAA,4BAA2B,mBAAmB;AACpF,IAAI,QAAqB,gBAAAA,4BAA2B,MAAM;AAC1D,IAAI,aAA0B,gBAAAA,4BAA2B,WAAW;AACpE,IAAI,QAAqB,gBAAAA,4BAA2B,MAAM;AAC1D,IAAI,SAAsB,gBAAAA,4BAA2B,OAAO;AAC5D,IAAI,WAAwB,gBAAAA,4BAA2B,SAAS;AAChE,IAAI,UAAuB,gBAAAA,4BAA2B,QAAQ;AAC9D,IAAI,iBAA8B,gBAAAA,4BAA2B,eAAe;AACrE,IAAM,mBAAN,MAAuB;AAAA,EAC5B,YAAY,OAAO;AACjB,WAAO,eAAe,MAAM,UAAU;AAAA,MACpC,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,QAAQ;AAAA,MAClC,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,OAAO;AAAA,MACjC,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,YAAY;AAAA,MACtC,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,OAAO;AAAA,MACjC,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,iBAAiB;AAAA,MAC3C,UAAU;AAAA,MACV,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,iBAAiB;AAAA,MAC3C,UAAU;AAAA,MACV,OAAO,CAAC;AAAA,IACV,CAAC;AACD,WAAO,eAAe,MAAM,SAAS;AAAA,MACnC,UAAU;AAAA,MACV,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,aAAa;AAAA,MACvC,UAAU;AAAA,MACV,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,YAAY;AAAA,MACtC,UAAU;AAAA,MACV,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,aAAa;AAAA,MACvC,UAAU;AAAA,MACV,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,oBAAoB;AAAA,MAC9C,UAAU;AAAA,MACV,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,SAAS;AAAA,MACnC,UAAU;AAAA,MACV,OAAO,MAAM,KAAK,OAAO;AAAA,IAC3B,CAAC;AACD,WAAO,eAAe,MAAM,gBAAgB;AAAA,MAC1C,UAAU;AAAA,MACV,OAAO,MAAM;AACX,YAAIF,6BAA4B,MAAM,OAAO,EAAE,OAAO,GAAG;AACvD,UAAAA,6BAA4B,MAAM,kBAAkB,EAAE,kBAAkB,IAAI,WAAWA,6BAA4B,MAAM,cAAc,EAAE,cAAc,GAAG,CAAC;AAC3J;AAAA,QACF;AACA,QAAAA,6BAA4B,MAAM,UAAU,EAAE,UAAU,IAAI,KAAK;AACjE,aAAK,QAAQ,KAAK,MAAMA,6BAA4B,MAAM,WAAW,EAAE,WAAW,IAAIA,6BAA4B,MAAM,UAAU,EAAE,UAAU,KAAK,CAAC;AACpJ,iBAAS,IAAIA,6BAA4B,MAAM,UAAU,EAAE,UAAU,GAAG,KAAK,KAAK,OAAO,KAAK;AAC5F,UAAAA,6BAA4B,MAAM,UAAU,EAAE,UAAU,EAAE;AAAA,QAC5D;AACA,YAAIA,6BAA4B,MAAM,WAAW,EAAE,WAAW,IAAIA,6BAA4B,MAAM,UAAU,EAAE,UAAU,IAAI,GAAG;AAC/H,UAAAA,6BAA4B,MAAM,kBAAkB,EAAE,kBAAkB,IAAI,WAAWA,6BAA4B,MAAM,cAAc,EAAE,cAAc,GAAG,GAAI;AAAA,QAChK,OAAO;AACL,UAAAA,6BAA4B,MAAM,UAAU,EAAE,UAAU,IAAI,KAAK,MAAMA,6BAA4B,MAAM,UAAU,EAAE,UAAU,IAAI,CAAC;AAAA,QACtI;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,OAAO,UAAU,YAAY,UAAU,GAAG;AAC5C,WAAK,QAAQ;AAAA,IACf,OAAO;AACL,WAAK,QAAQ;AAAA,IACf;AAAA,EACF;AAAA,EACA,IAAI,IAAI,cAAc;AACpB,QAAI,CAACA,6BAA4B,MAAM,OAAO,EAAE,OAAO,KAAKA,6BAA4B,MAAM,eAAe,EAAE,eAAe,IAAI,KAAK,OAAO;AAC5I,aAAOA,6BAA4B,MAAM,KAAK,EAAE,KAAK,EAAE,EAAE;AAAA,IAC3D;AACA,WAAOA,6BAA4B,MAAM,MAAM,EAAE,MAAM,EAAE,IAAI,YAAY;AAAA,EAC3E;AAAA,EACA,iBAAiB,IAAI,cAAc;AACjC,QAAI,QAAQ;AACZ,WAAO,WAAY;AACjB,eAAS,OAAO,UAAU,QAAQ,OAAO,IAAI,MAAM,IAAI,GAAG,OAAO,GAAG,OAAO,MAAM,QAAQ;AACvF,aAAK,IAAI,IAAI,UAAU,IAAI;AAAA,MAC7B;AACA,YAAM,gBAAgB,MAAM,IAAI,MAAM;AACpC,WAAG,GAAG,IAAI;AACV,uBAAe,MAAM,cAAc,KAAK,CAAC;AACzC,eAAO,MAAM;AAAA,QAAC;AAAA,MAChB,GAAG,YAAY;AACf,aAAO;AAAA,QACL;AAAA,QACA,QAAQ;AACN,wBAAc,MAAM;AAAA,QACtB;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAAA,EACA,oBAAoB,IAAI,cAAc;AACpC,QAAI,SAAS;AACb,WAAO,WAAY;AACjB,eAAS,QAAQ,UAAU,QAAQ,OAAO,IAAI,MAAM,KAAK,GAAG,QAAQ,GAAG,QAAQ,OAAO,SAAS;AAC7F,aAAK,KAAK,IAAI,UAAU,KAAK;AAAA,MAC/B;AACA,UAAI;AACJ,YAAM,eAAe,IAAI,QAAQ,CAAC,SAAS,WAAW;AACpD,wBAAgB,OAAO,IAAI,MAAM;AAC/B,cAAI;AACJ,cAAI;AACJ,cAAI;AACF,2BAAe,QAAQ,QAAQ,GAAG,GAAG,IAAI,CAAC;AAAA,UAC5C,SAAS,KAAP;AACA,2BAAe,QAAQ,OAAO,GAAG;AAAA,UACnC;AACA,uBAAa,KAAK,YAAU;AAC1B,gBAAI,aAAa;AACf,qBAAO,WAAW;AAAA,YACpB,OAAO;AACL,4BAAc,KAAK;AACnB,sBAAQ,MAAM;AAAA,YAChB;AAAA,UACF,GAAG,SAAO;AACR,gBAAI,aAAa;AACf,qBAAO,WAAW;AAAA,YACpB,OAAO;AACL,4BAAc,KAAK;AACnB,qBAAO,GAAG;AAAA,YACZ;AAAA,UACF,CAAC;AACD,iBAAO,WAAS;AACd,0BAAc,kBAAkB,KAAK;AAAA,UACvC;AAAA,QACF,GAAG,YAAY;AAAA,MACjB,CAAC;AACD,mBAAa,QAAQ,WAAS;AAC5B,sBAAc,MAAM,KAAK;AAAA,MAC3B;AACA,mBAAa,UAAU;AACvB,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EACA,SAAS;AACP,IAAAA,6BAA4B,MAAM,OAAO,EAAE,OAAO,IAAI;AACtD,iBAAaA,6BAA4B,MAAM,WAAW,EAAE,WAAW,CAAC;AACxE,aAAS,IAAI,GAAG,IAAI,KAAK,OAAO,KAAK;AACnC,MAAAA,6BAA4B,MAAM,UAAU,EAAE,UAAU,EAAE;AAAA,IAC5D;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,MAAM,UAAU;AACd,QAAI,aAAa,QAAQ;AACvB,iBAAW;AAAA,IACb;AACA,IAAAA,6BAA4B,MAAM,OAAO,EAAE,OAAO,IAAI;AACtD,iBAAaA,6BAA4B,MAAM,WAAW,EAAE,WAAW,CAAC;AACxE,QAAI,YAAY,MAAM;AACpB,MAAAA,6BAA4B,MAAM,WAAW,EAAE,WAAW,IAAI,WAAWA,6BAA4B,MAAM,OAAO,EAAE,OAAO,GAAG,QAAQ;AAAA,IACxI;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYA,UAAU,UAAU;AAClB,iBAAaA,6BAA4B,MAAM,kBAAkB,EAAE,kBAAkB,CAAC;AACtF,SAAK,MAAM,QAAQ;AACnB,QAAI,KAAK,QAAQ,KAAK,OAAO,SAAS,KAAK,KAAK,GAAG;AACjD,MAAAA,6BAA4B,MAAM,WAAW,EAAE,WAAW,IAAI,KAAK,QAAQ;AAC3E,WAAK,QAAQA,6BAA4B,MAAM,UAAU,EAAE,UAAU;AACrE,MAAAA,6BAA4B,MAAM,kBAAkB,EAAE,kBAAkB,IAAI,WAAWA,6BAA4B,MAAM,cAAc,EAAE,cAAc,GAAG,QAAQ;AAAA,IACpK;AAAA,EACF;AAAA,EACA,IAAI,WAAW;AACb,WAAOA,6BAA4B,MAAM,OAAO,EAAE,OAAO;AAAA,EAC3D;AACF;AACA,SAAS,OAAO,IAAI;AAClB,EAAAA,6BAA4B,MAAM,eAAe,EAAE,eAAe,KAAK;AACvE,MAAI,OAAO;AACX,MAAI;AACJ,MAAI;AACF,mBAAe,GAAG;AAAA,EACpB,SAAS,KAAP;AACA,IAAAA,6BAA4B,MAAM,eAAe,EAAE,eAAe,KAAK;AACvE,UAAM;AAAA,EACR;AACA,SAAO;AAAA,IACL,OAAO,WAAS;AACd,UAAI;AAAM;AACV,aAAO;AACP,MAAAA,6BAA4B,MAAM,eAAe,EAAE,eAAe,KAAK;AACvE,mBAAa,KAAK;AAClB,MAAAA,6BAA4B,MAAM,UAAU,EAAE,UAAU,EAAE;AAAA,IAC5D;AAAA,IACA,MAAM,MAAM;AACV,UAAI;AAAM;AACV,aAAO;AACP,MAAAA,6BAA4B,MAAM,eAAe,EAAE,eAAe,KAAK;AACvE,MAAAA,6BAA4B,MAAM,UAAU,EAAE,UAAU,EAAE;AAAA,IAC5D;AAAA,EACF;AACF;AACA,SAAS,cAAc;AAIrB,iBAAe,MAAMA,6BAA4B,MAAM,KAAK,EAAE,KAAK,EAAE,CAAC;AACxE;AACA,SAAS,SAAS;AAChB,MAAIA,6BAA4B,MAAM,OAAO,EAAE,OAAO,KAAKA,6BAA4B,MAAM,eAAe,EAAE,eAAe,KAAK,KAAK,OAAO;AAC5I;AAAA,EACF;AACA,MAAIA,6BAA4B,MAAM,eAAe,EAAE,eAAe,EAAE,WAAW,GAAG;AACpF;AAAA,EACF;AAKA,QAAM,OAAOA,6BAA4B,MAAM,eAAe,EAAE,eAAe,EAAE,MAAM;AACvF,QAAM,UAAUA,6BAA4B,MAAM,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE;AACvE,OAAK,QAAQ,QAAQ;AACrB,OAAK,OAAO,QAAQ;AACtB;AACA,SAAS,QAAQ,IAAI,SAAS;AAC5B,MAAI,YAAY,QAAQ;AACtB,cAAU,CAAC;AAAA,EACb;AACA,QAAM,UAAU;AAAA,IACd;AAAA,IACA,UAAU,QAAQ,YAAY;AAAA,IAC9B,OAAO,MAAM;AACX,MAAAA,6BAA4B,MAAM,QAAQ,EAAE,QAAQ,EAAE,OAAO;AAAA,IAC/D;AAAA,IACA,MAAM,MAAM;AACV,YAAM,IAAI,MAAM,4DAA4D;AAAA,IAC9E;AAAA,EACF;AACA,QAAM,QAAQA,6BAA4B,MAAM,eAAe,EAAE,eAAe,EAAE,UAAU,WAAS;AACnG,WAAO,QAAQ,WAAW,MAAM;AAAA,EAClC,CAAC;AACD,MAAI,UAAU,IAAI;AAChB,IAAAA,6BAA4B,MAAM,eAAe,EAAE,eAAe,EAAE,KAAK,OAAO;AAAA,EAClF,OAAO;AACL,IAAAA,6BAA4B,MAAM,eAAe,EAAE,eAAe,EAAE,OAAO,OAAO,GAAG,OAAO;AAAA,EAC9F;AACA,SAAO;AACT;AACA,SAAS,UAAU,SAAS;AAC1B,QAAM,QAAQA,6BAA4B,MAAM,eAAe,EAAE,eAAe,EAAE,QAAQ,OAAO;AACjG,MAAI,UAAU,IAAI;AAChB,IAAAA,6BAA4B,MAAM,eAAe,EAAE,eAAe,EAAE,OAAO,OAAO,CAAC;AAAA,EACrF;AACF;AACO,IAAM,2BAA2B,OAAO,SAAS;;;AC/SjD,SAAS,qBAAqB,OAAO;AAC1C,QAAM,WAAW,UAAQ,WAAW,QAAQ,KAAK;AACjD,SAAO,MAAM,OAAO,UAAQ,CAAC,SAAS,IAAI,CAAC;AAC7C;AAGO,SAAS,+BAA+B,OAAO;AACpD,SAAO,MAAM,OAAO,UAAQ,CAAC,KAAK,SAAS,iBAAiB,CAAC,KAAK,UAAU;AAC9E;;;ACPA,SAASG,aAAY;AACnB,SAAO,OAAO,WAAW,gBAAgB,OAAO,OAAO,aAAa,eAAe,OAAO,OAAO,YAAY,eAAe,OAAO,OAAO,YAAY;AACxJ;AACA,SAASC,iBAAgB;AACvB,SAAO,OAAO,cAAc,eAAe,OAAO,UAAU,YAAY,YAAY,UAAU,QAAQ,YAAY,MAAM;AAC1H;AAUe,SAAR,eAAgC,aAAa;AAClD,SAAO,CAAC,MAAM,YAAY;AACxB,QAAID,WAAU,KAAKC,eAAc,GAAG;AAClC,aAAWC,gBAAe,YAAY,MAAM,OAAO;AAAA,IACrD;AACA,UAAM,kBAAkB,CAAC,OAAO,YAAY,IAAI,QAAQ,QAAQ,EAAE,KAAK,GAAG;AAC1E,WAAO,QAAQ,QAAQ,eAAe;AAAA,EACxC;AACF;;;ACxBA,SAASC,6BAA4B,UAAU,YAAY;AAAE,MAAI,CAAC,OAAO,UAAU,eAAe,KAAK,UAAU,UAAU,GAAG;AAAE,UAAM,IAAI,UAAU,gDAAgD;AAAA,EAAG;AAAE,SAAO;AAAU;AAC1N,IAAIC,MAAK;AACT,SAASC,4BAA2B,MAAM;AAAE,SAAO,eAAeD,QAAO,MAAM;AAAM;AAarF,IAAME,eAAc;AAAA,EAClB,WAAW;AACb;AAYA,IAAM,oBAAoB;AAAA,EACxB,UAAU;AAAA,EACV,WAAW;AAAA,EACX,UAAU,CAAC;AAAA,EACX,YAAY;AAAA,EACZ,YAAY;AAAA,EACZ,iBAAiB;AAAA,EACjB,WAAW;AAAA,EACX,SAAS;AAAA,EACT,qBAAqB;AAAA,EACrB,SAAS,CAAC;AAAA,EACV,cAAc;AAAA,EACd,WAAW;AAAA,EACX,aAAa,CAAC,KAAK,KAAM,KAAM,GAAI;AAAA,EACnC,iBAAiB;AAAA,EACjB,4BAA4B;AAAA,EAC5B,sBAAsB;AAAA,EACtB,0BAA0B;AAC5B;AAKA,IAAI,sBAAmC,gBAAAD,4BAA2B,oBAAoB;AACtF,IAAI,UAAuB,gBAAAA,4BAA2B,QAAQ;AAC9D,IAAI,sBAAmC,gBAAAA,4BAA2B,oBAAoB;AACtF,IAAI,eAA4B,gBAAAA,4BAA2B,aAAa;AACxE,IAAI,gBAA6B,gBAAAA,4BAA2B,cAAc;AAC1E,IAAqB,MAArB,cAAiC,eAAe;AAAA;AAAA;AAAA;AAAA;AAAA,EAK9C,YAAY,MAAM,OAAO;AACvB,QAAI,uBAAuB;AAC3B,UAAM,MAAM,KAAK;AAIjB,WAAO,eAAe,MAAM,cAAc;AAAA,MACxC,OAAO;AAAA,IACT,CAAC;AAoCD,WAAO,eAAe,MAAM,SAAS;AAAA,MACnC,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,qBAAqB;AAAA,MAC/C,UAAU;AAAA,MACV,OAAO;AAAA,IACT,CAAC;AACD,WAAO,eAAe,MAAM,qBAAqB;AAAA,MAC/C,UAAU;AAAA,MACV,OAAO,OAAO,MAAM,YAAY;AAC9B,cAAM,SAAS,KAAK,OAAO,gBAAgB,WAAW,WAAW;AACjE,cAAM,SAAS,IAAI,OAAO,KAAK,MAAM,KAAK,OAAO,eAAe;AAChE,cAAM,OAAO;AAAA,UACX,GAAG,KAAK;AAAA,QACV;AACA,YAAI,KAAK,KAAK;AAEZ,iBAAO,OAAO,MAAM,KAAK,GAAG;AAAA,QAC9B;AACA,cAAM,MAAM,MAAM,OAAO,KAAK,KAAK,OAAO,KAAK;AAAA,UAC7C,GAAG,KAAK,OAAO;AAAA,UACf,UAAU,KAAK;AAAA,UACf,WAAW,KAAK;AAAA,UAChB,UAAU;AAAA,UACV,MAAM,KAAK,KAAK;AAAA,UAChB,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,QACjB,GAAG,OAAO;AACV,eAAO,IAAI;AAAA,MACb;AAAA,IACF,CAAC;AAID,WAAO,eAAe,MAAM,eAAe;AAAA,MACzC,UAAU;AAAA,MACV,OAAO,OAAM,YAAW;AACtB,YAAI,QAAQ,WAAW,GAAG;AACxB,eAAK,KAAK,IAAI,0BAA0B;AACxC;AAAA,QACF;AACA,YAAI,KAAK,KAAK,UAAU,GAAG;AACzB,eAAK,KAAK,IAAI,uOAAuO,SAAS;AAAA,QAChQ;AACA,aAAK,KAAK,IAAI,oBAAoB;AAClC,cAAM,gBAAgB,KAAK,KAAK,cAAc,OAAO;AACrD,cAAMF,6BAA4B,MAAM,YAAY,EAAE,YAAY,EAAE,aAAa;AAAA,MACnF;AAAA,IACF,CAAC;AACD,SAAK,OAAO;AACZ,SAAK,KAAK,KAAK,KAAK,MAAM;AAC1B,SAAK,QAAQ;AAGb,UAAMI,kBAAiB;AAAA,MACrB,oBAAoB;AAAA,MACpB,OAAO;AAAA,MACP,aAAa,kBAAkB;AAAA,MAC/B,iBAAiB;AAAA,IACnB;AAIA,SAAK,OAAO;AAAA,MACV,GAAGA;AAAA,MACH,GAAG;AAAA,IACL;AACA,SAAK,SAAS,OAAO,SAAS,MAAM,uBAAuB,UAAa,gBAAgB,KAAK,MAAM;AACjG,YAAM,IAAI,MAAM,kEAAkE;AAAA,IACpF;AACA,QAAI,eAAe,OAAO;AACxB,YAAM,IAAI,MAAM,6DAA6D;AAAA,IAC/E;AAOA,SAAK,YAAY,wBAAwB,KAAK,KAAK,qBAAqB,OAAO,wBAAwB,IAAI,iBAAiB,KAAK,KAAK,KAAK;AAC3I,IAAAJ,6BAA4B,MAAM,mBAAmB,EAAE,mBAAmB,KAAK,wBAAwB,KAAK,KAAK,gBAAgB,OAAO,SAAS,sBAAsB,OAAO;AAC9K,SAAK,YAAY,uBAAO,OAAO,IAAI;AACnC,SAAK,iBAAiB,uBAAO,OAAO,IAAI;AACxC,SAAK,kBAAkB,uBAAO,OAAO,IAAI;AACzC,SAAK,sBAAsB,KAAK,oBAAoB,KAAK,IAAI;AAC7D,SAAK,2BAA2B,KAAK,SAAS,oBAAoBA,6BAA4B,MAAM,mBAAmB,EAAE,mBAAmB,GAAG;AAAA,MAC7I,UAAU;AAAA,IACZ,CAAC,CAAC;AAAA,EACJ;AAAA,EACA,sBAAsB;AACpB,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,KAAK,SAAS,EAAE;AAAA,IAC1B;AACA,WAAO,KAAK,KAAK,EAAE,QAAQ,YAAU;AAEnC,UAAI,MAAM,MAAM,EAAE,OAAO,MAAM,MAAM,EAAE,IAAI,WAAW;AACpD,cAAM,WAAW;AAAA,UACf,GAAG,MAAM,MAAM,EAAE;AAAA,QACnB;AACA,eAAO,SAAS;AAChB,cAAM,MAAM,IAAI;AAAA,UACd,GAAG,MAAM,MAAM;AAAA,UACf,KAAK;AAAA,QACP;AAAA,MACF;AAAA,IACF,CAAC;AACD,SAAK,KAAK,SAAS;AAAA,MACjB;AAAA,IACF,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,wBAAwB,QAAQ,MAAM;AACpC,QAAI,SAAS,QAAQ;AACnB,aAAO,CAAC;AAAA,IACV;AACA,QAAI,KAAK,UAAU,MAAM,GAAG;AAC1B,YAAM,WAAW,KAAK,UAAU,MAAM;AACtC,eAAS,MAAM;AACf,UAAI,KAAK,OAAO;AACd,iBAAS,MAAM,IAAI;AAAA,MACrB;AACA,WAAK,UAAU,MAAM,IAAI;AAAA,IAC3B;AACA,QAAI,KAAK,eAAe,MAAM,GAAG;AAC/B,WAAK,eAAe,MAAM,EAAE,OAAO;AACnC,WAAK,eAAe,MAAM,IAAI;AAAA,IAChC;AACA,QAAI,KAAK,gBAAgB,MAAM,GAAG;AAChC,WAAK,gBAAgB,MAAM,EAAE,MAAM;AACnC,WAAK,gBAAgB,MAAM,IAAI;AAAA,IACjC;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASA,MAAM,sBAAsB,MAAM;AAChC,QAAI,QAAQ;AACZ,WAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,YAAM,QAAQ,KAAK;AACnB,YAAM,OAAO,cAAc,KAAK,OAAO,YAAY;AACnD,YAAM,SAAS,IAAI,WAAO;AAAA,QACxB,QAAQ,GAAG,YAAY;AAAA,QACvB,UAAU;AAAA,MACZ,CAAC;AACD,WAAK,gBAAgB,KAAK,EAAE,IAAI;AAChC,WAAK,eAAe,KAAK,EAAE,IAAI,IAAI,aAAa,KAAK,IAAI;AACzD,UAAI;AACJ,WAAK,aAAa,KAAK,IAAI,MAAM;AAC/B,eAAO,KAAK,UAAU,CAAC,CAAC;AACxB,sBAAc,MAAM;AACpB,aAAK,wBAAwB,KAAK,EAAE;AACpC,gBAAQ,UAAU,KAAK,gBAAgB;AAAA,MACzC,CAAC;AACD,WAAK,QAAQ,KAAK,IAAI,cAAY;AAChC,YAAI,UAAU;AAEZ,iBAAO,KAAK,SAAS,CAAC,CAAC;AACvB,wBAAc,MAAM;AAAA,QACtB,OAAO;AAGL,wBAAc,MAAM;AACpB,0BAAgB,KAAK,SAAS,IAAI,MAAM;AACtC,mBAAO,KAAK;AACZ,mBAAO,KAAK,UAAU,CAAC,CAAC;AACxB,mBAAO,MAAM;AAAA,YAAC;AAAA,UAChB,CAAC;AAAA,QACH;AAAA,MACF,CAAC;AACD,WAAK,WAAW,KAAK,IAAI,MAAM;AAC7B,eAAO,KAAK,SAAS,CAAC,CAAC;AACvB,sBAAc,MAAM;AAAA,MACtB,CAAC;AACD,WAAK,YAAY,KAAK,IAAI,SAAU,OAAO;AACzC,YAAI;AAAA,UACF;AAAA,QACF,IAAI,UAAU,SAAS,CAAC,IAAI;AAC5B,YAAI,WAAW,QAAQ;AACrB,iBAAO,KAAK,UAAU,CAAC,CAAC;AACxB,wBAAc,MAAM;AACpB,gBAAM,wBAAwB,KAAK,EAAE;AAAA,QACvC;AACA,gBAAQ,UAAU,KAAK,iBAAiB;AAAA,MAC1C,CAAC;AACD,WAAK,YAAY,KAAK,IAAI,MAAM;AAC9B,sBAAc,MAAM;AACpB,YAAI,KAAK,OAAO;AACd,iBAAO,KAAK,SAAS,CAAC,CAAC;AAAA,QACzB;AACA,wBAAgB,KAAK,SAAS,IAAI,MAAM;AACtC,iBAAO,KAAK;AACZ,iBAAO,KAAK,UAAU,CAAC,CAAC;AACxB,iBAAO,MAAM;AAAA,UAAC;AAAA,QAChB,CAAC;AAAA,MACH,CAAC;AACD,WAAK,QAAQ,KAAK,IAAI,MAAM;AAK1B,YAAI,OAAO,QAAQ;AACjB,iBAAO,KAAK,SAAS,CAAC,CAAC;AACvB,iBAAO,KAAK,UAAU,CAAC,CAAC;AAAA,QAC1B;AAAA,MACF,CAAC;AACD,WAAK,WAAW,KAAK,IAAI,MAAM;AAE7B,YAAI,OAAO,QAAQ;AACjB,iBAAO,KAAK,SAAS,CAAC,CAAC;AACvB,iBAAO,KAAK,UAAU,CAAC,CAAC;AAAA,QAC1B;AAAA,MACF,CAAC;AACD,aAAO,GAAG,YAAY,kBAAgB,2BAAmB,MAAM,cAAc,IAAI,CAAC;AAClF,aAAO,GAAG,SAAS,aAAW;AAC5B,cAAM;AAAA,UACJ;AAAA,QACF,IAAI,QAAQ;AACZ,cAAM,QAAQ,OAAO,OAAO,IAAI,MAAM,OAAO,GAAG;AAAA,UAC9C,OAAO,QAAQ;AAAA,QACjB,CAAC;AAID,YAAI,CAAC,KAAK,KAAK,oBAAoB;AACjC,eAAK,wBAAwB,KAAK,EAAE;AAEpC,eAAK,KAAK,aAAa,KAAK,IAAI;AAAA,YAC9B,aAAa;AAAA,UACf,CAAC;AAAA,QACH,OAAO;AACL,iBAAO,MAAM;AAAA,QACf;AACA,aAAK,KAAK,KAAK,gBAAgB,MAAM,KAAK;AAC1C,sBAAc,KAAK;AACnB,eAAO,KAAK;AAAA,MACd,CAAC;AACD,aAAO,GAAG,WAAW,UAAQ;AAC3B,cAAM,aAAa;AAAA,UACjB,WAAW,KAAK;AAAA,QAClB;AACA,aAAK,KAAK,KAAK,kBAAkB,MAAM,UAAU;AACjD,aAAK,wBAAwB,KAAK,EAAE;AACpC,sBAAc,KAAK;AACnB,eAAO,MAAM;AACb,gBAAQ;AAAA,MACV,CAAC;AACD,sBAAgB,KAAK,SAAS,IAAI,MAAM;AACtC,YAAI,KAAK,UAAU;AACjB,iBAAO,KAAK,SAAS,CAAC,CAAC;AAAA,QACzB,OAAO;AACL,iBAAO,KAAK;AAAA,QACd;AAQA,eAAO,MAAM;AAAA,QAAC;AAAA,MAChB,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASA,mBAAmB,MAAM,WAAW;AAClC,UAAM,cAAc,KAAK,KAAK,QAAQ,KAAK,EAAE;AAC7C,QAAI,CAAC;AAAa;AAElB,QAAI,CAAC,YAAY,OAAO,YAAY,IAAI,cAAc,WAAW;AAC/D,WAAK,KAAK,IAAI,0BAA0B;AACxC,WAAK,KAAK,aAAa,YAAY,IAAI;AAAA,QACrC,KAAK;AAAA,UACH,GAAG,YAAY;AAAA,UACf,WAAW;AAAA,QACb;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,aAAa,QAAQ,IAAI;AACvB,SAAK,eAAe,MAAM,EAAE,GAAG,gBAAgB,UAAQ;AACrD,UAAI,WAAW,KAAK;AAAI,WAAG,KAAK,EAAE;AAAA,IACpC,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,QAAQ,QAAQ,IAAI;AAClB,SAAK,eAAe,MAAM,EAAE,GAAG,gBAAgB,CAAC,cAAc,aAAa;AACzE,UAAI,WAAW,cAAc;AAE3B,WAAG,QAAQ;AAAA,MACb;AAAA,IACF,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,QAAQ,QAAQ,IAAI;AAClB,SAAK,eAAe,MAAM,EAAE,GAAG,gBAAgB,kBAAgB;AAC7D,UAAI,WAAW,cAAc;AAC3B,WAAG;AAAA,MACL;AAAA,IACF,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,WAAW,QAAQ,IAAI;AACrB,SAAK,eAAe,MAAM,EAAE,GAAG,aAAa,MAAM;AAChD,UAAI,CAAC,KAAK,KAAK,QAAQ,MAAM;AAAG;AAChC,SAAG;AAAA,IACL,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,WAAW,QAAQ,IAAI;AACrB,SAAK,eAAe,MAAM,EAAE,GAAG,aAAa,MAAM;AAChD,UAAI,CAAC,KAAK,KAAK,QAAQ,MAAM;AAAG;AAChC,SAAG;AAAA,IACL,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,YAAY,QAAQ,cAAc;AAChC,QAAI,SAAS;AACb,SAAK,eAAe,MAAM,EAAE,GAAG,cAAc,WAAY;AACvD,UAAI,CAAC,OAAO,KAAK,QAAQ,MAAM;AAAG;AAClC,mBAAa,GAAG,SAAS;AAAA,IAC3B,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,YAAY,QAAQ,IAAI;AACtB,SAAK,eAAe,MAAM,EAAE,GAAG,cAAc,MAAM;AACjD,UAAI,CAAC,KAAK,KAAK,QAAQ,MAAM;AAAG;AAChC,SAAG;AAAA,IACL,CAAC;AAAA,EACH;AAAA,EACA,UAAU;AACR,SAAK,KAAK,SAAS;AAAA,MACjB,cAAc;AAAA,QACZ,GAAG,KAAK,KAAK,SAAS,EAAE;AAAA,QACxB,kBAAkB;AAAA,MACpB;AAAA,IACF,CAAC;AACD,SAAK,KAAK,YAAYA,6BAA4B,MAAM,aAAa,EAAE,aAAa,CAAC;AACrF,SAAK,KAAK,GAAG,kBAAkB,KAAK,mBAAmB;AAAA,EACzD;AAAA,EACA,YAAY;AACV,SAAK,KAAK,SAAS;AAAA,MACjB,cAAc;AAAA,QACZ,GAAG,KAAK,KAAK,SAAS,EAAE;AAAA,QACxB,kBAAkB;AAAA,MACpB;AAAA,IACF,CAAC;AACD,SAAK,KAAK,eAAeA,6BAA4B,MAAM,aAAa,EAAE,aAAa,CAAC;AAAA,EAC1F;AACF;AACA,SAAS,SAAS,MAAM;AACtB,MAAI,SAAS;AACb,OAAK,wBAAwB,KAAK,EAAE;AAGpC,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,QAAI;AACJ,QAAI;AACJ,QAAI;AACJ,UAAM,OAAO;AAAA,MACX,GAAG,KAAK;AAAA,MACR,GAAI,KAAK,OAAO,CAAC;AAAA,IACnB;AACA,QAAI,OAAO,KAAK,YAAY,YAAY;AACtC,WAAK,UAAU,KAAK,QAAQ,IAAI;AAAA,IAClC;AAGA,UAAM,gBAAgB;AAAA,MACpB,GAAG;AAAA,MACH,GAAG;AAAA,IACL;AAMA,kBAAc,cAAc,eAAe,IAAI;AAC/C,kBAAc,kBAAkB,SAAO;AACrC,YAAM,MAAM,IAAI,oBAAoB;AACpC,UAAI,kBAAkB,CAAC,CAAC,KAAK;AAC7B,UAAI;AACJ,UAAI,OAAO,KAAK,oBAAoB,YAAY;AAC9C,8BAAsB,KAAK,gBAAgB,KAAK,IAAI;AAAA,MACtD;AACA,UAAI,IAAY,eAAe,kBAAkB,GAAG;AAClD,YAAI,CAAC,cAAc;AAAkB,iBAAO,QAAQ,OAAO;AAC3D,YAAI;AACJ,cAAM,IAAI,IAAI,QAAQ,SAAO;AAE3B,iBAAO;AAAA,QACT,CAAC;AACD,wBAAgB,KAAK,SAAS,IAAI,MAAM;AACtC,cAAI,KAAK,UAAU;AACjB,0BAAc,MAAM;AAAA,UACtB;AACA,eAAK;AACL,iBAAO,MAAM;AAAA,UAAC;AAAA,QAChB,CAAC;AASD,eAAO,QAAQ,IAAI,CAAC,GAAG,mBAAmB,CAAC;AAAA,MAC7C;AACA,aAAO;AAAA,IACT;AACA,kBAAc,UAAU,SAAO;AAC7B,UAAI;AACJ,WAAK,KAAK,IAAI,GAAG;AACjB,YAAM,MAAM,IAAI,kBAAkB,IAAI,gBAAgB,oBAAoB,IAAI;AAC9E,UAAI,uBAAe,GAAG,GAAG;AAEvB,cAAM,IAAI,qBAAa,KAAK,GAAG;AAAA,MACjC;AACA,WAAK,wBAAwB,KAAK,EAAE;AACpC,OAAC,iBAAiB,kBAAkB,OAAO,SAAS,eAAe,MAAM;AACzE,WAAK,KAAK,KAAK,gBAAgB,MAAM,GAAG;AACxC,aAAO,GAAG;AAAA,IACZ;AACA,kBAAc,aAAa,CAAC,eAAe,eAAe;AACxD,WAAK,mBAAmB,MAAM,OAAO,GAAG;AACxC,WAAK,KAAK,KAAK,mBAAmB,MAAM;AAAA,QACtC,UAAU;AAAA,QACV;AAAA,QACA;AAAA,MACF,CAAC;AAAA,IACH;AACA,kBAAc,YAAY,MAAM;AAC9B,YAAM,aAAa;AAAA,QACjB,WAAW,OAAO;AAAA,MACpB;AACA,WAAK,wBAAwB,KAAK,EAAE;AACpC,oBAAc,KAAK;AACnB,WAAK,KAAK,KAAK,kBAAkB,MAAM,UAAU;AACjD,UAAI,OAAO,KAAK;AACd,aAAK,KAAK,IAAI,YAAY,OAAO,KAAK,aAAa,OAAO,KAAK;AAAA,MACjE;AACA,cAAQ,MAAM;AAAA,IAChB;AACA,UAAM,uBAAuB,SAAO;AAClC,UAAI;AACJ,YAAM,SAAS,OAAO,OAAO,UAAU,wBAAwB,IAAI,qBAAqB,OAAO,SAAS,sBAAsB,UAAU;AACxI,UAAI,WAAW,KAAK;AAElB,YAAI,CAAC,KAAK,SAAS,UAAU;AAC3B,cAAI;AACJ,gBAAM,QAAQ,wBAAwBA,6BAA4B,MAAM,mBAAmB,EAAE,mBAAmB,MAAM,OAAO,SAAS,sBAAsB,KAAK;AACjK,cAAI,QAAQ,QAAQ,KAAK,MAAM;AAC7B,mBAAO;AAAA,UACT;AACA,eAAK,SAAS,UAAU,KAAK,KAAK;AAAA,QACpC;AAAA,MACF,WAAW,SAAS,OAAO,SAAS,OAAO,WAAW,OAAO,WAAW,KAAK;AAI3E,eAAO;AAAA,MACT,WAAW,OAAO,cAAc,eAAe,UAAU,WAAW,OAAO;AAEzE,YAAI,CAAC,KAAK,SAAS,UAAU;AAC3B,eAAK,SAAS,MAAM;AACpB,iBAAO,iBAAiB,UAAU,MAAM;AACtC,iBAAK,SAAS,OAAO;AAAA,UACvB,GAAG;AAAA,YACD,MAAM;AAAA,UACR,CAAC;AAAA,QACH;AAAA,MACF;AACA,oBAAc,MAAM;AACpB,sBAAgB;AAAA,QACd,kBAAkB;AAAA,QAClB,QAAQ;AACN,eAAK,mBAAmB;AAAA,QAC1B;AAAA,QACA,OAAO;AACL,gBAAM,IAAI,MAAM,4DAA4D;AAAA,QAC9E;AAAA,QACA,KAAK;AACH,gBAAM,IAAI,MAAM,mDAAmD;AAAA,QACrE;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,QAAI,KAAK,iBAAiB,MAAM;AAC9B,oBAAc,gBAAgB,WAAY;AACxC,iBAAS,OAAO,UAAU,QAAQ,OAAO,IAAI,MAAM,IAAI,GAAG,OAAO,GAAG,OAAO,MAAM,QAAQ;AACvF,eAAK,IAAI,IAAI,UAAU,IAAI;AAAA,QAC7B;AACA,eAAO,KAAK,cAAc,GAAG,MAAM,oBAAoB;AAAA,MACzD;AAAA,IACF,OAAO;AACL,oBAAc,gBAAgB;AAAA,IAChC;AACA,UAAM,WAAW,CAAC,KAAK,SAAS,aAAa;AAC3C,UAAI,IAAY,KAAK,OAAO,KAAK,CAAC,IAAY,KAAK,QAAQ,GAAG;AAE5D,YAAI,QAAQ,IAAI,IAAI,OAAO;AAAA,MAC7B;AAAA,IACF;AAGA,UAAM,OAAO,CAAC;AACd,UAAM,oBAAoB,MAAM,QAAQ,KAAK,iBAAiB,IAAI,KAAK,oBAErE,OAAO,KAAK,KAAK,IAAI;AACvB,sBAAkB,QAAQ,UAAQ;AAChC,WAAK,IAAI,IAAI,KAAK,KAAK,IAAI;AAAA,IAC7B,CAAC;AAGD,aAAS,MAAM,QAAQ,UAAU;AACjC,aAAS,MAAM,QAAQ,UAAU;AACjC,kBAAc,WAAW;AACzB,aAAS,IAAQ,OAAO,KAAK,MAAM,aAAa;AAChD,SAAK,UAAU,KAAK,EAAE,IAAI;AAC1B,SAAK,eAAe,KAAK,EAAE,IAAI,IAAI,aAAa,KAAK,IAAI;AAGzD,eAAW,MAAM;AACf,UAAI,CAAC,KAAK,UAAU;AAClB,eAAO,MAAM;AAAA,MACf;AAOA,aAAO,MAAM;AAAA,MAAC;AAAA,IAChB;AACA,WAAO,oBAAoB,EAAE,KAAK,qBAAmB;AACnD,YAAM,iBAAiB,gBAAgB,CAAC;AACxC,UAAI,gBAAgB;AAClB,aAAK,KAAK,IAAI,4BAA4B,KAAK,iBAAiB,eAAe,cAAc;AAC7F,eAAO,yBAAyB,cAAc;AAAA,MAChD;AAAA,IACF,CAAC;AACD,oBAAgB,KAAK,SAAS,IAAI,QAAQ;AAC1C,SAAK,aAAa,KAAK,IAAI,kBAAgB;AACzC,oBAAc,MAAM;AACpB,WAAK,wBAAwB,KAAK,IAAI;AAAA,QACpC,OAAO,CAAC,CAAC,OAAO;AAAA,MAClB,CAAC;AACD,cAAQ,UAAU,0BAA0B;AAAA,IAC9C,CAAC;AACD,SAAK,QAAQ,KAAK,IAAI,cAAY;AAChC,oBAAc,MAAM;AACpB,UAAI,UAAU;AAEZ,eAAO,MAAM;AAAA,MACf,OAAO;AAGL,wBAAgB,KAAK,SAAS,IAAI,QAAQ;AAAA,MAC5C;AAAA,IACF,CAAC;AACD,SAAK,WAAW,KAAK,IAAI,MAAM;AAC7B,oBAAc,MAAM;AACpB,aAAO,MAAM;AAAA,IACf,CAAC;AACD,SAAK,YAAY,KAAK,IAAI,SAAU,QAAQ;AAC1C,UAAI;AAAA,QACF;AAAA,MACF,IAAI,WAAW,SAAS,CAAC,IAAI;AAC7B,UAAI,WAAW,QAAQ;AACrB,sBAAc,MAAM;AACpB,eAAO,wBAAwB,KAAK,IAAI;AAAA,UACtC,OAAO,CAAC,CAAC,OAAO;AAAA,QAClB,CAAC;AAAA,MACH;AACA,cAAQ,UAAU,KAAK,iBAAiB;AAAA,IAC1C,CAAC;AACD,SAAK,YAAY,KAAK,IAAI,MAAM;AAC9B,oBAAc,MAAM;AACpB,UAAI,KAAK,OAAO;AACd,eAAO,MAAM;AAAA,MACf;AACA,sBAAgB,KAAK,SAAS,IAAI,QAAQ;AAAA,IAC5C,CAAC;AAAA,EACH,CAAC,EAAE,MAAM,SAAO;AACd,SAAK,KAAK,KAAK,gBAAgB,MAAM,GAAG;AACxC,UAAM;AAAA,EACR,CAAC;AACH;AACA,eAAe,cAAc,OAAO;AAClC,QAAM,gBAAgB,qBAAqB,KAAK;AAChD,QAAM,cAAc,+BAA+B,aAAa;AAChE,OAAK,KAAK,KAAK,gBAAgB,WAAW;AAC1C,QAAM,QAAQ,WAAW,cAAc,IAAI,CAAC,MAAM,MAAM;AACtD,UAAM,UAAU,IAAI;AACpB,UAAM,QAAQ,MAAM;AACpB,QAAI,KAAK,UAAU;AACjB,YAAM,aAAa,IAAI,gBAAgB;AACvC,YAAM,iBAAiB,iBAAe;AACpC,YAAI,YAAY,OAAO,KAAK;AAAI,qBAAW,MAAM;AAAA,MACnD;AACA,WAAK,KAAK,GAAG,gBAAgB,cAAc;AAC3C,WAAK,wBAAwB,KAAK,EAAE;AACpC,YAAM,gBAAgB,KAAK,iBAAiB,MAAM;AAAA,QAChD,QAAQ,WAAW;AAAA,MACrB,CAAC;AACD,WAAK,SAAS,iBAAiB,MAAM;AACnC,aAAK,KAAK,IAAI,gBAAgB,cAAc;AAAA,MAC9C,GAAG;AAAA,QACD,UAAU;AAAA,MACZ,CAAC,EAAE;AACH,aAAO;AAAA,IACT;AACA,WAAOA,6BAA4B,MAAM,OAAO,EAAE,OAAO,EAAE,MAAM,SAAS,KAAK;AAAA,EACjF,CAAC,CAAC;AACJ;AACA,IAAI,UAAUG,aAAY;",
  "names": ["has", "decode", "encode", "obj", "self", "_wrapNativeSuper", "Class", "_construct", "Parent", "args", "_setPrototypeOf", "o", "p", "_getPrototypeOf", "DetailedError", "len", "_classCallCheck", "_defineProperties", "_createClass", "BaseUpload", "fingerprint", "URL", "_classCallCheck", "_defineProperties", "_createClass", "NoopUrlStorage", "fingerprint", "_classCallCheck", "_defineProperties", "_createClass", "WebStorageUrlStorage", "fingerprint", "id", "_classCallCheck", "_defineProperties", "_createClass", "XHRHttpStack", "getName", "Request", "_classCallCheck", "_createClass", "Response", "isReactNative", "isCordova", "_classCallCheck", "_defineProperties", "_createClass", "FileSource", "_classCallCheck", "_defineProperties", "_createClass", "StreamSource", "value", "done", "_classCallCheck", "_defineProperties", "_createClass", "FileReader", "_typeof", "obj", "_classCallCheck", "_defineProperties", "_createClass", "_inherits", "_setPrototypeOf", "o", "p", "_createSuper", "_isNativeReflectConstruct", "_getPrototypeOf", "_possibleConstructorReturn", "self", "_assertThisInitialized", "ownKeys", "_objectSpread", "_defineProperty", "defaultOptions", "FileReader", "Upload", "XMLHttpRequest", "Blob", "_classPrivateFieldLooseBase", "id", "_classPrivateFieldLooseKey", "_classPrivateFieldLooseBase", "id", "_classPrivateFieldLooseKey", "_Symbol$for", "_Symbol$for2", "_classPrivateFieldLooseBase", "id", "_classPrivateFieldLooseKey", "ee", "throttle", "_classPrivateFieldLooseBase", "id", "_classPrivateFieldLooseKey", "_emitter", "_classPrivateFieldLooseBase", "id", "_classPrivateFieldLooseKey", "isCordova", "isReactNative", "defaultOptions", "_classPrivateFieldLooseBase", "id", "_classPrivateFieldLooseKey", "packageJson", "defaultOptions"]
}
